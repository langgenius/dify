// This file is auto-generated by @hey-api/openapi-ts

import { z } from 'zod'

import { zInputFileObject } from './input.gen'
import { zRetrieverResource } from './retriever.gen'
import { zUsage } from './usage.gen'
import { zUserInputFormItem } from './user.gen'

export const zChatRequest = z.object({
  query: z.string().describe('User Input/Question content.'),
  inputs: z.record(z.unknown()).describe('Allows the entry of various variable values defined by the App. Contains key/value pairs. Default {}.').optional().default({}),
  response_mode: z.enum(['streaming', 'blocking']).describe('Mode of response return. `streaming` (recommended) uses SSE. `blocking` returns after completion (may be interrupted for long processes; not supported in Agent Assistant mode). Cloudflare timeout is 100s.').optional(),
  user: z.string().describe('User identifier, unique within the application. **Note**: The Service API does not share conversations created by the WebApp. Conversations created through the API are isolated from those created in the WebApp interface.'),
  conversation_id: z.string().describe('Conversation ID to continue a conversation. Pass the previous message\'s conversation_id.').optional(),
  files: z.array(zInputFileObject).describe('File list (images) for Vision-capable models.').optional(),
  auto_generate_name: z.boolean().describe('Auto-generate conversation title. Default `true`. If `false`, use conversation rename API with `auto_generate: true` for async title generation.').optional().default(true),
})

export type ChatRequestZodType = z.infer<typeof zChatRequest>

/**
 * Response object for blocking mode chat completion.
 */
export const zChatCompletionResponse = z.object({
  event: z.string().describe('Event type, fixed as `message`.').optional(),
  task_id: z.string().uuid().describe('Task ID for request tracking and stop response API.').optional(),
  id: z.string().uuid().describe('Unique ID of this response/message event.').optional(),
  message_id: z.string().uuid().describe('Unique message ID.').optional(),
  conversation_id: z.string().uuid().describe('Conversation ID.').optional(),
  mode: z.string().describe('App mode, fixed as `chat`.').optional(),
  answer: z.string().describe('Complete response content.').optional(),
  metadata: z.object({
    usage: zUsage.optional(),
    retriever_resources: z.array(zRetrieverResource).optional(),
  }).optional(),
  created_at: z.coerce.bigint().min(BigInt('-9223372036854775808'), { message: 'Invalid value: Expected int64 to be >= -9223372036854775808' }).max(BigInt('9223372036854775807'), { message: 'Invalid value: Expected int64 to be <= 9223372036854775807' }).describe('Message creation timestamp (Unix epoch seconds).').optional(),
}).describe('Response object for blocking mode chat completion.')

export type ChatCompletionResponseZodType = z.infer<typeof zChatCompletionResponse>

export const zChatAppParametersResponse = z.object({
  opening_statement: z.string().optional(),
  suggested_questions: z.array(z.string()).optional(),
  suggested_questions_after_answer: z.object({
    enabled: z.boolean().optional(),
  }).optional(),
  speech_to_text: z.object({
    enabled: z.boolean().optional(),
  }).optional(),
  text_to_speech: z.object({
    enabled: z.boolean().optional(),
    voice: z.string().optional(),
    language: z.string().optional(),
    autoPlay: z.enum(['enabled', 'disabled']).optional(),
  }).optional(),
  retriever_resource: z.object({
    enabled: z.boolean().optional(),
  }).optional(),
  annotation_reply: z.object({
    enabled: z.boolean().optional(),
  }).optional(),
  user_input_form: z.array(zUserInputFormItem).optional(),
  file_upload: z.object({
    image: z.object({
      enabled: z.boolean().optional(),
      number_limits: z.number().int().optional(),
      detail: z.string().optional(),
      transfer_methods: z.array(z.enum(['remote_url', 'local_file'])).optional(),
    }).optional(),
  }).optional(),
  system_parameters: z.object({
    file_size_limit: z.number().int().optional(),
    image_file_size_limit: z.number().int().optional(),
    audio_file_size_limit: z.number().int().optional(),
    video_file_size_limit: z.number().int().optional(),
  }).optional(),
})

export type ChatAppParametersResponseZodType = z.infer<typeof zChatAppParametersResponse>
