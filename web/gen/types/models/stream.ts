// This file is auto-generated by @hey-api/openapi-ts

import type { ChunkChatEvent } from './chunk'
import type { RetrieverResource } from './retriever'
import type { Usage } from './usage'

export type StreamEventBase = {
  /**
   * Task ID.
   */
  task_id?: string
  /**
   * Unique message ID.
   */
  message_id?: string
  /**
   * Conversation ID.
   */
  conversation_id?: string
  /**
   * Creation timestamp.
   */
  created_at?: number
}

export type StreamEventChatMessage = Omit<ChunkChatEvent, 'event'> & StreamEventBase & {
  /**
   * LLM returned text chunk.
   */
  answer: string
  event: 'message'
}

export type StreamEventChatAgentMessage = Omit<ChunkChatEvent, 'event'> & StreamEventBase & {
  /**
   * LLM returned text chunk (Agent mode).
   */
  answer: string
  event: 'agent_message'
}

export type StreamEventChatTtsMessage = Omit<ChunkChatEvent, 'event'> & StreamEventBase & {
  /**
   * Base64 encoded audio chunk.
   */
  audio: string
  event: 'tts_message'
}

export type StreamEventChatTtsMessageEnd = Omit<ChunkChatEvent, 'event'> & StreamEventBase & {
  /**
   * Empty string for end event.
   */
  audio: string
  event: 'tts_message_end'
}

export type StreamEventChatAgentThought = Omit<ChunkChatEvent, 'event'> & StreamEventBase & {
  /**
   * Agent thought ID.
   */
  id: string
  /**
   * Position of this thought in the sequence for the message.
   */
  position: number
  /**
   * What LLM is thinking.
   */
  thought?: string
  /**
   * Response from tool calls.
   */
  observation?: string
  /**
   * List of tools called, split by ';'.
   */
  tool?: string
  /**
   * Input of tools in JSON format. Example: {"dalle3": {"prompt": "a cute cat"}}.
   */
  tool_input?: string
  /**
   * File IDs of files related to this thought (e.g., generated by a tool).
   */
  message_files?: Array<string>
  event: 'agent_thought'
}

export type StreamEventChatMessageFile = Omit<ChunkChatEvent, 'event'> & {
  /**
   * File unique ID.
   */
  id: string
  /**
   * File type, currently only 'image'.
   */
  type: 'image'
  /**
   * Who this file belongs to, always 'assistant' here.
   */
  belongs_to: 'assistant'
  /**
   * Remote URL of the file.
   */
  url: string
  /**
   * Conversation ID.
   */
  conversation_id: string
  event: 'message_file'
}

export type StreamEventChatMessageEnd = Omit<ChunkChatEvent, 'event'> & StreamEventBase & {
  metadata: {
    usage?: Usage
    retriever_resources?: Array<RetrieverResource>
  }
  event: 'message_end'
}

export type StreamEventChatMessageReplace = Omit<ChunkChatEvent, 'event'> & StreamEventBase & {
  /**
   * Replacement content.
   */
  answer: string
  event: 'message_replace'
}

export type StreamEventChatError = Omit<ChunkChatEvent, 'event'> & StreamEventBase & {
  /**
   * HTTP status code.
   */
  status: number
  /**
   * Error code.
   */
  code: string
  /**
   * Error message.
   */
  message: string
  event: 'error'
}

export type StreamEventChatPing = Omit<ChunkChatEvent, 'event'> & {
  event: 'ping'
  [key: string]: unknown | 'ping'
}
