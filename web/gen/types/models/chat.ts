// This file is auto-generated by @hey-api/openapi-ts

import type { InputFileObject } from './input'
import type { RetrieverResource } from './retriever'
import type { Usage } from './usage'
import type { UserInputFormItem } from './user'

export type ChatRequest = {
  /**
   * User Input/Question content.
   */
  query: string
  /**
   * Allows the entry of various variable values defined by the App. Contains key/value pairs. Default {}.
   */
  inputs?: {
    [key: string]: unknown
  }
  /**
   * Mode of response return. `streaming` (recommended) uses SSE. `blocking` returns after completion (may be interrupted for long processes; not supported in Agent Assistant mode). Cloudflare timeout is 100s.
   */
  response_mode?: 'streaming' | 'blocking'
  /**
   * User identifier, unique within the application. **Note**: The Service API does not share conversations created by the WebApp. Conversations created through the API are isolated from those created in the WebApp interface.
   */
  user: string
  /**
   * Conversation ID to continue a conversation. Pass the previous message's conversation_id.
   */
  conversation_id?: string
  /**
   * File list (images) for Vision-capable models.
   */
  files?: Array<InputFileObject>
  /**
   * Auto-generate conversation title. Default `true`. If `false`, use conversation rename API with `auto_generate: true` for async title generation.
   */
  auto_generate_name?: boolean
}

/**
 * Response object for blocking mode chat completion.
 */
export type ChatCompletionResponse = {
  /**
   * Event type, fixed as `message`.
   */
  event?: string
  /**
   * Task ID for request tracking and stop response API.
   */
  task_id?: string
  /**
   * Unique ID of this response/message event.
   */
  id?: string
  /**
   * Unique message ID.
   */
  message_id?: string
  /**
   * Conversation ID.
   */
  conversation_id?: string
  /**
   * App mode, fixed as `chat`.
   */
  mode?: string
  /**
   * Complete response content.
   */
  answer?: string
  metadata?: {
    usage?: Usage
    retriever_resources?: Array<RetrieverResource>
  }
  /**
   * Message creation timestamp (Unix epoch seconds).
   */
  created_at?: number
}

export type ChatAppParametersResponse = {
  opening_statement?: string
  suggested_questions?: Array<string>
  suggested_questions_after_answer?: {
    enabled?: boolean
  }
  speech_to_text?: {
    enabled?: boolean
  }
  text_to_speech?: {
    enabled?: boolean
    voice?: string
    language?: string
    autoPlay?: 'enabled' | 'disabled'
  }
  retriever_resource?: {
    enabled?: boolean
  }
  annotation_reply?: {
    enabled?: boolean
  }
  user_input_form?: Array<UserInputFormItem>
  file_upload?: {
    image?: {
      enabled?: boolean
      number_limits?: number
      detail?: string
      transfer_methods?: Array<'remote_url' | 'local_file'>
    }
  }
  system_parameters?: {
    file_size_limit?: number
    image_file_size_limit?: number
    audio_file_size_limit?: number
    video_file_size_limit?: number
  }
}
