import { CodeGroup } from '../code.tsx'
import { Row, Col, Properties, Property, Heading, SubProperty, Paragraph } from '../md.tsx'

# Workflow åº”ç”¨ API

Workflow åº”ç”¨æ— ä¼šè¯æ”¯æŒï¼Œé€‚åˆç”¨äºç¿»è¯‘/æ–‡ç« å†™ä½œ/æ€»ç»“ AI ç­‰ç­‰ã€‚

<div>
  ### Base URL
  <CodeGroup title="Code" targetCode={props.appDetail.api_base_url} />

  ### Authentication

  Service API ä½¿ç”¨ `API-Key` è¿›è¡Œé‰´æƒã€‚
  <i>**å¼ºçƒˆå»ºè®®å¼€å‘è€…æŠŠ `API-Key` æ”¾åœ¨åç«¯å­˜å‚¨ï¼Œè€Œéåˆ†äº«æˆ–è€…æ”¾åœ¨å®¢æˆ·ç«¯å­˜å‚¨ï¼Œä»¥å… `API-Key` æ³„éœ²ï¼Œå¯¼è‡´è´¢äº§æŸå¤±ã€‚**</i>
  æ‰€æœ‰ API è¯·æ±‚éƒ½åº”åœ¨ **`Authorization`** HTTP Header ä¸­åŒ…å«æ‚¨çš„ `API-Key`ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

  <CodeGroup title="Code" targetCode='Authorization: Bearer {API_KEY}' />
</div>

---

<Heading
  url='/workflows/run'
  method='POST'
  title='æ‰§è¡Œ Workflow'
  name='#Execute-Workflow'
/>
<Row>
  <Col>
    æ‰§è¡Œ workflowï¼Œæ²¡æœ‰å·²å‘å¸ƒçš„ workflowï¼Œä¸å¯æ‰§è¡Œã€‚

    ### Request Body
      - `inputs` (object) Required
        å…è®¸ä¼ å…¥ App å®šä¹‰çš„å„å˜é‡å€¼ã€‚
        inputs å‚æ•°åŒ…å«äº†å¤šç»„é”®å€¼å¯¹ï¼ˆKey/Value pairsï¼‰ï¼Œæ¯ç»„çš„é”®å¯¹åº”ä¸€ä¸ªç‰¹å®šå˜é‡ï¼Œæ¯ç»„çš„å€¼åˆ™æ˜¯è¯¥å˜é‡çš„å…·ä½“å€¼ã€‚å˜é‡å¯ä»¥æ˜¯æ–‡ä»¶åˆ—è¡¨ç±»å‹ã€‚
        æ–‡ä»¶åˆ—è¡¨ç±»å‹å˜é‡é€‚ç”¨äºä¼ å…¥æ–‡ä»¶ç»“åˆæ–‡æœ¬ç†è§£å¹¶å›ç­”é—®é¢˜ï¼Œä»…å½“æ¨¡å‹æ”¯æŒè¯¥ç±»å‹æ–‡ä»¶è§£æèƒ½åŠ›æ—¶å¯ç”¨ã€‚å¦‚æœè¯¥å˜é‡æ˜¯æ–‡ä»¶åˆ—è¡¨ç±»å‹ï¼Œè¯¥å˜é‡å¯¹åº”çš„å€¼åº”æ˜¯åˆ—è¡¨æ ¼å¼ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ åº”åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š
          - `type` (string) æ”¯æŒç±»å‹ï¼š
            - `document` å…·ä½“ç±»å‹åŒ…å«ï¼š'TXT', 'MD', 'MARKDOWN', 'PDF', 'HTML', 'XLSX', 'XLS', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'
            - `image` å…·ä½“ç±»å‹åŒ…å«ï¼š'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'
            - `audio` å…·ä½“ç±»å‹åŒ…å«ï¼š'MP3', 'M4A', 'WAV', 'WEBM', 'AMR'
            - `video` å…·ä½“ç±»å‹åŒ…å«ï¼š'MP4', 'MOV', 'MPEG', 'MPGA'
            - `custom` å…·ä½“ç±»å‹åŒ…å«ï¼šå…¶ä»–æ–‡ä»¶ç±»å‹
          - `transfer_method` (string) ä¼ é€’æ–¹å¼ï¼Œ`remote_url` å›¾ç‰‡åœ°å€ / `local_file` ä¸Šä¼ æ–‡ä»¶
          - `url` (string) å›¾ç‰‡åœ°å€ï¼ˆä»…å½“ä¼ é€’æ–¹å¼ä¸º `remote_url` æ—¶ï¼‰
          - `upload_file_id` (string)  ä¸Šä¼ æ–‡ä»¶ IDï¼ˆä»…å½“ä¼ é€’æ–¹å¼ä¸º `local_file` æ—¶ï¼‰
      - `response_mode` (string) Required
        è¿”å›å“åº”æ¨¡å¼ï¼Œæ”¯æŒï¼š
        - `streaming` æµå¼æ¨¡å¼ï¼ˆæ¨èï¼‰ã€‚åŸºäº SSEï¼ˆ**[Server-Sent Events](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events)**ï¼‰å®ç°ç±»ä¼¼æ‰“å­—æœºè¾“å‡ºæ–¹å¼çš„æµå¼è¿”å›ã€‚
        - `blocking` é˜»å¡æ¨¡å¼ï¼Œç­‰å¾…æ‰§è¡Œå®Œæ¯•åè¿”å›ç»“æœã€‚ï¼ˆè¯·æ±‚è‹¥æµç¨‹è¾ƒé•¿å¯èƒ½ä¼šè¢«ä¸­æ–­ï¼‰ã€‚
        <i>ç”±äº Cloudflare é™åˆ¶ï¼Œè¯·æ±‚ä¼šåœ¨ 100 ç§’è¶…æ—¶æ— è¿”å›åä¸­æ–­ã€‚</i>
      - `user` (string) Required
        ç”¨æˆ·æ ‡è¯†ï¼Œç”¨äºå®šä¹‰ç»ˆç«¯ç”¨æˆ·çš„èº«ä»½ï¼Œæ–¹ä¾¿æ£€ç´¢ã€ç»Ÿè®¡ã€‚
        ç”±å¼€å‘è€…å®šä¹‰è§„åˆ™ï¼Œéœ€ä¿è¯ç”¨æˆ·æ ‡è¯†åœ¨åº”ç”¨å†…å”¯ä¸€ã€‚API æ— æ³•è®¿é—® WebApp åˆ›å»ºçš„ä¼šè¯ã€‚
      - `files` (array[object]) å¯é€‰
      - `trace_id` (string) Optional
        é“¾è·¯è¿½è¸ªIDã€‚é€‚ç”¨äºä¸ä¸šåŠ¡ç³»ç»Ÿå·²æœ‰çš„traceç»„ä»¶æ‰“é€šï¼Œå®ç°ç«¯åˆ°ç«¯åˆ†å¸ƒå¼è¿½è¸ªç­‰åœºæ™¯ã€‚å¦‚æœæœªæŒ‡å®šï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ç”Ÿæˆ `trace_id`ã€‚æ”¯æŒä»¥ä¸‹ä¸‰ç§æ–¹å¼ä¼ é€’ï¼Œå…·ä½“ä¼˜å…ˆçº§ä¾æ¬¡ä¸ºï¼š
        1. Headerï¼šæ¨èé€šè¿‡ HTTP Header `X-Trace-Id` ä¼ é€’ï¼Œä¼˜å…ˆçº§æœ€é«˜ã€‚
        2. Query å‚æ•°ï¼šé€šè¿‡ URL æŸ¥è¯¢å‚æ•° `trace_id` ä¼ é€’ã€‚
        3. Request Bodyï¼šé€šè¿‡è¯·æ±‚ä½“å­—æ®µ `trace_id` ä¼ é€’ï¼ˆå³æœ¬å­—æ®µï¼‰ã€‚

    ### Response
    å½“ `response_mode` ä¸º `blocking` æ—¶ï¼Œè¿”å› CompletionResponse objectã€‚
    å½“ `response_mode` ä¸º `streaming`æ—¶ï¼Œè¿”å› ChunkCompletionResponse object æµå¼åºåˆ—ã€‚

    ### CompletionResponse
    è¿”å›å®Œæ•´çš„ App ç»“æœï¼Œ`Content-Type` ä¸º `application/json` ã€‚
    - `workflow_run_id` (string) workflow æ‰§è¡Œ ID
    - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
    - `data` (object) è¯¦ç»†å†…å®¹
      - `id` (string) workflow æ‰§è¡Œ ID
      - `workflow_id` (string) å…³è” Workflow ID
      - `status` (string) æ‰§è¡ŒçŠ¶æ€, `running` / `succeeded` / `failed` / `stopped`
      - `outputs` (json) Optional è¾“å‡ºå†…å®¹
      - `error` (string) Optional é”™è¯¯åŸå› 
      - `elapsed_time` (float) Optional è€—æ—¶(s)
      - `total_tokens` (int) Optional æ€»ä½¿ç”¨ tokens
      - `total_steps` (int) æ€»æ­¥æ•°ï¼ˆå†—ä½™ï¼‰ï¼Œé»˜è®¤ 0
      - `created_at` (timestamp) å¼€å§‹æ—¶é—´
      - `finished_at` (timestamp) ç»“æŸæ—¶é—´

    ### ChunkCompletionResponse
    è¿”å› App è¾“å‡ºçš„æµå¼å—ï¼Œ`Content-Type` ä¸º `text/event-stream`ã€‚
    æ¯ä¸ªæµå¼å—å‡ä¸º data: å¼€å¤´ï¼Œå—ä¹‹é—´ä»¥ `\n\n` å³ä¸¤ä¸ªæ¢è¡Œç¬¦åˆ†éš”ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
    <CodeGroup>
    ```streaming {{ title: 'Response' }}
    data: {"event": "text_chunk", "workflow_run_id": "b85e5fc5-751b-454d-b14e-dc5f240b0a31", "task_id": "bd029338-b068-4d34-a331-fc85478922c2", "data": {"text": "\u4e3a\u4e86", "from_variable_selector": ["1745912968134", "text"]}}\n\n
    ```
    </CodeGroup>
    æµå¼å—ä¸­æ ¹æ® `event` ä¸åŒï¼Œç»“æ„ä¹Ÿä¸åŒï¼ŒåŒ…å«ä»¥ä¸‹ç±»å‹ï¼š
    - `event: workflow_started` workflow å¼€å§‹æ‰§è¡Œ
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `workflow_run_id` (string) workflow æ‰§è¡Œ ID
      - `event` (string) å›ºå®šä¸º `workflow_started`
      - `data` (object) è¯¦ç»†å†…å®¹
        - `id` (string) workflow æ‰§è¡Œ ID
        - `workflow_id` (string) å…³è” Workflow ID
        - `created_at` (timestamp) å¼€å§‹æ—¶é—´
    - `event: node_started` node å¼€å§‹æ‰§è¡Œ
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `workflow_run_id` (string) workflow æ‰§è¡Œ ID
      - `event` (string) å›ºå®šä¸º `node_started`
      - `data` (object) è¯¦ç»†å†…å®¹
        - `id` (string) workflow æ‰§è¡Œ ID
        - `node_id` (string) èŠ‚ç‚¹ ID
        - `node_type` (string) èŠ‚ç‚¹ç±»å‹
        - `title` (string) èŠ‚ç‚¹åç§°
        - `index` (int) æ‰§è¡Œåºå·ï¼Œç”¨äºå±•ç¤º Tracing Node é¡ºåº
        - `predecessor_node_id` (string) å‰ç½®èŠ‚ç‚¹ IDï¼Œç”¨äºç”»å¸ƒå±•ç¤ºæ‰§è¡Œè·¯å¾„
        - `inputs` (object) èŠ‚ç‚¹ä¸­æ‰€æœ‰ä½¿ç”¨åˆ°çš„å‰ç½®èŠ‚ç‚¹å˜é‡å†…å®¹
        - `created_at` (timestamp) å¼€å§‹æ—¶é—´
    - `event: text_chunk` æ–‡æœ¬ç‰‡æ®µ
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `workflow_run_id` (string) workflow æ‰§è¡Œ ID
      - `event` (string) å›ºå®šä¸º `text_chunk`
      - `data` (object) è¯¦ç»†å†…å®¹
        - `text` (string) æ–‡æœ¬å†…å®¹
        - `from_variable_selector` (array) æ–‡æœ¬æ¥æºè·¯å¾„ï¼Œå¸®åŠ©å¼€å‘è€…äº†è§£æ–‡æœ¬æ˜¯ç”±å“ªä¸ªèŠ‚ç‚¹çš„å“ªä¸ªå˜é‡ç”Ÿæˆçš„
    - `event: node_finished` node æ‰§è¡Œç»“æŸï¼ŒæˆåŠŸå¤±è´¥åŒä¸€äº‹ä»¶ä¸­ä¸åŒçŠ¶æ€
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `workflow_run_id` (string) workflow æ‰§è¡Œ ID
      - `event` (string) å›ºå®šä¸º `node_finished`
      - `data` (object) è¯¦ç»†å†…å®¹
        - `id` (string) node æ‰§è¡Œ ID
        - `node_id` (string) èŠ‚ç‚¹ ID
        - `index` (int) æ‰§è¡Œåºå·ï¼Œç”¨äºå±•ç¤º Tracing Node é¡ºåº
        - `predecessor_node_id` (string) optional å‰ç½®èŠ‚ç‚¹ IDï¼Œç”¨äºç”»å¸ƒå±•ç¤ºæ‰§è¡Œè·¯å¾„
        - `inputs` (object) èŠ‚ç‚¹ä¸­æ‰€æœ‰ä½¿ç”¨åˆ°çš„å‰ç½®èŠ‚ç‚¹å˜é‡å†…å®¹
        - `process_data` (json) Optional èŠ‚ç‚¹è¿‡ç¨‹æ•°æ®
        - `outputs` (json) Optional è¾“å‡ºå†…å®¹
        - `status` (string) æ‰§è¡ŒçŠ¶æ€ `running` / `succeeded` / `failed` / `stopped`
        - `error` (string) Optional é”™è¯¯åŸå› 
        - `elapsed_time` (float) Optional è€—æ—¶(s)
        - `execution_metadata` (json) å…ƒæ•°æ®
          - `total_tokens` (int) optional æ€»ä½¿ç”¨ tokens
          - `total_price` (decimal) optional æ€»è´¹ç”¨
          - `currency` (string) optional è´§å¸ï¼Œå¦‚ `USD` / `RMB`
        - `created_at` (timestamp) å¼€å§‹æ—¶é—´
    - `event: workflow_finished` workflow æ‰§è¡Œç»“æŸï¼ŒæˆåŠŸå¤±è´¥åŒä¸€äº‹ä»¶ä¸­ä¸åŒçŠ¶æ€
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `workflow_run_id` (string) workflow æ‰§è¡Œ ID
      - `event` (string) å›ºå®šä¸º `workflow_finished`
      - `data` (object) è¯¦ç»†å†…å®¹
        - `id` (string) workflow æ‰§è¡Œ ID
        - `workflow_id` (string) å…³è” Workflow ID
        - `status` (string)  æ‰§è¡ŒçŠ¶æ€ `running` / `succeeded` / `failed` / `stopped`
        - `outputs` (json) Optional è¾“å‡ºå†…å®¹
        - `error` (string) Optional é”™è¯¯åŸå› 
        - `elapsed_time` (float) Optional è€—æ—¶(s)
        - `total_tokens` (int) Optional æ€»ä½¿ç”¨ tokens
        - `total_steps` (int) æ€»æ­¥æ•°ï¼ˆå†—ä½™ï¼‰ï¼Œé»˜è®¤ 0
        - `created_at` (timestamp) å¼€å§‹æ—¶é—´
        - `finished_at` (timestamp) ç»“æŸæ—¶é—´
    - `event: tts_message` TTS éŸ³é¢‘æµäº‹ä»¶ï¼Œå³ï¼šè¯­éŸ³åˆæˆè¾“å‡ºã€‚å†…å®¹æ˜¯Mp3æ ¼å¼çš„éŸ³é¢‘å—ï¼Œä½¿ç”¨ base64 ç¼–ç åçš„å­—ç¬¦ä¸²ï¼Œæ’­æ”¾çš„æ—¶å€™ç›´æ¥è§£ç å³å¯ã€‚(å¼€å¯è‡ªåŠ¨æ’­æ”¾æ‰æœ‰æ­¤æ¶ˆæ¯)
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `message_id` (string) æ¶ˆæ¯å”¯ä¸€ ID
      - `audio` (string) è¯­éŸ³åˆæˆä¹‹åçš„éŸ³é¢‘å—ä½¿ç”¨ Base64 ç¼–ç ä¹‹åçš„æ–‡æœ¬å†…å®¹ï¼Œæ’­æ”¾çš„æ—¶å€™ç›´æ¥ base64 è§£ç é€å…¥æ’­æ”¾å™¨å³å¯
      - `created_at` (int) åˆ›å»ºæ—¶é—´æˆ³ï¼Œå¦‚ï¼š1705395332
    - `event: tts_message_end` TTS éŸ³é¢‘æµç»“æŸäº‹ä»¶ï¼Œæ”¶åˆ°è¿™ä¸ªäº‹ä»¶è¡¨ç¤ºéŸ³é¢‘æµè¿”å›ç»“æŸã€‚
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `message_id` (string) æ¶ˆæ¯å”¯ä¸€ ID
      - `audio` (string) ç»“æŸäº‹ä»¶æ˜¯æ²¡æœ‰éŸ³é¢‘çš„ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ç©ºå­—ç¬¦ä¸²
      - `created_at` (int) åˆ›å»ºæ—¶é—´æˆ³ï¼Œå¦‚ï¼š1705395332
    - `event: ping` æ¯ 10s ä¸€æ¬¡çš„ ping äº‹ä»¶ï¼Œä¿æŒè¿æ¥å­˜æ´»ã€‚

    ### Errors
    - 400ï¼Œ`invalid_param`ï¼Œä¼ å…¥å‚æ•°å¼‚å¸¸
    - 400ï¼Œ`app_unavailable`ï¼ŒApp é…ç½®ä¸å¯ç”¨
    - 400ï¼Œ`provider_not_initialize`ï¼Œæ— å¯ç”¨æ¨¡å‹å‡­æ®é…ç½®
    - 400ï¼Œ`provider_quota_exceeded`ï¼Œæ¨¡å‹è°ƒç”¨é¢åº¦ä¸è¶³
    - 400ï¼Œ`model_currently_not_support`ï¼Œå½“å‰æ¨¡å‹ä¸å¯ç”¨
    - 400ï¼Œ`workflow_request_error`ï¼Œworkflow æ‰§è¡Œå¤±è´¥
    - 500ï¼ŒæœåŠ¡å†…éƒ¨å¼‚å¸¸

  </Col>
  <Col sticky>
    <CodeGroup
      title="Request"
      tag="POST"
      label="/workflows/run"
      targetCode={`curl -X POST '${props.appDetail.api_base_url}/workflows/run' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
    "inputs": ${JSON.stringify(props.inputs)},
    "response_mode": "streaming",
    "user": "abc-123"
}'`}
    />
    <CodeGroup title="Example: file array as an input variable">
      ```json {{ title: 'File variable example' }}
      {
        "inputs": {
          "{variable_name}":
          [
            {
            "transfer_method": "local_file",
            "upload_file_id": "{upload_file_id}",
            "type": "{document_type}"
            }
          ]
        }
      }
      ```
    </CodeGroup>
    ### Blocking Mode
    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
        "workflow_run_id": "djflajgkldjgd",
        "task_id": "9da23599-e713-473b-982c-4328d4f5c78a",
        "data": {
            "id": "fdlsjfjejkghjda",
            "workflow_id": "fldjaslkfjlsda",
            "status": "succeeded",
            "outputs": {
              "text": "Nice to meet you."
            },
            "error": null,
            "elapsed_time": 0.875,
            "total_tokens": 3562,
            "total_steps": 8,
            "created_at": 1705407629,
            "finished_at": 1727807631
        }
    }
    ```
    </CodeGroup>
    ### Streaming Mode
    <CodeGroup title="Response">
    ```streaming {{ title: 'Response' }}
      data: {"event": "workflow_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "created_at": 1679586595}}
      data: {"event": "node_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "created_at": 1679586595}}
      data: {"event": "node_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "execution_metadata": {"total_tokens": 63127864, "total_price": 2.378, "currency": "USD"},  "created_at": 1679586595}}
      data: {"event": "workflow_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "total_tokens": 63127864, "total_steps": "1", "created_at": 1679586595, "finished_at": 1679976595}}
      data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}
      data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}
    ```
    </CodeGroup>
    <CodeGroup title="File upload sample code">
      ```json {{ title: 'File upload sample code' }}
      import requests
      import json

      def upload_file(file_path, user):
          upload_url = "https://api.dify.ai/v1/files/upload"
          headers = {
              "Authorization": "Bearer app-xxxxxxxx",
          }

          try:
              print("ä¸Šä¼ æ–‡ä»¶ä¸­...")
              with open(file_path, 'rb') as file:
                  files = {
                      'file': (file_path, file, 'text/plain')  # ç¡®ä¿æ–‡ä»¶ä»¥é€‚å½“çš„MIMEç±»å‹ä¸Šä¼ 
                  }
                  data = {
                      "user": user,
                      "type": "TXT"  # è®¾ç½®æ–‡ä»¶ç±»å‹ä¸ºTXT
                  }

                  response = requests.post(upload_url, headers=headers, files=files, data=data)
                  if response.status_code == 201:  # 201 è¡¨ç¤ºåˆ›å»ºæˆåŠŸ
                      print("æ–‡ä»¶ä¸Šä¼ æˆåŠŸ")
                      return response.json().get("id")  # è·å–ä¸Šä¼ çš„æ–‡ä»¶ ID
                  else:
                      print(f"æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼ŒçŠ¶æ€ç : {response.status_code}")
                      return None
          except Exception as e:
              print(f"å‘ç”Ÿé”™è¯¯: {str(e)}")
              return None

      def run_workflow(file_id, user, response_mode="blocking"):
          workflow_url = "https://api.dify.ai/v1/workflows/run"
          headers = {
              "Authorization": "Bearer app-xxxxxxxxx",
              "Content-Type": "application/json"
          }

          data = {
              "inputs": {
                  "orig_mail": [{
                      "transfer_method": "local_file",
                      "upload_file_id": file_id,
                      "type": "document"
                  }]
              },
              "response_mode": response_mode,
              "user": user
          }

          try:
              print("è¿è¡Œå·¥ä½œæµ...")
              response = requests.post(workflow_url, headers=headers, json=data)
              if response.status_code == 200:
                  print("å·¥ä½œæµæ‰§è¡ŒæˆåŠŸ")
                  return response.json()
              else:
                  print(f"å·¥ä½œæµæ‰§è¡Œå¤±è´¥ï¼ŒçŠ¶æ€ç : {response.status_code}")
                  return {"status": "error", "message": f"Failed to execute workflow, status code: {response.status_code}"}
          except Exception as e:
              print(f"å‘ç”Ÿé”™è¯¯: {str(e)}")
              return {"status": "error", "message": str(e)}

      # ä½¿ç”¨ç¤ºä¾‹
      file_path = "{your_file_path}"
      user = "difyuser"

      # ä¸Šä¼ æ–‡ä»¶
      file_id = upload_file(file_path, user)
      if file_id:
          # æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼Œç»§ç»­è¿è¡Œå·¥ä½œæµ
          result = run_workflow(file_id, user)
          print(result)
      else:
          print("æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼Œæ— æ³•æ‰§è¡Œå·¥ä½œæµ")
      ```
    </CodeGroup>
  </Col>
</Row>

---

<Heading
  url='/workflows/:workflow_id/run'
  method='POST'
  title='æ‰§è¡ŒæŒ‡å®šç‰ˆæœ¬ Workflow'
  name='#Execute-Specific-Workflow'
/>
<Row>
  <Col>
    æ‰§è¡ŒæŒ‡å®šç‰ˆæœ¬çš„å·¥ä½œæµï¼Œé€šè¿‡è·¯å¾„å‚æ•°æŒ‡å®šå·¥ä½œæµIDã€‚

    ### Path
    - `workflow_id` (string) Required å·¥ä½œæµIDï¼Œç”¨äºæŒ‡å®šç‰¹å®šç‰ˆæœ¬çš„å·¥ä½œæµ

      è·å–æ–¹å¼ï¼šå¯ä»¥åœ¨ç‰ˆæœ¬å†å²ä¸­æŸ¥è¯¢ç‰¹å®šç‰ˆæœ¬çš„å·¥ä½œæµIDã€‚

    ### Request Body
      - `inputs` (object) Required
        å…è®¸ä¼ å…¥ App å®šä¹‰çš„å„å˜é‡å€¼ã€‚
        inputs å‚æ•°åŒ…å«äº†å¤šç»„é”®å€¼å¯¹ï¼ˆKey/Value pairsï¼‰ï¼Œæ¯ç»„çš„é”®å¯¹åº”ä¸€ä¸ªç‰¹å®šå˜é‡ï¼Œæ¯ç»„çš„å€¼åˆ™æ˜¯è¯¥å˜é‡çš„å…·ä½“å€¼ã€‚å˜é‡å¯ä»¥æ˜¯æ–‡ä»¶åˆ—è¡¨ç±»å‹ã€‚
        æ–‡ä»¶åˆ—è¡¨ç±»å‹å˜é‡é€‚ç”¨äºä¼ å…¥æ–‡ä»¶ç»“åˆæ–‡æœ¬ç†è§£å¹¶å›ç­”é—®é¢˜ï¼Œä»…å½“æ¨¡å‹æ”¯æŒè¯¥ç±»å‹æ–‡ä»¶è§£æèƒ½åŠ›æ—¶å¯ç”¨ã€‚å¦‚æœè¯¥å˜é‡æ˜¯æ–‡ä»¶åˆ—è¡¨ç±»å‹ï¼Œè¯¥å˜é‡å¯¹åº”çš„å€¼åº”æ˜¯åˆ—è¡¨æ ¼å¼ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ åº”åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š
          - `type` (string) æ”¯æŒç±»å‹ï¼š
            - `document` å…·ä½“ç±»å‹åŒ…å«ï¼š'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'
            - `image` å…·ä½“ç±»å‹åŒ…å«ï¼š'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'
            - `audio` å…·ä½“ç±»å‹åŒ…å«ï¼š'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'
            - `video` å…·ä½“ç±»å‹åŒ…å«ï¼š'MP4', 'MOV', 'MPEG', 'WEBM'
            - `custom` å…·ä½“ç±»å‹åŒ…å«ï¼šå…¶ä»–æ–‡ä»¶ç±»å‹
          - `transfer_method` (string)  ä¼ é€’æ–¹å¼:
            - `remote_url`: æ–‡ä»¶åœ°å€ã€‚
            - `local_file`: ä¸Šä¼ æ–‡ä»¶ã€‚
          - `url` æ–‡ä»¶åœ°å€ã€‚ï¼ˆä»…å½“ä¼ é€’æ–¹å¼ä¸º `remote_url` æ—¶ï¼‰ã€‚
          - `upload_file_id` ä¸Šä¼ æ–‡ä»¶ IDã€‚ï¼ˆä»…å½“ä¼ é€’æ–¹å¼ä¸º `local_file `æ—¶ï¼‰ã€‚
          
      - `response_mode` (string) Required
        è¿”å›å“åº”æ¨¡å¼ï¼Œæ”¯æŒï¼š
        - `streaming` æµå¼æ¨¡å¼ï¼ˆæ¨èï¼‰ã€‚åŸºäº SSEï¼ˆ**[Server-Sent Events](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events)**ï¼‰å®ç°ç±»ä¼¼æ‰“å­—æœºè¾“å‡ºæ–¹å¼çš„æµå¼è¿”å›ã€‚
        - `blocking` é˜»å¡æ¨¡å¼ï¼Œç­‰å¾…æ‰§è¡Œå®Œæ¯•åè¿”å›ç»“æœã€‚ï¼ˆè¯·æ±‚è‹¥æµç¨‹è¾ƒé•¿å¯èƒ½ä¼šè¢«ä¸­æ–­ï¼‰ã€‚
        <i>ç”±äº Cloudflare é™åˆ¶ï¼Œè¯·æ±‚ä¼šåœ¨ 100 ç§’è¶…æ—¶æ— è¿”å›åä¸­æ–­ã€‚</i>
      - `user` (string) Required
        ç”¨æˆ·æ ‡è¯†ï¼Œç”¨äºå®šä¹‰ç»ˆç«¯ç”¨æˆ·çš„èº«ä»½ï¼Œæ–¹ä¾¿æ£€ç´¢ã€ç»Ÿè®¡ã€‚
        ç”±å¼€å‘è€…å®šä¹‰è§„åˆ™ï¼Œéœ€ä¿è¯ç”¨æˆ·æ ‡è¯†åœ¨åº”ç”¨å†…å”¯ä¸€ã€‚API æ— æ³•è®¿é—® WebApp åˆ›å»ºçš„ä¼šè¯ã€‚
      - `files` (array[object]) å¯é€‰
      - `trace_id` (string) Optional
        é“¾è·¯è¿½è¸ªIDã€‚é€‚ç”¨äºä¸ä¸šåŠ¡ç³»ç»Ÿå·²æœ‰çš„traceç»„ä»¶æ‰“é€šï¼Œå®ç°ç«¯åˆ°ç«¯åˆ†å¸ƒå¼è¿½è¸ªç­‰åœºæ™¯ã€‚å¦‚æœæœªæŒ‡å®šï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ç”Ÿæˆ `trace_id`ã€‚æ”¯æŒä»¥ä¸‹ä¸‰ç§æ–¹å¼ä¼ é€’ï¼Œå…·ä½“ä¼˜å…ˆçº§ä¾æ¬¡ä¸ºï¼š
        1. Headerï¼šæ¨èé€šè¿‡ HTTP Header `X-Trace-Id` ä¼ é€’ï¼Œä¼˜å…ˆçº§æœ€é«˜ã€‚
        2. Query å‚æ•°ï¼šé€šè¿‡ URL æŸ¥è¯¢å‚æ•° `trace_id` ä¼ é€’ã€‚
        3. Request Bodyï¼šé€šè¿‡è¯·æ±‚ä½“å­—æ®µ `trace_id` ä¼ é€’ï¼ˆå³æœ¬å­—æ®µï¼‰ã€‚

    ### Response
    å½“ `response_mode` ä¸º `blocking` æ—¶ï¼Œè¿”å› CompletionResponse objectã€‚
    å½“ `response_mode` ä¸º `streaming`æ—¶ï¼Œè¿”å› ChunkCompletionResponse object æµå¼åºåˆ—ã€‚

    ### CompletionResponse
    è¿”å›å®Œæ•´çš„ App ç»“æœï¼Œ`Content-Type` ä¸º `application/json` ã€‚
    - `workflow_run_id` (string) workflow æ‰§è¡Œ ID
    - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
    - `data` (object) è¯¦ç»†å†…å®¹
      - `id` (string) workflow æ‰§è¡Œ ID
      - `workflow_id` (string) å…³è” Workflow ID
      - `status` (string) æ‰§è¡ŒçŠ¶æ€, `running` / `succeeded` / `failed` / `stopped`
      - `outputs` (json) Optional è¾“å‡ºå†…å®¹
      - `error` (string) Optional é”™è¯¯åŸå› 
      - `elapsed_time` (float) Optional è€—æ—¶(s)
      - `total_tokens` (int) Optional æ€»ä½¿ç”¨ tokens
      - `total_steps` (int) æ€»æ­¥æ•°ï¼ˆå†—ä½™ï¼‰ï¼Œé»˜è®¤ 0
      - `created_at` (timestamp) å¼€å§‹æ—¶é—´
      - `finished_at` (timestamp) ç»“æŸæ—¶é—´

    ### ChunkCompletionResponse
    è¿”å› App è¾“å‡ºçš„æµå¼å—ï¼Œ`Content-Type` ä¸º `text/event-stream`ã€‚
    æ¯ä¸ªæµå¼å—å‡ä¸º data: å¼€å¤´ï¼Œå—ä¹‹é—´ä»¥ `\n\n` å³ä¸¤ä¸ªæ¢è¡Œç¬¦åˆ†éš”ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
    <CodeGroup>
    ```streaming {{ title: 'Response' }}
    data: {"event": "text_chunk", "workflow_run_id": "b85e5fc5-751b-454d-b14e-dc5f240b0a31", "task_id": "bd029338-b068-4d34-a331-fc85478922c2", "data": {"text": "\u4e3a\u4e86", "from_variable_selector": ["1745912968134", "text"]}}\n\n
    ```
    </CodeGroup>
    æµå¼å—ä¸­æ ¹æ® `event` ä¸åŒï¼Œç»“æ„ä¹Ÿä¸åŒï¼ŒåŒ…å«ä»¥ä¸‹ç±»å‹ï¼š
    - `event: workflow_started` workflow å¼€å§‹æ‰§è¡Œ
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `workflow_run_id` (string) workflow æ‰§è¡Œ ID
      - `event` (string) å›ºå®šä¸º `workflow_started`
      - `data` (object) è¯¦ç»†å†…å®¹
        - `id` (string) workflow æ‰§è¡Œ ID
        - `workflow_id` (string) å…³è” Workflow ID
        - `created_at` (timestamp) å¼€å§‹æ—¶é—´
    - `event: node_started` node å¼€å§‹æ‰§è¡Œ
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `workflow_run_id` (string) workflow æ‰§è¡Œ ID
      - `event` (string) å›ºå®šä¸º `node_started`
      - `data` (object) è¯¦ç»†å†…å®¹
        - `id` (string) workflow æ‰§è¡Œ ID
        - `node_id` (string) èŠ‚ç‚¹ ID
        - `node_type` (string) èŠ‚ç‚¹ç±»å‹
        - `title` (string) èŠ‚ç‚¹åç§°
        - `index` (int) æ‰§è¡Œåºå·ï¼Œç”¨äºå±•ç¤º Tracing Node é¡ºåº
        - `predecessor_node_id` (string) å‰ç½®èŠ‚ç‚¹ IDï¼Œç”¨äºç”»å¸ƒå±•ç¤ºæ‰§è¡Œè·¯å¾„
        - `inputs` (object) èŠ‚ç‚¹ä¸­æ‰€æœ‰ä½¿ç”¨åˆ°çš„å‰ç½®èŠ‚ç‚¹å˜é‡å†…å®¹
        - `created_at` (timestamp) å¼€å§‹æ—¶é—´
    - `event: text_chunk` æ–‡æœ¬ç‰‡æ®µ
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `workflow_run_id` (string) workflow æ‰§è¡Œ ID
      - `event` (string) å›ºå®šä¸º `text_chunk`
      - `data` (object) è¯¦ç»†å†…å®¹
        - `text` (string) æ–‡æœ¬å†…å®¹
        - `from_variable_selector` (array) æ–‡æœ¬æ¥æºè·¯å¾„ï¼Œå¸®åŠ©å¼€å‘è€…äº†è§£æ–‡æœ¬æ˜¯ç”±å“ªä¸ªèŠ‚ç‚¹çš„å“ªä¸ªå˜é‡ç”Ÿæˆçš„
    - `event: node_finished` node æ‰§è¡Œç»“æŸï¼ŒæˆåŠŸå¤±è´¥åŒä¸€äº‹ä»¶ä¸­ä¸åŒçŠ¶æ€
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `workflow_run_id` (string) workflow æ‰§è¡Œ ID
      - `event` (string) å›ºå®šä¸º `node_finished`
      - `data` (object) è¯¦ç»†å†…å®¹
        - `id` (string) node æ‰§è¡Œ ID
        - `node_id` (string) èŠ‚ç‚¹ ID
        - `index` (int) æ‰§è¡Œåºå·ï¼Œç”¨äºå±•ç¤º Tracing Node é¡ºåº
        - `predecessor_node_id` (string) optional å‰ç½®èŠ‚ç‚¹ IDï¼Œç”¨äºç”»å¸ƒå±•ç¤ºæ‰§è¡Œè·¯å¾„
        - `inputs` (object) èŠ‚ç‚¹ä¸­æ‰€æœ‰ä½¿ç”¨åˆ°çš„å‰ç½®èŠ‚ç‚¹å˜é‡å†…å®¹
        - `process_data` (json) Optional èŠ‚ç‚¹è¿‡ç¨‹æ•°æ®
        - `outputs` (json) Optional è¾“å‡ºå†…å®¹
        - `status` (string) æ‰§è¡ŒçŠ¶æ€ `running` / `succeeded` / `failed` / `stopped`
        - `error` (string) Optional é”™è¯¯åŸå› 
        - `elapsed_time` (float) Optional è€—æ—¶(s)
        - `execution_metadata` (json) å…ƒæ•°æ®
          - `total_tokens` (int) optional æ€»ä½¿ç”¨ tokens
          - `total_price` (decimal) optional æ€»è´¹ç”¨
          - `currency` (string) optional è´§å¸ï¼Œå¦‚ `USD` / `RMB`
        - `created_at` (timestamp) å¼€å§‹æ—¶é—´
    - `event: workflow_finished` workflow æ‰§è¡Œç»“æŸï¼ŒæˆåŠŸå¤±è´¥åŒä¸€äº‹ä»¶ä¸­ä¸åŒçŠ¶æ€
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `workflow_run_id` (string) workflow æ‰§è¡Œ ID
      - `event` (string) å›ºå®šä¸º `workflow_finished`
      - `data` (object) è¯¦ç»†å†…å®¹
        - `id` (string) workflow æ‰§è¡Œ ID
        - `workflow_id` (string) å…³è” Workflow ID
        - `status` (string)  æ‰§è¡ŒçŠ¶æ€ `running` / `succeeded` / `failed` / `stopped`
        - `outputs` (json) Optional è¾“å‡ºå†…å®¹
        - `error` (string) Optional é”™è¯¯åŸå› 
        - `elapsed_time` (float) Optional è€—æ—¶(s)
        - `total_tokens` (int) Optional æ€»ä½¿ç”¨ tokens
        - `total_steps` (int) æ€»æ­¥æ•°ï¼ˆå†—ä½™ï¼‰ï¼Œé»˜è®¤ 0
        - `created_at` (timestamp) å¼€å§‹æ—¶é—´
        - `finished_at` (timestamp) ç»“æŸæ—¶é—´
    - `event: tts_message` TTS éŸ³é¢‘æµäº‹ä»¶ï¼Œå³ï¼šè¯­éŸ³åˆæˆè¾“å‡ºã€‚å†…å®¹æ˜¯Mp3æ ¼å¼çš„éŸ³é¢‘å—ï¼Œä½¿ç”¨ base64 ç¼–ç åçš„å­—ç¬¦ä¸²ï¼Œæ’­æ”¾çš„æ—¶å€™ç›´æ¥è§£ç å³å¯ã€‚(å¼€å¯è‡ªåŠ¨æ’­æ”¾æ‰æœ‰æ­¤æ¶ˆæ¯)
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `message_id` (string) æ¶ˆæ¯å”¯ä¸€ ID
      - `audio` (string) è¯­éŸ³åˆæˆä¹‹åçš„éŸ³é¢‘å—ä½¿ç”¨ Base64 ç¼–ç ä¹‹åçš„æ–‡æœ¬å†…å®¹ï¼Œæ’­æ”¾çš„æ—¶å€™ç›´æ¥ base64 è§£ç é€å…¥æ’­æ”¾å™¨å³å¯
      - `created_at` (int) åˆ›å»ºæ—¶é—´æˆ³ï¼Œå¦‚ï¼š1705395332
    - `event: tts_message_end` TTS éŸ³é¢‘æµç»“æŸäº‹ä»¶ï¼Œæ”¶åˆ°è¿™ä¸ªäº‹ä»¶è¡¨ç¤ºéŸ³é¢‘æµè¿”å›ç»“æŸã€‚
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `message_id` (string) æ¶ˆæ¯å”¯ä¸€ ID
      - `audio` (string) ç»“æŸäº‹ä»¶æ˜¯æ²¡æœ‰éŸ³é¢‘çš„ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ç©ºå­—ç¬¦ä¸²
      - `created_at` (int) åˆ›å»ºæ—¶é—´æˆ³ï¼Œå¦‚ï¼š1705395332
    - `event: ping` æ¯ 10s ä¸€æ¬¡çš„ ping äº‹ä»¶ï¼Œä¿æŒè¿æ¥å­˜æ´»ã€‚

    ### Errors
    - 400ï¼Œ`invalid_param`ï¼Œä¼ å…¥å‚æ•°å¼‚å¸¸
    - 400ï¼Œ`app_unavailable`ï¼ŒApp é…ç½®ä¸å¯ç”¨
    - 400ï¼Œ`provider_not_initialize`ï¼Œæ— å¯ç”¨æ¨¡å‹å‡­æ®é…ç½®
    - 400ï¼Œ`provider_quota_exceeded`ï¼Œæ¨¡å‹è°ƒç”¨é¢åº¦ä¸è¶³
    - 400ï¼Œ`model_currently_not_support`ï¼Œå½“å‰æ¨¡å‹ä¸å¯ç”¨
    - 400ï¼Œ`workflow_not_found`ï¼ŒæŒ‡å®šçš„å·¥ä½œæµç‰ˆæœ¬æœªæ‰¾åˆ°
    - 400ï¼Œ`draft_workflow_error`ï¼Œæ— æ³•ä½¿ç”¨è‰ç¨¿å·¥ä½œæµç‰ˆæœ¬
    - 400ï¼Œ`workflow_id_format_error`ï¼Œå·¥ä½œæµIDæ ¼å¼é”™è¯¯ï¼Œéœ€è¦UUIDæ ¼å¼
    - 400ï¼Œ`workflow_request_error`ï¼Œworkflow æ‰§è¡Œå¤±è´¥
    - 500ï¼ŒæœåŠ¡å†…éƒ¨å¼‚å¸¸

  </Col>
  <Col sticky>
    <CodeGroup
      title="Request"
      tag="POST"
      label="/workflows/:workflow_id/run"
      targetCode={`curl -X POST '${props.appDetail.api_base_url}/workflows/{workflow_id}/run' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
    "inputs": ${JSON.stringify(props.inputs)},
    "response_mode": "streaming",
    "user": "abc-123"
}'`}
    />
    <CodeGroup title="Example: file array as an input variable">
      ```json {{ title: 'File variable example' }}
      {
        "inputs": {
          "{variable_name}":
          [
            {
            "transfer_method": "local_file",
            "upload_file_id": "{upload_file_id}",
            "type": "{document_type}"
            }
          ]
        }
      }
      ```
    </CodeGroup>
    ### Blocking Mode
    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
        "workflow_run_id": "djflajgkldjgd",
        "task_id": "9da23599-e713-473b-982c-4328d4f5c78a",
        "data": {
            "id": "fdlsjfjejkghjda",
            "workflow_id": "fldjaslkfjlsda",
            "status": "succeeded",
            "outputs": {
              "text": "Nice to meet you."
            },
            "error": null,
            "elapsed_time": 0.875,
            "total_tokens": 3562,
            "total_steps": 8,
            "created_at": 1705407629,
            "finished_at": 1727807631
        }
    }
    ```
    </CodeGroup>
    ### Streaming Mode
    <CodeGroup title="Response">
    ```streaming {{ title: 'Response' }}
      data: {"event": "workflow_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "created_at": 1679586595}}
      data: {"event": "node_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "created_at": 1679586595}}
      data: {"event": "node_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "execution_metadata": {"total_tokens": 63127864, "total_price": 2.378, "currency": "USD"},  "created_at": 1679586595}}
      data: {"event": "workflow_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "total_tokens": 63127864, "total_steps": "1", "created_at": 1679586595, "finished_at": 1679976595}}
      data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}
      data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}
    ```
    </CodeGroup>
  </Col>
</Row>

---

<Heading
  url='/workflows/run/:workflow_run_id'
  method='GET'
  title='è·å– Workflow æ‰§è¡Œæƒ…å†µ'
  name='#get-workflow-run-detail'
/>
<Row>
  <Col>
    æ ¹æ® workflow æ‰§è¡Œ ID è·å– workflow ä»»åŠ¡å½“å‰æ‰§è¡Œç»“æœ
    ### Path
    - `workflow_run_id` (string) workflow æ‰§è¡Œ IDï¼Œå¯åœ¨æµå¼è¿”å› Chunk ä¸­è·å–
    ### Response
    - `id` (string) workflow æ‰§è¡Œ ID
    - `workflow_id` (string) å…³è”çš„ Workflow ID
    - `status` (string) æ‰§è¡ŒçŠ¶æ€ `running` / `succeeded` / `failed` / `stopped`
    - `inputs` (json) ä»»åŠ¡è¾“å…¥å†…å®¹
    - `outputs` (json) ä»»åŠ¡è¾“å‡ºå†…å®¹
    - `error` (string) é”™è¯¯åŸå› 
    - `total_steps` (int) ä»»åŠ¡æ‰§è¡Œæ€»æ­¥æ•°
    - `total_tokens` (int) ä»»åŠ¡æ‰§è¡Œæ€» tokens
    - `created_at` (timestamp) ä»»åŠ¡å¼€å§‹æ—¶é—´
    - `finished_at` (timestamp) ä»»åŠ¡ç»“æŸæ—¶é—´
    - `elapsed_time` (float) è€—æ—¶ (s)
  </Col>
  <Col sticky>
    ### Request Example
    <CodeGroup
      title="Request"
      tag="GET"
      label="/workflows/run/:workflow_run_id"
      targetCode={`curl -X GET '${props.appDetail.api_base_url}/workflows/run/:workflow_run_id' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json'`}
    />

    ### Response Example
    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
        "id": "b1ad3277-089e-42c6-9dff-6820d94fbc76",
        "workflow_id": "19eff89f-ec03-4f75-b0fc-897e7effea02",
        "status": "succeeded",
        "inputs": "{\"sys.files\": [], \"sys.user_id\": \"abc-123\"}",
        "outputs": null,
        "error": null,
        "total_steps": 3,
        "total_tokens": 0,
        "created_at": 1705407629,
        "finished_at": 1727807631,
        "elapsed_time": 30.098514399956912
    }
    ```
    </CodeGroup>
  </Col>
</Row>

---

<Heading
  url='/workflows/tasks/:task_id/stop'
  method='POST'
  title='åœæ­¢å“åº”'
  name='#stop-generatebacks'
/>
<Row>
  <Col>
    ä»…æ”¯æŒæµå¼æ¨¡å¼ã€‚
    ### Path
    - `task_id` (string) ä»»åŠ¡ IDï¼Œå¯åœ¨æµå¼è¿”å› Chunk ä¸­è·å–
    ### Request Body
    - `user` (string) Required
      ç”¨æˆ·æ ‡è¯†ï¼Œç”¨äºå®šä¹‰ç»ˆç«¯ç”¨æˆ·çš„èº«ä»½ï¼Œå¿…é¡»å’Œå‘é€æ¶ˆæ¯æ¥å£ä¼ å…¥ user ä¿æŒä¸€è‡´ã€‚API æ— æ³•è®¿é—® WebApp åˆ›å»ºçš„ä¼šè¯ã€‚
    ### Response
    - `result` (string) å›ºå®šè¿”å› "success"
  </Col>
  <Col sticky>
    ### Request Example
    <CodeGroup
      title="Request"
      tag="POST"
      label="/workflows/tasks/:task_id/stop"
      targetCode={`curl -X POST '${props.appDetail.api_base_url}/workflows/tasks/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{"user": "abc-123"}'`}
    />

    ### Response Example
    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "result": "success"
    }
    ```
    </CodeGroup>
  </Col>
</Row>

---

<Heading
  url='/files/upload'
  method='POST'
  title='ä¸Šä¼ æ–‡ä»¶'
  name='#files-upload'
/>
<Row>
  <Col>
    ä¸Šä¼ æ–‡ä»¶å¹¶åœ¨å‘é€æ¶ˆæ¯æ—¶ä½¿ç”¨ï¼Œå¯å®ç°å›¾æ–‡å¤šæ¨¡æ€ç†è§£ã€‚
    æ”¯æŒæ‚¨çš„å·¥ä½œæµç¨‹æ‰€æ”¯æŒçš„ä»»ä½•æ ¼å¼ã€‚
    <i>ä¸Šä¼ çš„æ–‡ä»¶ä»…ä¾›å½“å‰ç»ˆç«¯ç”¨æˆ·ä½¿ç”¨ã€‚</i>

    ### Request Body
    è¯¥æ¥å£éœ€ä½¿ç”¨  `multipart/form-data` è¿›è¡Œè¯·æ±‚ã€‚
    <Properties>
      <Property name='file' type='file' key='file'>
        è¦ä¸Šä¼ çš„æ–‡ä»¶ã€‚
      </Property>
      <Property name='user' type='string' key='user'>
          ç”¨æˆ·æ ‡è¯†ï¼Œç”¨äºå®šä¹‰ç»ˆç«¯ç”¨æˆ·çš„èº«ä»½ï¼Œå¿…é¡»å’Œå‘é€æ¶ˆæ¯æ¥å£ä¼ å…¥ user ä¿æŒä¸€è‡´ã€‚æœåŠ¡ API ä¸ä¼šå…±äº« WebApp åˆ›å»ºçš„å¯¹è¯ã€‚
      </Property>
    </Properties>

    ### Response
    æˆåŠŸä¸Šä¼ åï¼ŒæœåŠ¡å™¨ä¼šè¿”å›æ–‡ä»¶çš„ ID å’Œç›¸å…³ä¿¡æ¯ã€‚
    - `id` (uuid) ID
    - `name` (string) æ–‡ä»¶å
    - `size` (int) æ–‡ä»¶å¤§å°ï¼ˆbyteï¼‰
    - `extension` (string) æ–‡ä»¶åç¼€
    - `mime_type` (string) æ–‡ä»¶ mime-type
    - `created_by` (uuid) ä¸Šä¼ äºº ID
    - `created_at` (timestamp) ä¸Šä¼ æ—¶é—´

    ### Errors
    - 400ï¼Œ`no_file_uploaded`ï¼Œå¿…é¡»æä¾›æ–‡ä»¶
    - 400ï¼Œ`too_many_files`ï¼Œç›®å‰åªæ¥å—ä¸€ä¸ªæ–‡ä»¶
    - 400ï¼Œ`unsupported_preview`ï¼Œè¯¥æ–‡ä»¶ä¸æ”¯æŒé¢„è§ˆ
    - 400ï¼Œ`unsupported_estimate`ï¼Œè¯¥æ–‡ä»¶ä¸æ”¯æŒä¼°ç®—
    - 413ï¼Œ`file_too_large`ï¼Œæ–‡ä»¶å¤ªå¤§
    - 415ï¼Œ`unsupported_file_type`ï¼Œä¸æ”¯æŒçš„æ‰©å±•åï¼Œå½“å‰åªæ¥å—æ–‡æ¡£ç±»æ–‡ä»¶
    - 503ï¼Œ`s3_connection_failed`ï¼Œæ— æ³•è¿æ¥åˆ° S3 æœåŠ¡
    - 503ï¼Œ`s3_permission_denied`ï¼Œæ— æƒé™ä¸Šä¼ æ–‡ä»¶åˆ° S3
    - 503ï¼Œ`s3_file_too_large`ï¼Œæ–‡ä»¶è¶…å‡º S3 å¤§å°é™åˆ¶
  </Col>
  <Col sticky>

    <CodeGroup
      title="Request"
      tag="POST"
      label="/files/upload"
      targetCode={`curl -X POST '${props.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}
    />

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",
      "name": "example.png",
      "size": 1024,
      "extension": "png",
      "mime_type": "image/png",
      "created_by": 123,
      "created_at": 1577836800,
    }
    ```
    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/workflows/logs'
  method='GET'
  title='è·å– Workflow æ—¥å¿—'
  name='#Get-Workflow-Logs'
/>
<Row>
  <Col>
    å€’åºè¿”å› workflow æ—¥å¿—

    ### Query

    <Properties>
      <Property name='keyword' type='string' key='keyword'>
        å…³é”®å­—
      </Property>
      <Property name='status' type='string' key='status'>
        æ‰§è¡ŒçŠ¶æ€ succeeded/failed/stopped
      </Property>
      <Property name='page' type='int' key='page'>
        å½“å‰é¡µç , é»˜è®¤1.
      </Property>
      <Property name='limit' type='int' key='limit'>
        æ¯é¡µæ¡æ•°, é»˜è®¤20.
      </Property>
      <Property name='created_by_end_user_session_id' type='str' key='created_by_end_user_session_id'>
        ç”±å“ªä¸ªendUseråˆ›å»ºï¼Œä¾‹å¦‚ï¼Œ`abc-123`.
      </Property>
      <Property name='created_by_account' type='str' key='created_by_account'>
        ç”±å“ªä¸ªé‚®ç®±è´¦æˆ·åˆ›å»ºï¼Œä¾‹å¦‚ï¼Œlizb@test.com.
      </Property>
    </Properties>

    ### Response
  - `page` (int) å½“å‰é¡µç 
  - `limit` (int) æ¯é¡µæ¡æ•°
  - `total` (int) æ€»æ¡æ•°
  - `has_more` (bool) æ˜¯å¦è¿˜æœ‰æ›´å¤šæ•°æ®
  - `data` (array[object]) å½“å‰é¡µç çš„æ•°æ®
    - `id` (string) æ ‡è¯†
    - `workflow_run` (object) Workflow æ‰§è¡Œæ—¥å¿—
      - `id` (string) æ ‡è¯†
      - `version` (string) ç‰ˆæœ¬
      - `status` (string) æ‰§è¡ŒçŠ¶æ€ï¼Œ`running` / `succeeded` / `failed` / `stopped`
      - `error` (string) (å¯é€‰) é”™è¯¯
      - `elapsed_time` (float) è€—æ—¶ï¼Œå•ä½ç§’
      - `total_tokens` (int) æ¶ˆè€—çš„ token æ•°é‡
      - `total_steps` (int) æ‰§è¡Œæ­¥éª¤é•¿åº¦
      - `created_at` (timestamp) å¼€å§‹æ—¶é—´
      - `finished_at` (timestamp) ç»“æŸæ—¶é—´
    - `created_from` (string) æ¥æº
    - `created_by_role` (string) è§’è‰²
    - `created_by_account` (string) (å¯é€‰) å¸å·
    - `created_by_end_user` (object) ç”¨æˆ·
      - `id` (string) æ ‡è¯†
      - `type` (string) ç±»å‹
      - `is_anonymous` (bool) æ˜¯å¦åŒ¿å
      - `session_id` (string) ä¼šè¯æ ‡è¯†
    - `created_at` (timestamp) åˆ›å»ºæ—¶é—´
  </Col>
  <Col sticky>

    <CodeGroup
      title="Request"
      tag="GET"
      label="/workflows/logs"
      targetCode={`curl -X GET '${props.appDetail.api_base_url}/workflows/logs'\\
--header 'Authorization: Bearer {api_key}'`}
    />
    ### Response Example
    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
        "page": 1,
        "limit": 1,
        "total": 7,
        "has_more": true,
        "data": [
            {
                "id": "e41b93f1-7ca2-40fd-b3a8-999aeb499cc0",
                "workflow_run": {
                    "id": "c0640fc8-03ef-4481-a96c-8a13b732a36e",
                    "version": "2024-08-01 12:17:09.771832",
                    "status": "succeeded",
                    "error": null,
                    "elapsed_time": 1.3588523610014818,
                    "total_tokens": 0,
                    "total_steps": 3,
                    "created_at": 1726139643,
                    "finished_at": 1726139644
                },
                "created_from": "service-api",
                "created_by_role": "end_user",
                "created_by_account": null,
                "created_by_end_user": {
                    "id": "7f7d9117-dd9d-441d-8970-87e5e7e687a3",
                    "type": "service_api",
                    "is_anonymous": false,
                    "session_id": "abc-123"
                },
                "created_at": 1726139644
            }
        ]
    }
    ```
    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/info'
  method='GET'
  title='è·å–åº”ç”¨åŸºæœ¬ä¿¡æ¯'
  name='#info'
/>
<Row>
  <Col>
  ç”¨äºè·å–åº”ç”¨çš„åŸºæœ¬ä¿¡æ¯
  ### Response
  - `name` (string) åº”ç”¨åç§°
  - `description` (string) åº”ç”¨æè¿°
  - `tags` (array[string]) åº”ç”¨æ ‡ç­¾
  - `mode` (string) åº”ç”¨æ¨¡å¼
  - 'author_name' (string) ä½œè€…åç§°
  </Col>
  <Col>
    <CodeGroup
      title="Request"
      tag="GET"
      label="/info"
      targetCode={`curl -X GET '${props.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}
    />
    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "name": "My App",
      "description": "This is my app.",
      "tags": [
        "tag1",
        "tag2"
      ],
      "mode": "workflow",
      "author_name": "Dify"
    }
    ```
    </CodeGroup>
  </Col>
</Row>

---

<Heading
  url='/parameters'
  method='GET'
  title='è·å–åº”ç”¨å‚æ•°'
  name='#parameters'
/>
<Row>
  <Col>
    ç”¨äºè¿›å…¥é¡µé¢ä¸€å¼€å§‹ï¼Œè·å–åŠŸèƒ½å¼€å…³ã€è¾“å…¥å‚æ•°åç§°ã€ç±»å‹åŠé»˜è®¤å€¼ç­‰ä½¿ç”¨ã€‚

    ### Response
    - `user_input_form` (array[object]) ç”¨æˆ·è¾“å…¥è¡¨å•é…ç½®
      - `text-input` (object) æ–‡æœ¬è¾“å…¥æ§ä»¶
        - `label` (string) æ§ä»¶å±•ç¤ºæ ‡ç­¾å
        - `variable` (string) æ§ä»¶ ID
        - `required` (bool) æ˜¯å¦å¿…å¡«
        - `default` (string) é»˜è®¤å€¼
      - `paragraph` (object) æ®µè½æ–‡æœ¬è¾“å…¥æ§ä»¶
        - `label` (string) æ§ä»¶å±•ç¤ºæ ‡ç­¾å
        - `variable` (string) æ§ä»¶ ID
        - `required` (bool) æ˜¯å¦å¿…å¡«
        - `default` (string) é»˜è®¤å€¼
      - `select` (object) ä¸‹æ‹‰æ§ä»¶
        - `label` (string) æ§ä»¶å±•ç¤ºæ ‡ç­¾å
        - `variable` (string) æ§ä»¶ ID
        - `required` (bool) æ˜¯å¦å¿…å¡«
        - `default` (string) é»˜è®¤å€¼
        - `options` (array[string]) é€‰é¡¹å€¼
    - `file_upload` (object) æ–‡ä»¶ä¸Šä¼ é…ç½®
      - `document` (object) æ–‡æ¡£è®¾ç½®
        å½“å‰ä»…æ”¯æŒæ–‡æ¡£ç±»å‹ï¼š`txt`, `md`, `markdown`, `pdf`, `html`, `xlsx`, `xls`, `docx`, `csv`, `eml`, `msg`, `pptx`, `ppt`, `xml`, `epub`ã€‚
        - `enabled` (bool) æ˜¯å¦å¯ç”¨
        - `number_limits` (int) æ–‡æ¡£æ•°é‡é™åˆ¶ï¼Œé»˜è®¤ä¸º 3
        - `transfer_methods` (array[string]) ä¼ è¾“æ–¹å¼åˆ—è¡¨ï¼š`remote_url`, `local_file`ï¼Œå¿…é¡»é€‰æ‹©ä¸€ä¸ªã€‚
      - `image` (object) å›¾ç‰‡è®¾ç½®
        å½“å‰ä»…æ”¯æŒå›¾ç‰‡ç±»å‹ï¼š`png`, `jpg`, `jpeg`, `webp`, `gif`ã€‚
        - `enabled` (bool) æ˜¯å¦å¯ç”¨
        - `number_limits` (int) å›¾ç‰‡æ•°é‡é™åˆ¶ï¼Œé»˜è®¤ä¸º 3
        - `transfer_methods` (array[string]) ä¼ è¾“æ–¹å¼åˆ—è¡¨ï¼š`remote_url`, `local_file`ï¼Œå¿…é¡»é€‰æ‹©ä¸€ä¸ªã€‚
      - `audio` (object) éŸ³é¢‘è®¾ç½®
        å½“å‰ä»…æ”¯æŒéŸ³é¢‘ç±»å‹ï¼š`mp3`, `m4a`, `wav`, `webm`, `amr`ã€‚
        - `enabled` (bool) æ˜¯å¦å¯ç”¨
        - `number_limits` (int) éŸ³é¢‘æ•°é‡é™åˆ¶ï¼Œé»˜è®¤ä¸º 3
        - `transfer_methods` (array[string]) ä¼ è¾“æ–¹å¼åˆ—è¡¨ï¼š`remote_url`, `local_file`ï¼Œå¿…é¡»é€‰æ‹©ä¸€ä¸ªã€‚
      - `video` (object) è§†é¢‘è®¾ç½®
        å½“å‰ä»…æ”¯æŒè§†é¢‘ç±»å‹ï¼š`mp4`, `mov`, `mpeg`, `mpga`ã€‚
        - `enabled` (bool) æ˜¯å¦å¯ç”¨
        - `number_limits` (int) è§†é¢‘æ•°é‡é™åˆ¶ï¼Œé»˜è®¤ä¸º 3
        - `transfer_methods` (array[string]) ä¼ è¾“æ–¹å¼åˆ—è¡¨ï¼š`remote_url`, `local_file`ï¼Œå¿…é¡»é€‰æ‹©ä¸€ä¸ªã€‚
      - `custom` (object) è‡ªå®šä¹‰è®¾ç½®
        - `enabled` (bool) æ˜¯å¦å¯ç”¨
        - `number_limits` (int) è‡ªå®šä¹‰æ•°é‡é™åˆ¶ï¼Œé»˜è®¤ä¸º 3
        - `transfer_methods` (array[string]) ä¼ è¾“æ–¹å¼åˆ—è¡¨ï¼š`remote_url`, `local_file`ï¼Œå¿…é¡»é€‰æ‹©ä¸€ä¸ªã€‚
    - `system_parameters` (object) ç³»ç»Ÿå‚æ•°
      - `file_size_limit` (int) æ–‡æ¡£ä¸Šä¼ å¤§å°é™åˆ¶ (MB)
      - `image_file_size_limit` (int) å›¾ç‰‡æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶ï¼ˆMBï¼‰
      - `audio_file_size_limit` (int) éŸ³é¢‘æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶ (MB)
      - `video_file_size_limit` (int) è§†é¢‘æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶ (MB)

  </Col>
  <Col sticky>

    <CodeGroup
      title="Request"
      tag="GET"
      label="/parameters"
      targetCode={` curl -X GET '${props.appDetail.api_base_url}/parameters'`}
    />

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "user_input_form": [
          {
              "paragraph": {
                  "label": "Query",
                  "variable": "query",
                  "required": true,
                  "default": ""
              }
          }
      ],
      "file_upload": {
          "image": {
              "enabled": false,
              "number_limits": 3,
              "detail": "high",
              "transfer_methods": [
                  "remote_url",
                  "local_file"
              ]
          }
      },
      "system_parameters": {
          "file_size_limit": 15,
          "image_file_size_limit": 10,
          "audio_file_size_limit": 50,
          "video_file_size_limit": 100
      }
    }
    ```
    </CodeGroup>
  </Col>
</Row>

---

<Heading
  url='/site'
  method='GET'
  title='è·å–åº”ç”¨ WebApp è®¾ç½®'
  name='#site'
/>
<Row>
  <Col>
  ç”¨äºè·å–åº”ç”¨çš„ WebApp è®¾ç½®
  ### Response
  - `title` (string) WebApp åç§°
  - `icon_type` (string) å›¾æ ‡ç±»å‹ï¼Œ`emoji`-è¡¨æƒ…ï¼Œ`image`-å›¾ç‰‡
  - `icon` (string) å›¾æ ‡ï¼Œå¦‚æœæ˜¯ `emoji` ç±»å‹ï¼Œåˆ™æ˜¯ emoji è¡¨æƒ…ç¬¦å·ï¼Œå¦‚æœæ˜¯ `image` ç±»å‹ï¼Œåˆ™æ˜¯å›¾ç‰‡ URL
  - `icon_background` (string) hex æ ¼å¼çš„èƒŒæ™¯è‰²
  - `icon_url` (string) å›¾æ ‡ URL
  - `description` (string) æè¿°
  - `copyright` (string) ç‰ˆæƒä¿¡æ¯
  - `privacy_policy` (string) éšç§æ”¿ç­–é“¾æ¥
  - `custom_disclaimer` (string) è‡ªå®šä¹‰å…è´£å£°æ˜
  - `default_language` (string) é»˜è®¤è¯­è¨€
  - `show_workflow_steps` (bool) æ˜¯å¦æ˜¾ç¤ºå·¥ä½œæµè¯¦æƒ…
  </Col>
  <Col>
    <CodeGroup
      title="Request"
      tag="GET"
      label="/site"
      targetCode={`curl -X GET '${props.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}
    />

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "title": "My App",
      "icon_type": "emoji",
      "icon": "ğŸ˜„",
      "icon_background": "#FFEAD5",
      "icon_url": null,
      "description": "This is my app.",
      "copyright": "all rights reserved",
      "privacy_policy": "",
      "custom_disclaimer": "All generated by AI",
      "default_language": "en-US",
      "show_workflow_steps": false,
    }
    ```
    </CodeGroup>
  </Col>
</Row>
___
