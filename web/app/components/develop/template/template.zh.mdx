import { CodeGroup } from '../code.tsx'
import { Row, Col, Properties, Property, Heading, SubProperty } from '../md.tsx'

# æ–‡æœ¬ç”Ÿæˆå‹åº”ç”¨ API

æ–‡æœ¬ç”Ÿæˆåº”ç”¨æ— ä¼šè¯æ”¯æŒï¼Œé€‚åˆç”¨äºç¿»è¯‘/æ–‡ç« å†™ä½œ/æ€»ç»“ AI ç­‰ç­‰ã€‚

<div>
  ### åŸºç¡€ URL
  <CodeGroup title="Code" targetCode={props.appDetail.api_base_url} />

  ### é‰´æƒ


  Service API ä½¿ç”¨ `API-Key` è¿›è¡Œé‰´æƒã€‚
  <i>**å¼ºçƒˆå»ºè®®å¼€å‘è€…æŠŠ `API-Key` æ”¾åœ¨åç«¯å­˜å‚¨ï¼Œè€Œéåˆ†äº«æˆ–è€…æ”¾åœ¨å®¢æˆ·ç«¯å­˜å‚¨ï¼Œä»¥å… `API-Key` æ³„éœ²ï¼Œå¯¼è‡´è´¢äº§æŸå¤±ã€‚**</i>
  æ‰€æœ‰ API è¯·æ±‚éƒ½åº”åœ¨ **`Authorization`** HTTP Header ä¸­åŒ…å«æ‚¨çš„ `API-Key`ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

  <CodeGroup title="Code" targetCode='Authorization: Bearer {API_KEY}' />
</div>

---

<Heading
  url='/completion-messages'
  method='POST'
  title='å‘é€æ¶ˆæ¯'
  name='#Create-Completion-Message'
/>
<Row>
  <Col>
    å‘é€è¯·æ±‚ç»™æ–‡æœ¬ç”Ÿæˆå‹åº”ç”¨ã€‚

    ### Request Body

    <Properties>
      <Property name='inputs' type='object' key='inputs'>
        (é€‰å¡«)å…è®¸ä¼ å…¥ App å®šä¹‰çš„å„å˜é‡å€¼ã€‚
  inputs å‚æ•°åŒ…å«äº†å¤šç»„é”®å€¼å¯¹ï¼ˆKey/Value pairsï¼‰ï¼Œæ¯ç»„çš„é”®å¯¹åº”ä¸€ä¸ªç‰¹å®šå˜é‡ï¼Œæ¯ç»„çš„å€¼åˆ™æ˜¯è¯¥å˜é‡çš„å…·ä½“å€¼ã€‚
  æ–‡æœ¬ç”Ÿæˆå‹åº”ç”¨è¦æ±‚è‡³å°‘ä¼ å…¥ä¸€ç»„é”®å€¼å¯¹ã€‚
      - `query` (string) å¿…å¡«
        ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬å†…å®¹ã€‚
      </Property>
      <Property name='response_mode' type='string' key='response_mode'>
        - `streaming` æµå¼æ¨¡å¼ï¼ˆæ¨èï¼‰ã€‚åŸºäº SSEï¼ˆ**[Server-Sent Events](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events)**ï¼‰å®ç°ç±»ä¼¼æ‰“å­—æœºè¾“å‡ºæ–¹å¼çš„æµå¼è¿”å›ã€‚
        - `blocking` é˜»å¡æ¨¡å¼ï¼Œç­‰å¾…æ‰§è¡Œå®Œæ¯•åè¿”å›ç»“æœã€‚ï¼ˆè¯·æ±‚è‹¥æµç¨‹è¾ƒé•¿å¯èƒ½ä¼šè¢«ä¸­æ–­ï¼‰ã€‚
        <i>ç”±äº Cloudflare é™åˆ¶ï¼Œè¯·æ±‚ä¼šåœ¨ 100 ç§’è¶…æ—¶æ— è¿”å›åä¸­æ–­ã€‚</i>
      </Property>
      <Property name='user' type='string' key='user'>
        ç”¨æˆ·æ ‡è¯†ï¼Œç”¨äºå®šä¹‰ç»ˆç«¯ç”¨æˆ·çš„èº«ä»½ï¼Œæ–¹ä¾¿æ£€ç´¢ã€ç»Ÿè®¡ã€‚
        ç”±å¼€å‘è€…å®šä¹‰è§„åˆ™ï¼Œéœ€ä¿è¯ç”¨æˆ·æ ‡è¯†åœ¨åº”ç”¨å†…å”¯ä¸€ã€‚
      </Property>
      <Property name='files' type='array[object]' key='files'>
          æ–‡ä»¶åˆ—è¡¨ï¼Œé€‚ç”¨äºä¼ å…¥æ–‡ä»¶ç»“åˆæ–‡æœ¬ç†è§£å¹¶å›ç­”é—®é¢˜ï¼Œä»…å½“æ¨¡å‹æ”¯æŒ Vision/Video èƒ½åŠ›æ—¶å¯ç”¨ã€‚
          - `type` (string) æ”¯æŒç±»å‹ï¼š
            - `document` å…·ä½“ç±»å‹åŒ…å«ï¼š'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'
            - `image` å…·ä½“ç±»å‹åŒ…å«ï¼š'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'
            - `audio` å…·ä½“ç±»å‹åŒ…å«ï¼š'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'
            - `video` å…·ä½“ç±»å‹åŒ…å«ï¼š'MP4', 'MOV', 'MPEG', 'WEBM'
            - `custom` å…·ä½“ç±»å‹åŒ…å«ï¼šå…¶ä»–æ–‡ä»¶ç±»å‹
          - `transfer_method` (string)  ä¼ é€’æ–¹å¼:
            - `remote_url`: æ–‡ä»¶åœ°å€ã€‚
            - `local_file`: ä¸Šä¼ æ–‡ä»¶ã€‚
          - `url` æ–‡ä»¶åœ°å€ã€‚ï¼ˆä»…å½“ä¼ é€’æ–¹å¼ä¸º `remote_url` æ—¶ï¼‰ã€‚
          - `upload_file_id` ä¸Šä¼ æ–‡ä»¶ IDã€‚ï¼ˆä»…å½“ä¼ é€’æ–¹å¼ä¸º `local_file `æ—¶ï¼‰ã€‚
      </Property>
    </Properties>

    ### Response
    <Properties>
    å½“ `response_mode` ä¸º `blocking` æ—¶ï¼Œè¿”å› ChatCompletionResponse objectã€‚
    å½“ `response_mode` ä¸º `streaming`æ—¶ï¼Œè¿”å› ChunkChatCompletionResponse object æµå¼åºåˆ—ã€‚

    ### ChatCompletionResponse
    è¿”å›å®Œæ•´çš„ App ç»“æœï¼Œ`Content-Type` ä¸º `application/json`ã€‚
    - `message_id` (string) æ¶ˆæ¯å”¯ä¸€ ID
    - `mode` (string) App æ¨¡å¼ï¼Œå›ºå®šä¸º chat
    - `answer` (string) å®Œæ•´å›å¤å†…å®¹
    - `metadata` (object) å…ƒæ•°æ®
      - `usage` (Usage) æ¨¡å‹ç”¨é‡ä¿¡æ¯
      - `retriever_resources` (array[RetrieverResource]) å¼•ç”¨å’Œå½’å±åˆ†æ®µåˆ—è¡¨
    - `created_at` (int) æ¶ˆæ¯åˆ›å»ºæ—¶é—´æˆ³ï¼Œå¦‚ï¼š1705395332

    ### ChunkChatCompletionResponse
    è¿”å› App è¾“å‡ºçš„æµå¼å—ï¼Œ`Content-Type` ä¸º `text/event-stream`ã€‚
    æ¯ä¸ªæµå¼å—å‡ä¸º data: å¼€å¤´ï¼Œå—ä¹‹é—´ä»¥ `\n\n` å³ä¸¤ä¸ªæ¢è¡Œç¬¦åˆ†éš”ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
    <CodeGroup>
    ```streaming {{ title: 'Response' }}
    data: {"event": "message", "task_id": "900bbd43-dc0b-4383-a372-aa6e6c414227", "id": "663c5084-a254-4040-8ad3-51f2a3c1a77c", "answer": "Hi", "created_at": 1705398420}\n\n
    ```
    </CodeGroup>
    æµå¼å—ä¸­æ ¹æ® `event` ä¸åŒï¼Œç»“æ„ä¹Ÿä¸åŒï¼š
    - `event: message` LLM è¿”å›æ–‡æœ¬å—äº‹ä»¶ï¼Œå³ï¼šå®Œæ•´çš„æ–‡æœ¬ä»¥åˆ†å—çš„æ–¹å¼è¾“å‡ºã€‚
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `message_id` (string) æ¶ˆæ¯å”¯ä¸€ ID
      - `answer` (string) LLM è¿”å›æ–‡æœ¬å—å†…å®¹
      - `created_at` (int) åˆ›å»ºæ—¶é—´æˆ³ï¼Œå¦‚ï¼š1705395332
    - `event: message_end` æ¶ˆæ¯ç»“æŸäº‹ä»¶ï¼Œæ”¶åˆ°æ­¤äº‹ä»¶åˆ™ä»£è¡¨æ–‡æœ¬æµå¼è¿”å›ç»“æŸã€‚
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `message_id` (string) æ¶ˆæ¯å”¯ä¸€ ID
      - `metadata` (object) å…ƒæ•°æ®
        - `usage` (Usage) æ¨¡å‹ç”¨é‡ä¿¡æ¯
        - `retriever_resources` (array[RetrieverResource]) å¼•ç”¨å’Œå½’å±åˆ†æ®µåˆ—è¡¨
    - `event: tts_message` TTS éŸ³é¢‘æµäº‹ä»¶ï¼Œå³ï¼šè¯­éŸ³åˆæˆè¾“å‡ºã€‚å†…å®¹æ˜¯Mp3æ ¼å¼çš„éŸ³é¢‘å—ï¼Œä½¿ç”¨ base64 ç¼–ç åçš„å­—ç¬¦ä¸²ï¼Œæ’­æ”¾çš„æ—¶å€™ç›´æ¥è§£ç å³å¯ã€‚(å¼€å¯è‡ªåŠ¨æ’­æ”¾æ‰æœ‰æ­¤æ¶ˆæ¯)
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `message_id` (string) æ¶ˆæ¯å”¯ä¸€ ID
      - `audio` (string) è¯­éŸ³åˆæˆä¹‹åçš„éŸ³é¢‘å—ä½¿ç”¨ Base64 ç¼–ç ä¹‹åçš„æ–‡æœ¬å†…å®¹ï¼Œæ’­æ”¾çš„æ—¶å€™ç›´æ¥ base64 è§£ç é€å…¥æ’­æ”¾å™¨å³å¯
      - `created_at` (int) åˆ›å»ºæ—¶é—´æˆ³ï¼Œå¦‚ï¼š1705395332
    - `event: tts_message_end` TTS éŸ³é¢‘æµç»“æŸäº‹ä»¶ï¼Œæ”¶åˆ°è¿™ä¸ªäº‹ä»¶è¡¨ç¤ºéŸ³é¢‘æµè¿”å›ç»“æŸã€‚
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `message_id` (string) æ¶ˆæ¯å”¯ä¸€ ID
      - `audio` (string) ç»“æŸäº‹ä»¶æ˜¯æ²¡æœ‰éŸ³é¢‘çš„ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ç©ºå­—ç¬¦ä¸²
      - `created_at` (int) åˆ›å»ºæ—¶é—´æˆ³ï¼Œå¦‚ï¼š1705395332
    - `event: message_replace` æ¶ˆæ¯å†…å®¹æ›¿æ¢äº‹ä»¶ã€‚
      å¼€å¯å†…å®¹å®¡æŸ¥å’Œå®¡æŸ¥è¾“å‡ºå†…å®¹æ—¶ï¼Œè‹¥å‘½ä¸­äº†å®¡æŸ¥æ¡ä»¶ï¼Œåˆ™ä¼šé€šè¿‡æ­¤äº‹ä»¶æ›¿æ¢æ¶ˆæ¯å†…å®¹ä¸ºé¢„è®¾å›å¤ã€‚
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `message_id` (string) æ¶ˆæ¯å”¯ä¸€ ID
      - `answer` (string) æ›¿æ¢å†…å®¹ï¼ˆç›´æ¥æ›¿æ¢ LLM æ‰€æœ‰å›å¤æ–‡æœ¬ï¼‰
      - `created_at` (int) åˆ›å»ºæ—¶é—´æˆ³ï¼Œå¦‚ï¼š1705395332
    - `event: error`
      æµå¼è¾“å‡ºè¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸ä¼šä»¥ stream event å½¢å¼è¾“å‡ºï¼Œæ”¶åˆ°å¼‚å¸¸äº‹ä»¶åå³ç»“æŸã€‚
      - `task_id` (string) ä»»åŠ¡ IDï¼Œç”¨äºè¯·æ±‚è·Ÿè¸ªå’Œä¸‹æ–¹çš„åœæ­¢å“åº”æ¥å£
      - `message_id` (string) æ¶ˆæ¯å”¯ä¸€ ID
      - `status` (int) HTTP çŠ¶æ€ç 
      - `code` (string) é”™è¯¯ç 
      - `message` (string) é”™è¯¯æ¶ˆæ¯
    - `event: ping` æ¯ 10s ä¸€æ¬¡çš„ ping äº‹ä»¶ï¼Œä¿æŒè¿æ¥å­˜æ´»ã€‚

    ### Errors
    - 404ï¼Œå¯¹è¯ä¸å­˜åœ¨
    - 400ï¼Œ`invalid_param`ï¼Œä¼ å…¥å‚æ•°å¼‚å¸¸
    - 400ï¼Œ`app_unavailable`ï¼ŒApp é…ç½®ä¸å¯ç”¨
    - 400ï¼Œ`provider_not_initialize`ï¼Œæ— å¯ç”¨æ¨¡å‹å‡­æ®é…ç½®
    - 400ï¼Œ`provider_quota_exceeded`ï¼Œæ¨¡å‹è°ƒç”¨é¢åº¦ä¸è¶³
    - 400ï¼Œ`model_currently_not_support`ï¼Œå½“å‰æ¨¡å‹ä¸å¯ç”¨
    - 400ï¼Œ`completion_request_error`ï¼Œæ–‡æœ¬ç”Ÿæˆå¤±è´¥
    - 500ï¼ŒæœåŠ¡å†…éƒ¨å¼‚å¸¸

    </Properties>
  </Col>
  <Col sticky>

    <CodeGroup
      title="Request"
      tag="POST"
      label="/completion-messages"
      targetCode={`curl -X POST '${props.appDetail.api_base_url}/completion-messages' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
    "inputs": {"query": "Hello, world!"},
    "response_mode": "streaming",
    "user": "abc-123"
}'`}
    />
    ### blocking
    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "id": "0b089b9a-24d9-48cc-94f8-762677276261",
      "answer": "how are you?",
      "created_at": 1679586667
    }
    ```
    </CodeGroup>
    ### streaming
    <CodeGroup title="Response">
    ```streaming {{ title: 'Response' }}
      data: {"id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " I", "created_at": 1679586595}
      data: {"id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " I", "created_at": 1679586595}
      data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}
      data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}
    ```
    </CodeGroup>
  </Col>
</Row>

---
<Heading
  url='/files/upload'
  method='POST'
  title='ä¸Šä¼ æ–‡ä»¶'
  name='#files-upload'
/>
<Row>
  <Col>
    ä¸Šä¼ æ–‡ä»¶ï¼ˆç›®å‰ä»…æ”¯æŒå›¾ç‰‡ï¼‰å¹¶åœ¨å‘é€æ¶ˆæ¯æ—¶ä½¿ç”¨ï¼Œå¯å®ç°å›¾æ–‡å¤šæ¨¡æ€ç†è§£ã€‚
    æ”¯æŒ png, jpg, jpeg, webp, gif æ ¼å¼ã€‚
    <i>ä¸Šä¼ çš„æ–‡ä»¶ä»…ä¾›å½“å‰ç»ˆç«¯ç”¨æˆ·ä½¿ç”¨ã€‚</i>

    ### Request Body
    è¯¥æ¥å£éœ€ä½¿ç”¨  `multipart/form-data` è¿›è¡Œè¯·æ±‚ã€‚
    <Properties>
      <Property name='file' type='file' key='file'>
        è¦ä¸Šä¼ çš„æ–‡ä»¶ã€‚
      </Property>
      <Property name='user' type='string' key='user'>
          ç”¨æˆ·æ ‡è¯†ï¼Œç”¨äºå®šä¹‰ç»ˆç«¯ç”¨æˆ·çš„èº«ä»½ï¼Œå¿…é¡»å’Œå‘é€æ¶ˆæ¯æ¥å£ä¼ å…¥ user ä¿æŒä¸€è‡´ã€‚
      </Property>
    </Properties>

    ### Response
    æˆåŠŸä¸Šä¼ åï¼ŒæœåŠ¡å™¨ä¼šè¿”å›æ–‡ä»¶çš„ ID å’Œç›¸å…³ä¿¡æ¯ã€‚
    - `id` (uuid) ID
    - `name` (string) æ–‡ä»¶å
    - `size` (int) æ–‡ä»¶å¤§å°ï¼ˆbyteï¼‰
    - `extension` (string) æ–‡ä»¶åç¼€
    - `mime_type` (string) æ–‡ä»¶ mime-type
    - `created_by` (uuid) ä¸Šä¼ äºº ID
    - `created_at` (timestamp) ä¸Šä¼ æ—¶é—´

    ### Errors
    - 400ï¼Œ`no_file_uploaded`ï¼Œå¿…é¡»æä¾›æ–‡ä»¶
    - 400ï¼Œ`too_many_files`ï¼Œç›®å‰åªæ¥å—ä¸€ä¸ªæ–‡ä»¶
    - 400ï¼Œ`unsupported_preview`ï¼Œè¯¥æ–‡ä»¶ä¸æ”¯æŒé¢„è§ˆ
    - 400ï¼Œ`unsupported_estimate`ï¼Œè¯¥æ–‡ä»¶ä¸æ”¯æŒä¼°ç®—
    - 413ï¼Œ`file_too_large`ï¼Œæ–‡ä»¶å¤ªå¤§
    - 415ï¼Œ`unsupported_file_type`ï¼Œä¸æ”¯æŒçš„æ‰©å±•åï¼Œå½“å‰åªæ¥å—æ–‡æ¡£ç±»æ–‡ä»¶
    - 503ï¼Œ`s3_connection_failed`ï¼Œæ— æ³•è¿æ¥åˆ° S3 æœåŠ¡
    - 503ï¼Œ`s3_permission_denied`ï¼Œæ— æƒé™ä¸Šä¼ æ–‡ä»¶åˆ° S3
    - 503ï¼Œ`s3_file_too_large`ï¼Œæ–‡ä»¶è¶…å‡º S3 å¤§å°é™åˆ¶
  </Col>
  <Col sticky>

    <CodeGroup
      title="Request"
      tag="POST"
      label="/files/upload"
      targetCode={`curl -X POST '${props.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}
    />

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",
      "name": "example.png",
      "size": 1024,
      "extension": "png",
      "mime_type": "image/png",
      "created_by": 123,
      "created_at": 1577836800,
    }
    ```
    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/files/:file_id/preview'
  method='GET'
  title='æ–‡ä»¶é¢„è§ˆ'
  name='#file-preview'
/>
<Row>
  <Col>
    é¢„è§ˆæˆ–ä¸‹è½½å·²ä¸Šä¼ çš„æ–‡ä»¶ã€‚æ­¤ç«¯ç‚¹å…è®¸æ‚¨è®¿é—®å…ˆå‰é€šè¿‡æ–‡ä»¶ä¸Šä¼  API ä¸Šä¼ çš„æ–‡ä»¶ã€‚

    <i>æ–‡ä»¶åªèƒ½åœ¨å±äºè¯·æ±‚åº”ç”¨ç¨‹åºçš„æ¶ˆæ¯èŒƒå›´å†…è®¿é—®ã€‚</i>

    ### è·¯å¾„å‚æ•°
    - `file_id` (string) å¿…éœ€
      è¦é¢„è§ˆçš„æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä»æ–‡ä»¶ä¸Šä¼  API å“åº”ä¸­è·å¾—ã€‚

    ### æŸ¥è¯¢å‚æ•°
    - `as_attachment` (boolean) å¯é€‰
      æ˜¯å¦å¼ºåˆ¶å°†æ–‡ä»¶ä½œä¸ºé™„ä»¶ä¸‹è½½ã€‚é»˜è®¤ä¸º `false`ï¼ˆåœ¨æµè§ˆå™¨ä¸­é¢„è§ˆï¼‰ã€‚

    ### å“åº”
    è¿”å›å¸¦æœ‰é€‚å½“æµè§ˆå™¨æ˜¾ç¤ºæˆ–ä¸‹è½½æ ‡å¤´çš„æ–‡ä»¶å†…å®¹ã€‚
    - `Content-Type` æ ¹æ®æ–‡ä»¶ MIME ç±»å‹è®¾ç½®
    - `Content-Length` æ–‡ä»¶å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œå¦‚æœå¯ç”¨ï¼‰
    - `Content-Disposition` å¦‚æœ `as_attachment=true` åˆ™è®¾ç½®ä¸º "attachment"
    - `Cache-Control` ç”¨äºæ€§èƒ½çš„ç¼“å­˜æ ‡å¤´
    - `Accept-Ranges` å¯¹äºéŸ³é¢‘/è§†é¢‘æ–‡ä»¶è®¾ç½®ä¸º "bytes"

    ### é”™è¯¯
    - 400, `invalid_param`, å‚æ•°è¾“å…¥å¼‚å¸¸
    - 403, `file_access_denied`, æ–‡ä»¶è®¿é—®è¢«æ‹’ç»æˆ–æ–‡ä»¶ä¸å±äºå½“å‰åº”ç”¨ç¨‹åº
    - 404, `file_not_found`, æ–‡ä»¶æœªæ‰¾åˆ°æˆ–å·²è¢«åˆ é™¤
    - 500, æœåŠ¡å†…éƒ¨é”™è¯¯

  </Col>
  <Col sticky>
    ### è¯·æ±‚ç¤ºä¾‹
    <CodeGroup
      title="Request"
      tag="GET"
      label="/files/:file_id/preview"
      targetCode={`curl -X GET '${props.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview' \\
--header 'Authorization: Bearer {api_key}'`}
    />

    ### ä½œä¸ºé™„ä»¶ä¸‹è½½
    <CodeGroup
      title="ä¸‹è½½è¯·æ±‚"
      tag="GET"
      label="/files/:file_id/preview?as_attachment=true"
      targetCode={`curl -X GET '${props.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview?as_attachment=true' \\
--header 'Authorization: Bearer {api_key}' \\
--output downloaded_file.png`}
    />

    ### å“åº”æ ‡å¤´ç¤ºä¾‹
    <CodeGroup title="Response Headers">
    ```http {{ title: 'Headers - å›¾ç‰‡é¢„è§ˆ' }}
    Content-Type: image/png
    Content-Length: 1024
    Cache-Control: public, max-age=3600
    ```
    </CodeGroup>

    ### æ–‡ä»¶ä¸‹è½½å“åº”æ ‡å¤´
    <CodeGroup title="Download Response Headers">
    ```http {{ title: 'Headers - æ–‡ä»¶ä¸‹è½½' }}
    Content-Type: image/png
    Content-Length: 1024
    Content-Disposition: attachment; filename*=UTF-8''example.png
    Cache-Control: public, max-age=3600
    ```
    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/completion-messages/:task_id/stop'
  method='POST'
  title='åœæ­¢å“åº”'
  name='#Stop'
/>
<Row>
  <Col>
  ä»…æ”¯æŒæµå¼æ¨¡å¼ã€‚
  ### Path
  - `task_id` (string) ä»»åŠ¡ IDï¼Œå¯åœ¨æµå¼è¿”å› Chunk ä¸­è·å–

  ### Request Body
  - `user` (string) Required
    ç”¨æˆ·æ ‡è¯†ï¼Œç”¨äºå®šä¹‰ç»ˆç«¯ç”¨æˆ·çš„èº«ä»½ï¼Œå¿…é¡»å’Œå‘é€æ¶ˆæ¯æ¥å£ä¼ å…¥ user ä¿æŒä¸€è‡´ã€‚API æ— æ³•è®¿é—® WebApp åˆ›å»ºçš„ä¼šè¯ã€‚
  ### Response
  - `result` (string) å›ºå®šè¿”å› success
  </Col>
  <Col sticky>
    <CodeGroup
      title="Request"
      tag="POST"
      label="/completion-messages/:task_id/stop"
      targetCode={`curl -X POST '${props.appDetail.api_base_url}/completion-messages/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{ "user": "abc-123"}'`}
    />

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "result": "success"
    }
    ```
    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/messages/:message_id/feedbacks'
  method='POST'
  title='æ¶ˆæ¯åé¦ˆï¼ˆç‚¹èµï¼‰'
  name='#feedbacks'
/>
<Row>
  <Col>
    æ¶ˆæ¯ç»ˆç«¯ç”¨æˆ·åé¦ˆã€ç‚¹èµï¼Œæ–¹ä¾¿åº”ç”¨å¼€å‘è€…ä¼˜åŒ–è¾“å‡ºé¢„æœŸã€‚

    ### Path Params
    <Properties>
      <Property name='message_id' type='string' key='message_id'>
       æ¶ˆæ¯ ID
      </Property>
    </Properties>

    ### Request Body

    <Properties>
      <Property name='rating' type='string' key='rating'>
         ç‚¹èµ like, ç‚¹è¸© dislike,  æ’¤é”€ç‚¹èµ null
      </Property>
      <Property name='user' type='string' key='user'>
          ç”¨æˆ·æ ‡è¯†ï¼Œç”±å¼€å‘è€…å®šä¹‰è§„åˆ™ï¼Œéœ€ä¿è¯ç”¨æˆ·æ ‡è¯†åœ¨åº”ç”¨å†…å”¯ä¸€ã€‚
      </Property>
      <Property name='content' type='string' key='content'>
          æ¶ˆæ¯åé¦ˆçš„å…·ä½“ä¿¡æ¯ã€‚
      </Property>
    </Properties>

    ### Response
    - `result` (string) å›ºå®šè¿”å› success
  </Col>
  <Col sticky>

    <CodeGroup
      title="Request"
      tag="POST"
      label="/messages/:message_id/feedbacks"
      targetCode={`curl -X POST '${props.appDetail.api_base_url}/messages/:message_id/feedbacks \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
    "rating": "like",
    "user": "abc-123",
    "content": "message feedback information"
}'`}
    />

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "result": "success"
    }
    ```
    </CodeGroup>
  </Col>
</Row>

---
<Heading
  url='/app/feedbacks'
  method='GET'
  title='Get feedbacks of application'
  name='#app-feedbacks'
/>
<Row>
  <Col>
    Get application's feedbacks.

    ### Query
    <Properties>
      <Property name='page' type='string' key='page'>
       ï¼ˆoptionalï¼‰paginationï¼Œdefaultï¼š1
      </Property>
    </Properties>

    <Properties>
      <Property name='limit' type='string' key='limit'>
       ï¼ˆoptionalï¼‰ records per page defaultï¼š20
      </Property>
    </Properties>

    ### Response
    - `data` (List) return apps feedback list.
  </Col>
  <Col sticky>

    <CodeGroup
      title="Request"
      tag="GET"
      label="/app/feedbacks"
      targetCode={`curl -X GET '${props.appDetail.api_base_url}/app/feedbacks?page=1&limit=20'`}
    />

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
      {
          "data": [
              {
                  "id": "8c0fbed8-e2f9-49ff-9f0e-15a35bdd0e25",
                  "app_id": "f252d396-fe48-450e-94ec-e184218e7346",
                  "conversation_id": "2397604b-9deb-430e-b285-4726e51fd62d",
                  "message_id": "709c0b0f-0a96-4a4e-91a4-ec0889937b11",
                  "rating": "like",
                  "content": "message feedback information-3",
                  "from_source": "user",
                  "from_end_user_id": "74286412-9a1a-42c1-929c-01edb1d381d5",
                  "from_account_id": null,
                  "created_at": "2025-04-24T09:24:38",
                  "updated_at": "2025-04-24T09:24:38"
              }
          ]
      }
    ```
    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/text-to-audio'
  method='POST'
  title='æ–‡å­—è½¬è¯­éŸ³'
  name='#text-to-audio'
/>
<Row>
  <Col>
    æ–‡å­—è½¬è¯­éŸ³ã€‚

    ### Request Body

    <Properties>
      <Property name='message_id' type='str' key='message_id'>
        Dify ç”Ÿæˆçš„æ–‡æœ¬æ¶ˆæ¯ï¼Œé‚£ä¹ˆç›´æ¥ä¼ é€’ç”Ÿæˆçš„message-id å³å¯ï¼Œåå°ä¼šé€šè¿‡ message_id æŸ¥æ‰¾ç›¸åº”çš„å†…å®¹ç›´æ¥åˆæˆè¯­éŸ³ä¿¡æ¯ã€‚å¦‚æœåŒæ—¶ä¼  message_id å’Œ textï¼Œä¼˜å…ˆä½¿ç”¨ message_idã€‚
      </Property>
      <Property name='text' type='str' key='text'>
        è¯­éŸ³ç”Ÿæˆå†…å®¹ã€‚å¦‚æœæ²¡æœ‰ä¼  message-idçš„è¯ï¼Œåˆ™ä¼šä½¿ç”¨è¿™ä¸ªå­—æ®µçš„å†…å®¹
      </Property>
      <Property name='user' type='string' key='user'>
        ç”¨æˆ·æ ‡è¯†ï¼Œç”±å¼€å‘è€…å®šä¹‰è§„åˆ™ï¼Œéœ€ä¿è¯ç”¨æˆ·æ ‡è¯†åœ¨åº”ç”¨å†…å”¯ä¸€ã€‚
      </Property>
    </Properties>
  </Col>
  <Col sticky>

    <CodeGroup
      title="Request"
      tag="POST"
      label="/text-to-audio"
      targetCode={`curl -o text-to-audio.mp3 -X POST '${props.appDetail.api_base_url}/text-to-audio' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
    "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290",
    "text": "ä½ å¥½Dify",
    "user": "abc-123"
}'`}
    />

    <CodeGroup title="headers">
    ```json {{ title: 'headers' }}
    {
      "Content-Type": "audio/wav"
    }
    ```
    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/info'
  method='GET'
  title='è·å–åº”ç”¨åŸºæœ¬ä¿¡æ¯'
  name='#info'
/>
<Row>
  <Col>
  ç”¨äºè·å–åº”ç”¨çš„åŸºæœ¬ä¿¡æ¯
  ### Response
  - `name` (string) åº”ç”¨åç§°
  - `description` (string) åº”ç”¨æè¿°
  - `tags` (array[string]) åº”ç”¨æ ‡ç­¾
  - `mode` (string) åº”ç”¨æ¨¡å¼
  - 'author_name' (string) ä½œè€…åç§°
  </Col>
  <Col>
    <CodeGroup
      title="Request"
      tag="GET"
      label="/info"
      targetCode={`curl -X GET '${props.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}
    />
    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "name": "My App",
      "description": "This is my app.",
      "tags": [
        "tag1",
        "tag2"
      ],
      "mode": "chat",
      "author_name": "Dify"
    }
    ```
    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/parameters'
  method='GET'
  title='è·å–åº”ç”¨å‚æ•°'
  name='#parameters'
/>
<Row>
  <Col>
    ç”¨äºè¿›å…¥é¡µé¢ä¸€å¼€å§‹ï¼Œè·å–åŠŸèƒ½å¼€å…³ã€è¾“å…¥å‚æ•°åç§°ã€ç±»å‹åŠé»˜è®¤å€¼ç­‰ä½¿ç”¨ã€‚

    ### Response
    - `opening_statement` (string) å¼€åœºç™½
    - `suggested_questions` (array[string]) å¼€åœºæ¨èé—®é¢˜åˆ—è¡¨
    - `suggested_questions_after_answer` (object) å¯ç”¨å›ç­”åç»™å‡ºæ¨èé—®é¢˜ã€‚
      - `enabled` (bool) æ˜¯å¦å¼€å¯
    - `speech_to_text` (object) è¯­éŸ³è½¬æ–‡æœ¬
      - `enabled` (bool) æ˜¯å¦å¼€å¯
    - `retriever_resource` (object) å¼•ç”¨å’Œå½’å±
      - `enabled` (bool) æ˜¯å¦å¼€å¯
    - `annotation_reply` (object) æ ‡è®°å›å¤
      - `enabled` (bool) æ˜¯å¦å¼€å¯
    - `user_input_form` (array[object]) ç”¨æˆ·è¾“å…¥è¡¨å•é…ç½®
      - `text-input` (object) æ–‡æœ¬è¾“å…¥æ§ä»¶
        - `label` (string) æ§ä»¶å±•ç¤ºæ ‡ç­¾å
        - `variable` (string) æ§ä»¶ ID
        - `required` (bool) æ˜¯å¦å¿…å¡«
        - `default` (string) é»˜è®¤å€¼
      - `paragraph` (object) æ®µè½æ–‡æœ¬è¾“å…¥æ§ä»¶
        - `label` (string) æ§ä»¶å±•ç¤ºæ ‡ç­¾å
        - `variable` (string) æ§ä»¶ ID
        - `required` (bool) æ˜¯å¦å¿…å¡«
        - `default` (string) é»˜è®¤å€¼
      - `select` (object) ä¸‹æ‹‰æ§ä»¶
        - `label` (string) æ§ä»¶å±•ç¤ºæ ‡ç­¾å
        - `variable` (string) æ§ä»¶ ID
        - `required` (bool) æ˜¯å¦å¿…å¡«
        - `default` (string) é»˜è®¤å€¼
        - `options` (array[string]) é€‰é¡¹å€¼
    - `file_upload` (object) æ–‡ä»¶ä¸Šä¼ é…ç½®
      - `document` (object) æ–‡æ¡£è®¾ç½®
        å½“å‰ä»…æ”¯æŒæ–‡æ¡£ç±»å‹ï¼š`txt`, `md`, `markdown`, `pdf`, `html`, `xlsx`, `xls`, `docx`, `csv`, `eml`, `msg`, `pptx`, `ppt`, `xml`, `epub`ã€‚
        - `enabled` (bool) æ˜¯å¦å¯ç”¨
        - `number_limits` (int) æ–‡æ¡£æ•°é‡é™åˆ¶ï¼Œé»˜è®¤ä¸º 3
        - `transfer_methods` (array[string]) ä¼ è¾“æ–¹å¼åˆ—è¡¨ï¼š`remote_url`, `local_file`ï¼Œå¿…é¡»é€‰æ‹©ä¸€ä¸ªã€‚
      - `image` (object) å›¾ç‰‡è®¾ç½®
        å½“å‰ä»…æ”¯æŒå›¾ç‰‡ç±»å‹ï¼š`png`, `jpg`, `jpeg`, `webp`, `gif`ã€‚
        - `enabled` (bool) æ˜¯å¦å¯ç”¨
        - `number_limits` (int) å›¾ç‰‡æ•°é‡é™åˆ¶ï¼Œé»˜è®¤ä¸º 3
        - `transfer_methods` (array[string]) ä¼ è¾“æ–¹å¼åˆ—è¡¨ï¼š`remote_url`, `local_file`ï¼Œå¿…é¡»é€‰æ‹©ä¸€ä¸ªã€‚
      - `audio` (object) éŸ³é¢‘è®¾ç½®
        å½“å‰ä»…æ”¯æŒéŸ³é¢‘ç±»å‹ï¼š`mp3`, `m4a`, `wav`, `webm`, `amr`ã€‚
        - `enabled` (bool) æ˜¯å¦å¯ç”¨
        - `number_limits` (int) éŸ³é¢‘æ•°é‡é™åˆ¶ï¼Œé»˜è®¤ä¸º 3
        - `transfer_methods` (array[string]) ä¼ è¾“æ–¹å¼åˆ—è¡¨ï¼š`remote_url`, `local_file`ï¼Œå¿…é¡»é€‰æ‹©ä¸€ä¸ªã€‚
      - `video` (object) è§†é¢‘è®¾ç½®
        å½“å‰ä»…æ”¯æŒè§†é¢‘ç±»å‹ï¼š`mp4`, `mov`, `mpeg`, `mpga`ã€‚
        - `enabled` (bool) æ˜¯å¦å¯ç”¨
        - `number_limits` (int) è§†é¢‘æ•°é‡é™åˆ¶ï¼Œé»˜è®¤ä¸º 3
        - `transfer_methods` (array[string]) ä¼ è¾“æ–¹å¼åˆ—è¡¨ï¼š`remote_url`, `local_file`ï¼Œå¿…é¡»é€‰æ‹©ä¸€ä¸ªã€‚
      - `custom` (object) è‡ªå®šä¹‰è®¾ç½®
        - `enabled` (bool) æ˜¯å¦å¯ç”¨
        - `number_limits` (int) è‡ªå®šä¹‰æ•°é‡é™åˆ¶ï¼Œé»˜è®¤ä¸º 3
        - `transfer_methods` (array[string]) ä¼ è¾“æ–¹å¼åˆ—è¡¨ï¼š`remote_url`, `local_file`ï¼Œå¿…é¡»é€‰æ‹©ä¸€ä¸ªã€‚
    - `system_parameters` (object) ç³»ç»Ÿå‚æ•°
      - `file_size_limit` (int) æ–‡æ¡£ä¸Šä¼ å¤§å°é™åˆ¶ (MB)
      - `image_file_size_limit` (int) å›¾ç‰‡æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶ï¼ˆMBï¼‰
      - `audio_file_size_limit` (int) éŸ³é¢‘æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶ (MB)
      - `video_file_size_limit` (int) è§†é¢‘æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶ (MB)
  </Col>
  <Col sticky>

    <CodeGroup
      title="Request"
      tag="GET"
      label="/parameters"
      targetCode={` curl -X GET '${props.appDetail.api_base_url}/parameters'\\
--header 'Authorization: Bearer {api_key}'`}
    />

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "introduction": "nice to meet you",
      "user_input_form": [
        {
          "text-input": {
            "label": "a",
            "variable": "a",
            "required": true,
            "max_length": 48,
            "default": ""
          }
        },
        {
          // ...
        }
      ],
      "file_upload": {
        "image": {
          "enabled": true,
          "number_limits": 3,
          "transfer_methods": [
            "remote_url",
            "local_file"
          ]
        }
      },
      "system_parameters": {
          "file_size_limit": 15,
          "image_file_size_limit": 10,
          "audio_file_size_limit": 50,
          "video_file_size_limit": 100
      }
    }
    ```
    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/site'
  method='GET'
  title='è·å–åº”ç”¨ WebApp è®¾ç½®'
  name='#site'
/>
<Row>
  <Col>
  ç”¨äºè·å–åº”ç”¨çš„ WebApp è®¾ç½®
  ### Response
  - `title` (string) WebApp åç§°
  - `chat_color_theme` (string) èŠå¤©é¢œè‰²ä¸»é¢˜ï¼Œhex æ ¼å¼
  - `chat_color_theme_inverted` (bool) èŠå¤©é¢œè‰²ä¸»é¢˜æ˜¯å¦åè½¬
  - `icon_type` (string) å›¾æ ‡ç±»å‹ï¼Œ`emoji`-è¡¨æƒ…ï¼Œ`image`-å›¾ç‰‡
  - `icon` (string) å›¾æ ‡ï¼Œå¦‚æœæ˜¯ `emoji` ç±»å‹ï¼Œåˆ™æ˜¯ emoji è¡¨æƒ…ç¬¦å·ï¼Œå¦‚æœæ˜¯ `image` ç±»å‹ï¼Œåˆ™æ˜¯å›¾ç‰‡ URL
  - `icon_background` (string) hex æ ¼å¼çš„èƒŒæ™¯è‰²
  - `icon_url` (string) å›¾æ ‡ URL
  - `description` (string) æè¿°
  - `copyright` (string) ç‰ˆæƒä¿¡æ¯
  - `privacy_policy` (string) éšç§æ”¿ç­–é“¾æ¥
  - `custom_disclaimer` (string) è‡ªå®šä¹‰å…è´£å£°æ˜
  - `default_language` (string) é»˜è®¤è¯­è¨€
  - `show_workflow_steps` (bool) æ˜¯å¦æ˜¾ç¤ºå·¥ä½œæµè¯¦æƒ…
  - `use_icon_as_answer_icon` (bool) æ˜¯å¦ä½¿ç”¨ WebApp å›¾æ ‡æ›¿æ¢èŠå¤©ä¸­çš„ ğŸ¤–
  </Col>
  <Col>
    <CodeGroup
      title="Request"
      tag="GET"
      label="/site"
      targetCode={`curl -X GET '${props.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}
    />

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "title": "My App",
      "chat_color_theme": "#ff4a4a",
      "chat_color_theme_inverted": false,
      "icon_type": "emoji",
      "icon": "ğŸ˜„",
      "icon_background": "#FFEAD5",
      "icon_url": null,
      "description": "This is my app.",
      "copyright": "all rights reserved",
      "privacy_policy": "",
      "custom_disclaimer": "All generated by AI",
      "default_language": "en-US",
      "show_workflow_steps": false,
      "use_icon_as_answer_icon": false,
    }
    ```
    </CodeGroup>
  </Col>
</Row>
___

<Heading
  url='/apps/annotations'
  method='GET'
  title='è·å–æ ‡æ³¨åˆ—è¡¨'
  name='#annotation_list'
/>
<Row>
  <Col>
    ### Query
    <Properties>
      <Property name='page' type='string' key='page'>
        é¡µç 
      </Property>
      <Property name='limit' type='string' key='limit'>
        æ¯é¡µæ•°é‡
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    <CodeGroup
      title="Request"
      tag="GET"
      label="/apps/annotations"
      targetCode={`curl --location --request GET '${props.apiBaseUrl}/apps/annotations?page=1&limit=20' \\\n--header 'Authorization: Bearer {api_key}'`}
    >
    ```bash {{ title: 'cURL' }}
    curl --location --request GET '${props.apiBaseUrl}/apps/annotations?page=1&limit=20' \
    --header 'Authorization: Bearer {api_key}'
    ```
    </CodeGroup>

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "data": [
        {
          "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",
          "question": "What is your name?",
          "answer": "I am Dify.",
          "hit_count": 0,
          "created_at": 1735625869
        }
      ],
      "has_more": false,
      "limit": 20,
      "total": 1,
      "page": 1
    }
    ```
    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/apps/annotations'
  method='POST'
  title='åˆ›å»ºæ ‡æ³¨'
  name='#create_annotation'
/>
<Row>
  <Col>
    ### Query
    <Properties>
      <Property name='question' type='string' key='question'>
        é—®é¢˜
      </Property>
      <Property name='answer' type='string' key='answer'>
        ç­”æ¡ˆå†…å®¹
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    <CodeGroup
      title="Request"
      tag="POST"
      label="/apps/annotations"
      targetCode={`curl --location --request POST '${props.apiBaseUrl}/apps/annotations' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{"question": "What is your name?","answer": "I am Dify."}'`}
    />

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",
      "question": "What is your name?",
      "answer": "I am Dify.",
      "hit_count": 0,
      "created_at": 1735625869
    }
    ```
    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/apps/annotations/{annotation_id}'
  method='PUT'
  title='æ›´æ–°æ ‡æ³¨'
  name='#update_annotation'
/>
<Row>
  <Col>
    ### Query
    <Properties>
      <Property name='annotation_id' type='string' key='annotation_id'>
        æ ‡æ³¨ ID
      </Property>
      <Property name='question' type='string' key='question'>
        é—®é¢˜
      </Property>
      <Property name='answer' type='string' key='answer'>
        ç­”æ¡ˆå†…å®¹
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    <CodeGroup
      title="Request"
      tag="PUT"
      label="/apps/annotations/{annotation_id}"
      targetCode={`curl --location --request PUT '${props.apiBaseUrl}/apps/annotations/{annotation_id}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{"question": "What is your name?","answer": "I am Dify."}'`}
    />

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",
      "question": "What is your name?",
      "answer": "I am Dify.",
      "hit_count": 0,
      "created_at": 1735625869
    }
    ```
    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/apps/annotations/{annotation_id}'
  method='DELETE'
  title='åˆ é™¤æ ‡æ³¨'
  name='#delete_annotation'
/>
<Row>
  <Col>
    ### Query
    <Properties>
      <Property name='annotation_id' type='string' key='annotation_id'>
        æ ‡æ³¨ ID
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    <CodeGroup
      title="Request"
      tag="PUT"
      label="/apps/annotations/{annotation_id}"
      targetCode={`curl --location --request DELETE '${props.apiBaseUrl}/apps/annotations/{annotation_id}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json'`}
    >
    ```bash {{ title: 'cURL' }}
    curl --location --request DELETE '${props.apiBaseUrl}/apps/annotations/{annotation_id}' \
    --header 'Authorization: Bearer {api_key}'
    ```
    </CodeGroup>

    <CodeGroup title="Response">
    ```text {{ title: 'Response' }}
    204 No Content
    ```
    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/apps/annotation-reply/{action}'
  method='POST'
  title='æ ‡æ³¨å›å¤åˆå§‹è®¾ç½®'
  name='#initial_annotation_reply_settings'
/>
<Row>
  <Col>
    ### Query
    <Properties>
      <Property name='action' type='string' key='action'>
        åŠ¨ä½œï¼Œåªèƒ½æ˜¯ 'enable' æˆ– 'disable'
      </Property>
      <Property name='embedding_provider_name' type='string' key='embedding_provider_name'>
        æŒ‡å®šçš„åµŒå…¥æ¨¡å‹æä¾›å•†ï¼Œå¿…é¡»å…ˆåœ¨ç³»ç»Ÿå†…è®¾å®šå¥½æ¥å…¥çš„æ¨¡å‹ï¼Œå¯¹åº”çš„æ˜¯ provider å­—æ®µ
      </Property>
      <Property name='embedding_model_name' type='string' key='embedding_model_name'>
        æŒ‡å®šçš„åµŒå…¥æ¨¡å‹ï¼Œå¯¹åº”çš„æ˜¯ model å­—æ®µ
      </Property>
      <Property name='score_threshold' type='number' key='score_threshold'>
        ç›¸ä¼¼åº¦é˜ˆå€¼ï¼Œå½“ç›¸ä¼¼åº¦å¤§äºè¯¥é˜ˆå€¼æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å›å¤ï¼Œå¦åˆ™ä¸å›å¤
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    åµŒå…¥æ¨¡å‹çš„æä¾›å•†å’Œæ¨¡å‹åç§°å¯ä»¥é€šè¿‡ä»¥ä¸‹æ¥å£è·å–ï¼šv1/workspaces/current/models/model-types/text-embeddingï¼Œå…·ä½“è§ï¼šé€šè¿‡ API ç»´æŠ¤çŸ¥è¯†åº“ã€‚ä½¿ç”¨çš„ Authorization æ˜¯ Dataset çš„ API Tokenã€‚
    è¯¥æ¥å£æ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œæ‰€ä»¥ä¼šè¿”å›ä¸€ä¸ª job_idï¼Œé€šè¿‡æŸ¥è¯¢ job çŠ¶æ€æ¥å£å¯ä»¥è·å–åˆ°æœ€ç»ˆçš„æ‰§è¡Œç»“æœã€‚
    <CodeGroup
      title="Request"
      tag="POST"
      label="/apps/annotation-reply/{action}"
      targetCode={`curl --location --request POST '${props.apiBaseUrl}/apps/annotation-reply/{action}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{"score_threshold": 0.9, "embedding_provider_name": "zhipu", "embedding_model_name": "embedding_3"}'`}
    />

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "job_id": "b15c8f68-1cf4-4877-bf21-ed7cf2011802",
      "job_status": "waiting"
    }
    ```

    </CodeGroup>
  </Col>
</Row>
---

<Heading
  url='/apps/annotation-reply/{action}/status/{job_id}'
  method='GET'
  title='æŸ¥è¯¢æ ‡æ³¨å›å¤åˆå§‹è®¾ç½®ä»»åŠ¡çŠ¶æ€'
  name='#initial_annotation_reply_settings_task_status'
/>
<Row>
  <Col>
    ### Query
    <Properties>
    <Property name='action' type='string' key='action'>
        åŠ¨ä½œï¼Œåªèƒ½æ˜¯ 'enable' æˆ– 'disable'ï¼Œå¹¶ä¸”å¿…é¡»å’Œæ ‡æ³¨å›å¤åˆå§‹è®¾ç½®æ¥å£çš„åŠ¨ä½œä¸€è‡´
      </Property>
      <Property name='job_id' type='string' key='job_id'>
        ä»»åŠ¡ IDï¼Œä»æ ‡æ³¨å›å¤åˆå§‹è®¾ç½®æ¥å£è¿”å›çš„ job_id
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    <CodeGroup
      title="Request"
      tag="GET"
      label="/apps/annotations"
      targetCode={`curl --location --request GET '${props.apiBaseUrl}/apps/annotation-reply/{action}/status/{job_id}' \\
--header 'Authorization: Bearer {api_key}'`}
    />

    <CodeGroup title="Response">
    ```json {{ title: 'Response' }}
    {
      "job_id": "b15c8f68-1cf4-4877-bf21-ed7cf2011802",
      "job_status": "waiting",
      "error_msg": ""
    }
    ```
    </CodeGroup>
  </Col>
</Row>
