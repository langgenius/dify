# æ•°ç»„å…ƒæ•°æ®è¿‡æ»¤åŠŸèƒ½ - DebugæŒ‡å—

## é—®é¢˜åˆ†æ

ä»ä½ çš„æˆªå›¾å¯ä»¥çœ‹å‡ºï¼Œå½“å‰é€‰æ‹©çš„æ˜¯`name`å­—æ®µï¼Œå®ƒæ˜¯`string`ç±»å‹çš„å…ƒæ•°æ®å­—æ®µã€‚è¦ä½¿ç”¨æ•°ç»„å˜é‡é€‰æ‹©å™¨ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

1. **å…ƒæ•°æ®å­—æ®µå¿…é¡»æ˜¯arrayç±»å‹** - å½“å‰æ˜¾ç¤ºçš„æ˜¯stringç±»å‹
2. **å·¥ä½œæµä¸­éœ€è¦æœ‰arrayç±»å‹çš„å˜é‡** - ç”¨äºå˜é‡é€‰æ‹©

## Debugæ­¥éª¤

### 1. åˆ›å»ºarrayç±»å‹çš„å…ƒæ•°æ®å­—æ®µ

é¦–å…ˆéœ€è¦åœ¨çŸ¥è¯†åº“ä¸­åˆ›å»ºä¸€ä¸ªarrayç±»å‹çš„å…ƒæ•°æ®å­—æ®µï¼š

```bash
# é€šè¿‡APIåˆ›å»ºarrayç±»å‹å…ƒæ•°æ®å­—æ®µ
curl -X POST \
  http://localhost:3000/datasets/{dataset_id}/metadata \
  -H "Authorization: Bearer your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "array",
    "name": "job_ids"
  }'
```

### 2. åœ¨å·¥ä½œæµä¸­æ·»åŠ æ•°ç»„å˜é‡

åœ¨å·¥ä½œæµçš„å¼€å§‹èŠ‚ç‚¹ä¸­æ·»åŠ arrayç±»å‹çš„å˜é‡ï¼š

```json
{
  "key": "user_jobs",
  "name": "ç”¨æˆ·å·¥ä½œIDåˆ—è¡¨",
  "type": "array",
  "required": true,
  "default": ["job1", "job2"]
}
```

### 3. æµ‹è¯•æµç¨‹

1. **é€‰æ‹©arrayç±»å‹å­—æ®µ**ï¼šåœ¨å…ƒæ•°æ®è¿‡æ»¤æ¡ä»¶ä¸­é€‰æ‹©`job_ids`å­—æ®µ
2. **æŸ¥çœ‹å˜é‡é€‰æ‹©å™¨**ï¼šæ­¤æ—¶åº”è¯¥æ˜¾ç¤ºarrayç±»å‹çš„å˜é‡
3. **éªŒè¯æ“ä½œç¬¦**ï¼šç¡®è®¤æ˜¾ç¤ºäº†`in`, `not in`, `contains`, `not contains`ç­‰æ•°ç»„æ“ä½œç¬¦

### 4. æ·»åŠ è°ƒè¯•æ—¥å¿—

æˆ‘å·²ç»åœ¨ä»£ç ä¸­æ·»åŠ äº†è°ƒè¯•æ—¥å¿—ï¼Œæ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹ï¼š

- `ğŸ” ConditionArray Debug` - æ˜¾ç¤ºå¯ç”¨çš„æ•°ç»„å˜é‡
- `ğŸ”§ æ•°ç»„å˜é‡è¢«é€‰æ‹©` - æ˜¾ç¤ºå˜é‡é€‰æ‹©è¿‡ç¨‹

### 5. æ£€æŸ¥æ•°æ®æµ

**å½“å‰é—®é¢˜**ï¼š
- å…ƒæ•°æ®å­—æ®µç±»å‹ï¼š`string` (nameå­—æ®µ)
- éœ€è¦çš„å­—æ®µç±»å‹ï¼š`array` (å¦‚job_idså­—æ®µ)

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åˆ›å»ºarrayç±»å‹çš„å…ƒæ•°æ®å­—æ®µ
2. é€‰æ‹©è¯¥å­—æ®µè¿›è¡Œè¿‡æ»¤
3. æ­¤æ—¶å˜é‡é€‰æ‹©å™¨ä¼šæ˜¾ç¤ºæ•°ç»„ç±»å‹å˜é‡

## éªŒè¯æ–¹æ³•

### æ£€æŸ¥å…ƒæ•°æ®å­—æ®µåˆ—è¡¨
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ
console.log('å½“å‰å…ƒæ•°æ®å­—æ®µ:', metadataList);
```

### æ£€æŸ¥å¯ç”¨å˜é‡
```javascript
// æ£€æŸ¥æ•°ç»„å˜é‡
console.log('å¯ç”¨æ•°ç»„å˜é‡:', availableArrayVars);
console.log('é€šç”¨æ•°ç»„å˜é‡:', availableCommonArrayVars);
```

### éªŒè¯å˜é‡è¿‡æ»¤é€»è¾‘
```javascript
// æ£€æŸ¥å˜é‡è¿‡æ»¤å™¨
const filterArrayVar = (varPayload) => {
  return [
    'arrayString', 
    'arrayNumber', 
    'arrayObject', 
    'array'
  ].includes(varPayload.type);
};
console.log('è¿‡æ»¤åçš„æ•°ç»„å˜é‡:', variables.filter(filterArrayVar));
```

## å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæ²¡æœ‰æ˜¾ç¤ºæ•°ç»„å˜é‡ï¼Ÿ
**A**: å½“å‰é€‰æ‹©çš„æ˜¯stringç±»å‹å­—æ®µã€‚æ•°ç»„å˜é‡åªåœ¨arrayç±»å‹å­—æ®µä¸­æ˜¾ç¤ºã€‚

### Q2: å¦‚ä½•åˆ›å»ºarrayç±»å‹çš„å…ƒæ•°æ®å­—æ®µï¼Ÿ
**A**: 
1. é€šè¿‡APIåˆ›å»ºï¼š`POST /datasets/{id}/metadata` with `{"type": "array", "name": "field_name"}`
2. æˆ–åœ¨çŸ¥è¯†åº“ç®¡ç†ç•Œé¢åˆ›å»º

### Q3: å˜é‡é€‰æ‹©å™¨ä¸ºç©ºï¼Ÿ
**A**: æ£€æŸ¥å·¥ä½œæµä¸­æ˜¯å¦æœ‰arrayç±»å‹çš„å˜é‡ï¼Œç¡®ä¿å˜é‡ç±»å‹ä¸º `arrayString`, `arrayNumber`, `arrayObject`, æˆ– `array`

### Q4: å¦‚ä½•éªŒè¯åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼Ÿ
**A**: 
1. åˆ›å»ºarrayç±»å‹å…ƒæ•°æ®å­—æ®µ
2. åœ¨å·¥ä½œæµå¼€å§‹èŠ‚ç‚¹æ·»åŠ arrayå˜é‡
3. é€‰æ‹©arrayå­—æ®µè¿›è¡Œè¿‡æ»¤
4. æŸ¥çœ‹å˜é‡é€‰æ‹©å™¨æ˜¯å¦æ˜¾ç¤ºæ•°ç»„å˜é‡

## ç¤ºä¾‹é…ç½®

### å…ƒæ•°æ®å­—æ®µç¤ºä¾‹
```json
{
  "id": "job_ids_field",
  "name": "job_ids", 
  "type": "array"
}
```

### å·¥ä½œæµå˜é‡ç¤ºä¾‹
```json
{
  "key": "target_jobs",
  "name": "ç›®æ ‡å·¥ä½œåˆ—è¡¨",
  "type": "array",
  "default": ["job1", "job2", "job3"]
}
```

### è¿‡æ»¤æ¡ä»¶ç¤ºä¾‹
```json
{
  "id": "condition_1",
  "name": "job_ids",
  "comparison_operator": "in",
  "value": ["job1", "job2"]
}
```

## ä¸‹ä¸€æ­¥

1. é¦–å…ˆç¡®è®¤æ˜¯å¦æœ‰arrayç±»å‹çš„å…ƒæ•°æ®å­—æ®µ
2. å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºä¸€ä¸ª
3. ç¡®ä¿å·¥ä½œæµä¸­æœ‰arrayç±»å‹çš„å˜é‡
4. é€‰æ‹©arrayå­—æ®µè¿›è¡Œæµ‹è¯• 