app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: å¯ç”¨æ€§å‘Šè­¦åˆ†æ
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: package
  value:
    plugin_unique_identifier: langgenius/openai_api_compatible:0.0.7@f20c7275bbcf055ec5d170dd5128e341986e2dcba5266d08fd080d4bdf2288f6
kind: app
version: 0.1.5
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: template-transform
        targetType: end
      id: 1741592094819-source-1741592144815-target
      selected: false
      source: '1741592094819'
      sourceHandle: source
      target: '1741592144815'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: start
        targetType: code
      id: 1741227526517-source-1742807803325-target
      selected: false
      source: '1741227526517'
      sourceHandle: source
      target: '1742807803325'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: tool
      id: 1744878352649-source-1744878296971-target
      selected: false
      source: '1744878352649'
      sourceHandle: source
      target: '1744878296971'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: code
      id: 1744878296971-source-1744901266309-target
      selected: false
      source: '1744878296971'
      sourceHandle: source
      target: '1744901266309'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: llm
      id: 1744901266309-source-1744878372490-target
      selected: false
      source: '1744901266309'
      sourceHandle: source
      target: '1744878372490'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: if-else
      id: 1742807803325-source-1742453019576-target
      selected: false
      source: '1742807803325'
      sourceHandle: source
      target: '1742453019576'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: code
      id: 17430590082510-1744901735377-1744878352649-target
      selected: false
      source: '17430590082510'
      sourceHandle: '1744901735377'
      target: '1744878352649'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: template-transform
        targetType: end
      id: 1745313576757-source-1745313574375-target
      selected: false
      source: '1745313576757'
      sourceHandle: source
      target: '1745313574375'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: template-transform
      id: 1742453019576-true-1741592094819-target
      selected: false
      source: '1742453019576'
      sourceHandle: 'true'
      target: '1741592094819'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: template-transform
      id: 17430590082510-1745391097407-1745313576757-target
      selected: false
      source: '17430590082510'
      sourceHandle: '1745391097407'
      target: '1745313576757'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: tool
      id: 1750839702220-source-1750839691646-target
      selected: false
      source: '1750839702220'
      sourceHandle: source
      target: '1750839691646'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: tool
      id: 1750840042580-source-1750839691646-target
      selected: false
      source: '1750840042580'
      sourceHandle: source
      target: '1750839691646'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1750840340832-source-1750840042580-target
      selected: false
      source: '1750840340832'
      sourceHandle: source
      target: '1750840042580'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: tool
      id: 1750843294839-source-1750839691646-target
      selected: false
      source: '1750843294839'
      sourceHandle: source
      target: '1750839691646'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: tool
      id: 1750843922551-source-1750839691646-target
      selected: false
      source: '1750843922551'
      sourceHandle: source
      target: '1750839691646'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: tool
      id: 1750843945254-source-1750839691646-target
      selected: false
      source: '1750843945254'
      sourceHandle: source
      target: '1750839691646'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: variable-aggregator
        targetType: variable-aggregator
      id: 1750844540721-source-1744878466157-target
      selected: false
      source: '1750844540721'
      sourceHandle: source
      target: '1744878466157'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1750846397041-source-1750843922551-target
      selected: false
      source: '1750846397041'
      sourceHandle: source
      target: '1750843922551'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1750846407202-source-1750843945254-target
      selected: false
      source: '1750846407202'
      sourceHandle: source
      target: '1750843945254'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: tool
      id: 1750941439700-source-1750839691646-target
      selected: false
      source: '1750941439700'
      sourceHandle: source
      target: '1750839691646'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: llm
      id: 1750987639392-source-1750840340832-target
      selected: false
      source: '1750987639392'
      sourceHandle: source
      target: '1750840340832'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: end
      id: 1751004239868-source-1744878476249-target
      selected: false
      source: '1751004239868'
      sourceHandle: source
      target: '1744878476249'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1751251291730-source-1750843294839-target
      selected: false
      source: '1751251291730'
      sourceHandle: source
      target: '1750843294839'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: llm
      id: 1751602453263-source-1751004239868-target
      selected: false
      source: '1751602453263'
      sourceHandle: source
      target: '1751004239868'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: tool
      id: 1750839691646-source-1751602453263-target
      selected: false
      source: '1750839691646'
      sourceHandle: source
      target: '1751602453263'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: code
      id: 1751602618703-false-1750839702220-target
      selected: false
      source: '1751602618703'
      sourceHandle: 'false'
      target: '1750839702220'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 1751602618703-false-1750987639392-target
      selected: false
      source: '1751602618703'
      sourceHandle: 'false'
      target: '1750987639392'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 1751602618703-false-1750846397041-target
      selected: false
      source: '1751602618703'
      sourceHandle: 'false'
      target: '1750846397041'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: code
      id: 1751602618703-false-1750941439700-target
      selected: false
      source: '1751602618703'
      sourceHandle: 'false'
      target: '1750941439700'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 1751602618703-false-1750846407202-target
      selected: false
      source: '1751602618703'
      sourceHandle: 'false'
      target: '1750846407202'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 1751602618703-false-1751251291730-target
      selected: false
      source: '1751602618703'
      sourceHandle: 'false'
      target: '1751251291730'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: end
      id: 1751602618703-true-1751602687916-target
      selected: false
      source: '1751602618703'
      sourceHandle: 'true'
      target: '1751602687916'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: code
      id: 1742453019576-false-1753411561314-target
      selected: false
      source: '1742453019576'
      sourceHandle: 'false'
      target: '1753411561314'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: if-else
      id: 1753411561314-source-1753412450611-target
      selected: false
      source: '1753411561314'
      sourceHandle: source
      target: '1753412450611'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: question-classifier
      id: 1753412450611-false-17430590082510-target
      selected: false
      source: '1753412450611'
      sourceHandle: 'false'
      target: '17430590082510'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: code
      id: 1753412450611-true-1744878352649-target
      selected: false
      source: '1753412450611'
      sourceHandle: 'true'
      target: '1744878352649'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: code
      id: 1753413225096-source-1753412973821-target
      selected: false
      source: '1753413225096'
      sourceHandle: source
      target: '1753412973821'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: code
      id: 1753414138349-source-1753414255071-target
      selected: false
      source: '1753414138349'
      sourceHandle: source
      target: '1753414255071'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        iteration_id: '1753414276399'
        sourceType: iteration-start
        targetType: tool
      id: 1753414276399start-source-1753414387530-target
      selected: false
      source: 1753414276399start
      sourceHandle: source
      target: '1753414387530'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1753414276399'
        sourceType: tool
        targetType: tool
      id: 1753414387530-source-1753414403009-target
      selected: false
      source: '1753414387530'
      sourceHandle: source
      target: '1753414403009'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        sourceType: code
        targetType: iteration
      id: 1753414587601-source-1753414518300-target
      selected: false
      source: '1753414587601'
      sourceHandle: source
      target: '1753414518300'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        iteration_id: '1753414518300'
        sourceType: iteration-start
        targetType: code
      id: 1753414518300start-source-1753414924837-target
      selected: false
      source: 1753414518300start
      sourceHandle: source
      target: '1753414924837'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1753414518300'
        sourceType: code
        targetType: tool
      id: 1753414924837-source-1753414547927-target
      selected: false
      source: '1753414924837'
      sourceHandle: source
      target: '1753414547927'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1753414518300'
        sourceType: tool
        targetType: code
      id: 1753414547927-source-1753415013827-target
      selected: false
      source: '1753414547927'
      sourceHandle: source
      target: '1753415013827'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        sourceType: tool
        targetType: code
      id: 1753426546760-source-1753437328850-target
      selected: false
      source: '1753426546760'
      sourceHandle: source
      target: '1753437328850'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: llm
      id: 1753436673318-source-1753437974705-target
      selected: false
      source: '1753436673318'
      sourceHandle: source
      target: '1753437974705'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: llm
      id: 1753436803036-source-1753437974705-target
      selected: false
      source: '1753436803036'
      sourceHandle: source
      target: '1753437974705'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        iteration_id: '1753414276399'
        sourceType: tool
        targetType: code
      id: 1753414403009-source-1753681278579-target
      selected: false
      source: '1753414403009'
      sourceHandle: source
      target: '1753681278579'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1753414276399'
        sourceType: code
        targetType: code
      id: 1753681278579-source-1753421605090-target
      selected: false
      source: '1753681278579'
      sourceHandle: source
      target: '1753421605090'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        sourceType: code
        targetType: code
      id: 1753414255071-source-1753414587601-target
      selected: false
      source: '1753414255071'
      sourceHandle: source
      target: '1753414587601'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: tool
      id: 1753412450611-91b6ca4c-4632-412a-89b1-cbd1539e374f-1753414138349-target
      selected: false
      source: '1753412450611'
      sourceHandle: 91b6ca4c-4632-412a-89b1-cbd1539e374f
      target: '1753414138349'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: tool
      id: 1753412450611-da617f11-ed6f-44ec-9477-73d6f81455fa-1753414138349-target
      selected: false
      source: '1753412450611'
      sourceHandle: da617f11-ed6f-44ec-9477-73d6f81455fa
      target: '1753414138349'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: iteration
        targetType: llm
      id: 1753414276399-source-1753684009639-target
      selected: false
      source: '1753414276399'
      sourceHandle: source
      target: '1753684009639'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: tool
      id: 1753437328850-source-1753426534118-target
      selected: false
      source: '1753437328850'
      sourceHandle: source
      target: '1753426534118'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: llm
      id: 1753426534118-source-1753436803036-target
      selected: false
      source: '1753426534118'
      sourceHandle: source
      target: '1753436803036'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: variable-aggregator
      id: 1753433531861-source-1753686431084-target
      selected: false
      source: '1753433531861'
      sourceHandle: source
      target: '1753686431084'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: variable-aggregator
      id: 1753437974705-source-1753686431084-target
      selected: false
      source: '1753437974705'
      sourceHandle: source
      target: '1753686431084'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: iteration
        targetType: code
      id: 1753414518300-source-1753687345334-target
      selected: false
      source: '1753414518300'
      sourceHandle: source
      target: '1753687345334'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: tool
      id: 1753414255071-source-1753413225096-target
      selected: false
      source: '1753414255071'
      sourceHandle: source
      target: '1753413225096'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: tool
      id: 1753691720044-source-1753691763954-target
      selected: false
      source: '1753691720044'
      sourceHandle: source
      target: '1753691763954'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: llm
      id: 1753691763954-source-1753436673318-target
      selected: false
      source: '1753691763954'
      sourceHandle: source
      target: '1753436673318'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: if-else
      id: 1753687345334-source-1753755983769-target
      selected: false
      source: '1753687345334'
      sourceHandle: source
      target: '1753755983769'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 1753755983769-true-1753433531861-target
      selected: false
      source: '1753755983769'
      sourceHandle: 'true'
      target: '1753433531861'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: tool
      id: 1753412973821-source-17537573455000-target
      selected: false
      source: '1753412973821'
      sourceHandle: source
      target: '17537573455000'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: code
      id: 17537573455000-source-17537573455001-target
      selected: false
      source: '17537573455000'
      sourceHandle: source
      target: '17537573455001'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: iteration
      id: 17537573455001-source-1753414276399-target
      selected: false
      source: '17537573455001'
      sourceHandle: source
      target: '1753414276399'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: tool
      id: 17430590082510-1744901730034-1753414138349-target
      selected: false
      source: '17430590082510'
      sourceHandle: '1744901730034'
      target: '1753414138349'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: tool
      id: 17430590082510-1753758073662-1753414138349-target
      source: '17430590082510'
      sourceHandle: '1753758073662'
      target: '1753414138349'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: variable-aggregator
        targetType: variable-aggregator
      id: 1753686431084-source-1750844540721-target
      source: '1753686431084'
      sourceHandle: source
      target: '1750844540721'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: variable-aggregator
      id: 1753684009639-source-1753686431084-target
      source: '1753684009639'
      sourceHandle: source
      target: '1753686431084'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1744878372490-source-1753760026114-target
      source: '1744878372490'
      sourceHandle: source
      target: '1753760026114'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: variable-aggregator
      id: 1753760026114-source-1750844540721-target
      source: '1753760026114'
      sourceHandle: source
      target: '1750844540721'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: variable-aggregator
        targetType: variable-aggregator
      id: 1744878466157-source-1753760065732-target
      source: '1744878466157'
      sourceHandle: source
      target: '1753760065732'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: variable-aggregator
        targetType: if-else
      id: 1753760065732-source-1751602618703-target
      source: '1753760065732'
      sourceHandle: source
      target: '1751602618703'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: tool
      id: 1753755983769-false-1753436915396-target
      source: '1753755983769'
      sourceHandle: 'false'
      target: '1753436915396'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: tool
      id: 1753436915396-source-1753691720044-target
      source: '1753436915396'
      sourceHandle: source
      target: '1753691720044'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: tool
      id: 1753436915396-source-1753426546760-target
      source: '1753436915396'
      sourceHandle: source
      target: '1753426546760'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: start
        type: start
        variables:
        - label: startTime
          max_length: 48
          options: []
          required: true
          type: number
          variable: startTime
        - label: endTime
          max_length: 48
          options: []
          required: true
          type: number
          variable: endTime
        - label: params
          max_length: 9999999
          options: []
          required: false
          type: paragraph
          variable: params
        - label: nodeName
          max_length: null
          options: []
          required: false
          type: paragraph
          variable: nodeName
        - label: edition
          max_length: 48
          options: []
          required: false
          type: paragraph
          variable: edition
      height: 194
      id: '1741227526517'
      position:
        x: 30
        y: 302
      positionAbsolute:
        x: 30
        y: 302
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: æœåŠ¡åå’ŒPodå‡ä¸ºç©ºï¼Œæ— æ³•åˆ†ææ ¹å› ã€‚
        title: unsupport alert
        type: template-transform
        variables: []
      height: 54
      id: '1741592094819'
      position:
        x: 942
        y: 302
      positionAbsolute:
        x: 942
        y: 302
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1741592094819'
          - output
          variable: output
        selected: false
        title: End
        type: end
      height: 90
      id: '1741592144815'
      position:
        x: 1246
        y: 302
      positionAbsolute:
        x: 1246
        y: 302
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: empty
            id: 22866ae7-2bfa-47e9-9c19-d31e8b63001f
            value: ''
            varType: string
            variable_selector:
            - '1742807803325'
            - pod
          - comparison_operator: empty
            id: add89997-787b-4d71-a187-3e9f8e8f25a3
            value: ''
            varType: string
            variable_selector:
            - '1742807803325'
            - service
          - comparison_operator: empty
            id: 92ba41ac-2567-4509-a249-0a520408d145
            value: ''
            varType: string
            variable_selector:
            - '1742807803325'
            - nodeName
          - comparison_operator: empty
            id: 95786764-d469-4d88-af11-54420e537571
            value: ''
            varType: string
            variable_selector:
            - '1742807803325'
            - containerId
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: alert instance info
        type: if-else
      height: 204
      id: '1742453019576'
      position:
        x: 638
        y: 302
      positionAbsolute:
        x: 638
        y: 302
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\ndef get_value(data, keys): \n    for key in keys: \n \
          \       value = data.get(key) \n        if value is not None: \n       \
          \     return value \n    return \"\" \n\ndef main(arg: str, node: str) ->\
          \ dict:\n    data = json.loads(arg) \n    detail_str = data.get(\"detail\"\
          , \"\")\n    detail = json.loads(detail_str) if detail_str else {}\n   \
          \ description = detail.get(\"description\", \"\")\n    lines = description.split(\"\
          \\n\")\n    raw_tags = data.get(\"raw_tags\", {})\n    try:\n        labels_line\
          \ = lines[1]\n        start = labels_line.index(\"[\") + 1\n        end\
          \ = labels_line.index(\"]\")\n        map_content = labels_line[start:end]\n\
          \        pairs = map_content.split()\n        labels_dict = {pair.split(\"\
          :\", 1)[0]: pair.split(\":\", 1)[1] for pair in pairs}\n        source_from\
          \ = labels_dict.get(\"source_from\", \"\")\n    except (IndexError, ValueError):\n\
          \      source_from = \"\"\n\n    return { \n        \"alertName\": get_value(data,\
          \ [\"alertname\", \"alertName\", \"alert_name\"]),\n        \"service\"\
          : get_value(data, [\"svc_name\", \"service\"]), \n        \"endpoint\":\
          \ get_value(data, [\"endpoint\", \"content_key\"]), \n        \"pod\": get_value(data,\
          \ [\"pod\", \"src_pod\", \"pod_name\"]), \n        \"namespace\": get_value(data,\
          \ [\"namespace\", \"src_namespace\"]),\n        \"pid\": get_value(data,\
          \ [\"pid\"]),\n        \"containerId\": get_value(data, [\"containerId\"\
          ]),\n        \"nodeName\": node if node else get_value(data, [\"node\",\
          \ \"src_node\", \"node_name\", \"nodeName\"]),\n        \"sourceFrom\":\
          \ source_from,\n        \"alertEventId\": get_value(data, [\"alertEventId\"\
          ]),\n        \"comm\": get_value(raw_tags, [\"comm\"]),\n        \"workloadName\"\
          : get_value(raw_tags, [\"workload_name\"])\n    }"
        code_language: python3
        desc: ''
        outputs:
          alertEventId:
            children: null
            type: string
          alertName:
            children: null
            type: string
          comm:
            children: null
            type: string
          containerId:
            children: null
            type: string
          endpoint:
            children: null
            type: string
          namespace:
            children: null
            type: string
          nodeName:
            children: null
            type: string
          pid:
            children: null
            type: string
          pod:
            children: null
            type: string
          service:
            children: null
            type: string
          sourceFrom:
            children: null
            type: string
          workloadName:
            children: null
            type: string
        selected: false
        title: get alert event label info
        type: code
        variables:
        - value_selector:
          - '1741227526517'
          - params
          variable: arg
        - value_selector:
          - '1741227526517'
          - nodeName
          variable: node
      height: 54
      id: '1742807803325'
      position:
        x: 334
        y: 302
      positionAbsolute:
        x: 334
        y: 302
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        classes:
        - id: '1744901730034'
          name: è¯·æ±‚é”™è¯¯ç‡
        - id: '1744901735377'
          name: æ—¥å¿—é”™è¯¯æ•°
        - id: '1745391097407'
          name: å…¶ä»–
        - id: '1753758073662'
          name: è¿›ç¨‹ä¸æ´»è·ƒ/æœåŠ¡ä¸å¯ç”¨
        desc: ''
        instruction: ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½å‘Šè­¦åˆ†ç±»åŠ©æ‰‹ã€‚ä½ çš„ä»»åŠ¡æ˜¯å¯¹ç»™å®šçš„è­¦æŠ¥äº‹ä»¶è¿›è¡Œåˆ†ç±»ã€‚
        instructions: ''
        isInIteration: true
        iteration_id: '1741497176064'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: /models/qwen2.5-32B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        query_variable_selector:
        - '1742807803325'
        - alertName
        selected: false
        title: alert event cls
        topics: []
        type: question-classifier
        vision:
          enabled: false
      height: 240
      id: '17430590082510'
      position:
        x: 1550
        y: 928
      positionAbsolute:
        x: 1550
        y: 928
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Query condition(clickhouse where clause).
            ja_JP: Query condition(clickhouse where clause).
            pt_BR: Query condition(clickhouse where clause).
            zh_Hans: æŸ¥è¯¢æ¡ä»¶ï¼ˆclickhouse whereå­å¥ï¼‰
          label:
            en_US: Query condition(clickhouse where clause).
            ja_JP: Query condition(clickhouse where clause).
            pt_BR: Query condition(clickhouse where clause).
            zh_Hans: æŸ¥è¯¢æ¡ä»¶ï¼ˆclickhouse whereå­å¥ï¼‰
          llm_description: Query condition(clickhouse where clause).
          max: null
          min: null
          name: query
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Start timestamp in microseconds
            ja_JP: Start timestamp in microseconds
            pt_BR: Start timestamp in microseconds
            zh_Hans: æŸ¥è¯¢å¼€å§‹æ—¶é—´ï¼ˆå¾®ç§’ï¼‰
          label:
            en_US: Start Time
            ja_JP: Start Time
            pt_BR: Start Time
            zh_Hans: å¼€å§‹æ—¶é—´
          llm_description: Microsecond timestamp for start time
          max: null
          min: null
          name: startTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: End timestamp in microseconds
            ja_JP: End timestamp in microseconds
            pt_BR: End timestamp in microseconds
            zh_Hans: æŸ¥è¯¢ç»“æŸæ—¶é—´ï¼ˆå¾®ç§’ï¼‰
          label:
            en_US: End Time
            ja_JP: End Time
            pt_BR: End Time
            zh_Hans: ç»“æŸæ—¶é—´
          llm_description: Microsecond timestamp for end time
          max: null
          min: null
          name: endTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        params:
          endTime: ''
          query: ''
          startTime: ''
        provider_id: apo_select
        provider_name: apo_select
        provider_type: builtin
        selected: false
        title: æŸ¥è¯¢å…¨é‡æ—¥å¿—
        tool_configurations: {}
        tool_label: æŸ¥è¯¢å…¨é‡æ—¥å¿—
        tool_name: æŸ¥è¯¢å…¨é‡æ—¥å¿—
        tool_parameters:
          endTime:
            type: variable
            value:
            - '1741227526517'
            - endTime
          pageNum:
            type: constant
            value: 1
          pageSize:
            type: constant
            value: 999
          query:
            type: mixed
            value: '{{#1744878352649.query#}}'
          startTime:
            type: variable
            value:
            - '1741227526517'
            - startTime
        type: tool
      height: 54
      id: '1744878296971'
      position:
        x: 5338
        y: 1058
      positionAbsolute:
        x: 5338
        y: 1058
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main(pod: str, service: str, node: str, pid: str, containerId:\
          \ str, sourceFrom: str) -> dict:\n    query = ''\n    if len(containerId)\
          \ > 0 and len(node) > 0:\n        query = f\"\"\"container_id='{containerId}'\
          \ and host_name='{node}'\"\"\"\n    elif len(pod) > 0 and len(service) >\
          \ 0:\n        query = f\"\"\"k8s_pod_name='{pod}' and container_name='{service}'\"\
          \"\"\n    elif len(pod) > 0:\n        query = f\"\"\"k8s_pod_name='{pod}'\"\
          \"\"\n    elif len(node) > 0 and len(pid) > 0:\n        query = f\"\"\"\
          host_name='{node}' and pid='{pid}'\"\"\"\n    elif len(service) > 0:\n \
          \       query = f\"\"\"container_name='{service}'\"\"\"\n    elif len(containerId)\
          \ > 0:\n        query = f\"\"\"container_id='{containerId}'\"\"\"\n    elif\
          \ len(node) > 0:\n        query = f\"\"\"host_name='{node}'\"\"\"\n\n  \
          \  if len(sourceFrom) > 0:\n        if len(query) > 0:\n            query\
          \ += f\" and source='{sourceFrom}'\"\n        else:\n            query =\
          \ f\"\"\"source='{sourceFrom}'\"\"\"\n            \n    return {\n     \
          \   \"query\": query,\n    }"
        code_language: python3
        desc: ''
        outputs:
          query:
            children: null
            type: string
        selected: false
        title: è·å–æŸ¥è¯¢æ¡ä»¶
        type: code
        variables:
        - value_selector:
          - '1742807803325'
          - pod
          variable: pod
        - value_selector:
          - '1742807803325'
          - service
          variable: service
        - value_selector:
          - '1742807803325'
          - nodeName
          variable: node
        - value_selector:
          - '1742807803325'
          - pid
          variable: pid
        - value_selector:
          - '1742807803325'
          - containerId
          variable: containerId
        - value_selector:
          - '1742807803325'
          - sourceFrom
          variable: sourceFrom
      height: 54
      id: '1744878352649'
      position:
        x: 5034
        y: 1058
      positionAbsolute:
        x: 5034
        y: 1058
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: /models/qwen2.5-32B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 615ece65-9193-4bad-a375-d51b67dbaafc
          role: system
          text: ä½ æ˜¯ä¸€ä½å¯è§‚æµ‹æ€§é¢†åŸŸæ™ºèƒ½åŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†æè§£å†³é—®é¢˜ã€‚
        - id: cc52b45f-d678-4d55-98d1-7ed48f7b4091
          role: user
          text: '# ç›®çš„

            æ ¹æ®å¼‚å¸¸podï¼Œç»“åˆç›¸å…³æ—¥å¿—ï¼Œåˆ†æå‘Šè­¦{{#1742807803325.alertName#}}

            äº§ç”Ÿçš„åŸå› å’Œå¯¹{{#1742807803325.service#}}

            æˆ–{{#1742807803325.pod#}}

            çš„å½±å“ï¼Œæœ€åæ¨æµ‹æ˜¯å†…éƒ¨é—®é¢˜è¿˜æ˜¯å¤–éƒ¨é—®é¢˜ã€‚


            # æ•°æ®

            æ•°æ®åŒ…æ‹¬ï¼š

            1. å¯¹åº”æ—¶é—´å†…çš„erroræ—¥å¿—{{#1744901266309.result#}}


            # åˆ†ææ€è·¯

            ç»“åˆå¼‚å¸¸podså’Œæ—¥å¿—ï¼Œæ‰¾åˆ°å‡ºé”™podså’Œå¯¹åº”çš„é”™è¯¯å†…å®¹ï¼Œåˆ†æé”™è¯¯åŸå› ã€‚å¦‚æœæ²¡æœ‰å¼‚å¸¸æ—¥å¿—åˆ™æç¤ºç”¨æˆ·ä¸»åŠ¨æŸ¥çœ‹ç›¸å…³æ—¶é—´å†…çš„æ—¥å¿—å†…å®¹ï¼Œå¹¶æé†’ç”¨æˆ·é…ç½®æ—¥å¿—è§£æè§„åˆ™ã€‚


            # æ³¨æ„äº‹é¡¹

            - æ—¶é—´å•ä½å‡ä¸ºå¾®ç§’


            # è¾“å‡ºå†…å®¹

            å‘Šè­¦{{#1742807803325.alertName#}}

            äº§ç”Ÿçš„åŸå› æ˜¯xxï¼Œå¯¹

            {{#1742807803325.pod#}}æˆ–{{#1742807803325.service#}}

            çš„å½±å“æ˜¯ï¼šå“ªäº›podså‡ºé”™ï¼Œå…·ä½“æ—¥å¿—ä¸ºxxã€‚


            è§£å†³æ–¹æ¡ˆï¼šxx'
        selected: false
        title: æ€»ç»“æ—¥å¿—é”™è¯¯
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1744878372490'
      position:
        x: 6998
        y: 1058
      positionAbsolute:
        x: 6998
        y: 1058
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: string
        selected: false
        title: èšåˆåˆ†ææ€»ç»“
        type: variable-aggregator
        variables:
        - - '1744878372490'
          - text
        - - '1753686431084'
          - output
      height: 131
      id: '1744878466157'
      position:
        x: 7910
        y: 628
      positionAbsolute:
        x: 7910
        y: 628
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1744878466157'
          - output
          variable: text
        - value_selector:
          - '1751602453263'
          - text
          variable: output
        - value_selector:
          - '1751004239868'
          - text
          variable: alertDirection
        selected: false
        title: ç»“æŸ
        type: end
      height: 142
      id: '1744878476249'
      position:
        x: 10662
        y: 963
      positionAbsolute:
        x: 10662
        y: 963
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import re\nimport json\nfrom typing import List, Dict, Tuple, Set,\
          \ Optional\n\n\nclass ServiceUnavailableDetector:\n    \"\"\"æœåŠ¡ä¸å¯ç”¨æ—¥å¿—æ£€æµ‹å™¨\"\
          \"\"\n    \n    def __init__(self):\n        self.patterns = self._initialize_patterns()\n\
          \        self.compiled_patterns = self._compile_patterns()\n    \n    def\
          \ _initialize_patterns(self) -> List[Dict]:\n        \"\"\"åˆå§‹åŒ–é”™è¯¯æ¨¡å¼åº“\"\"\"\
          \n        patterns = []\n        \n        # è¿æ¥é”™è¯¯ - è‹±æ–‡ (å¤–éƒ¨é—®é¢˜)\n        connection_patterns_en\
          \ = [\n            r\"connection\\s+refused\",\n            r\"connection\\\
          s+reset\",\n            r\"connection\\s+closed\",\n            r\"connection\\\
          s+aborted\",\n            r\"connection\\s+failed\",\n            r\"connection\\\
          s+timeout\",\n            r\"can['\\s]*t\\s+connect\",\n            r\"\
          unable\\s+to\\s+connect\",\n            r\"failed\\s+to\\s+connect\",\n\
          \            r\"connect\\s+error\",\n            r\"network\\s+unreachable\"\
          ,\n            r\"host\\s+unreachable\",\n            r\"no\\s+route\\s+to\\\
          s+host\",\n            r\"connection\\s+timed\\s+out\",\n        ]\n   \
          \     \n        for pattern in connection_patterns_en:\n            patterns.append({\n\
          \                \"pattern\": pattern,\n                \"category\": \"\
          connection_error\",\n                \"source\": \"external\",\n       \
          \         \"language\": \"english\",\n                \"case_sensitive\"\
          : False,\n                \"description\": \"Connection related errors -\
          \ external\"\n            })\n        \n        # è¿æ¥é”™è¯¯ - ä¸­æ–‡ (å¤–éƒ¨é—®é¢˜)\n   \
          \     connection_patterns_cn = [\n            r\"è¿æ¥è¢«æ‹’ç»\",\n            r\"\
          è¿æ¥å¤±è´¥\",\n            r\"è¿æ¥è¶…æ—¶\",\n            r\"è¿æ¥è¢«é‡ç½®\",\n            r\"\
          è¿æ¥ä¸­æ–­\",\n            r\"æ— æ³•è¿æ¥\",\n            r\"æ‹’ç»è¿æ¥\",\n            r\"\
          ç½‘ç»œä¸å¯è¾¾\",\n            r\"ä¸»æœºä¸å¯è¾¾\",\n        ]\n        \n        for pattern\
          \ in connection_patterns_cn:\n            patterns.append({\n          \
          \      \"pattern\": pattern,\n                \"category\": \"connection_error\"\
          ,\n                \"source\": \"external\",\n                \"language\"\
          : \"chinese\",\n                \"case_sensitive\": False,\n           \
          \     \"description\": \"Connection related errors in Chinese - external\"\
          \n            })\n        \n        # è¶…æ—¶é”™è¯¯ (æ··åˆé—®é¢˜ - å¯èƒ½æ˜¯å†…éƒ¨ä¹Ÿå¯èƒ½æ˜¯å¤–éƒ¨)\n      \
          \  timeout_patterns = [\n            r\"timeout\",\n            r\"timed\\\
          s+out\",\n            r\"time\\s+out\",\n            r\"è¶…æ—¶\",\n        \
          \    r\"è¯·æ±‚è¶…æ—¶\",\n            r\"å“åº”è¶…æ—¶\",\n            r\"read\\s+timeout\"\
          ,\n            r\"write\\s+timeout\",\n            r\"connect\\s+timeout\"\
          ,\n            r\"socket\\s+timeout\",\n            r\"request\\s+timeout\"\
          ,\n            r\"response\\s+timeout\",\n            r\"execution\\s+timeout\"\
          ,\n            r\"operation\\s+timeout\",\n        ]\n        \n       \
          \ for pattern in timeout_patterns:\n            patterns.append({\n    \
          \            \"pattern\": pattern,\n                \"category\": \"timeout_error\"\
          ,\n                \"source\": \"mixed\",\n                \"language\"\
          : \"general\",\n                \"case_sensitive\": False,\n           \
          \     \"description\": \"Timeout related errors - mixed source\"\n     \
          \       })\n        \n        # æœåŠ¡ä¸å¯ç”¨é”™è¯¯ (å¤–éƒ¨é—®é¢˜)\n        unavailable_patterns\
          \ = [\n            r\"service\\s+unavailable\",\n            r\"server\\\
          s+unavailable\",\n            r\"unavailable\",\n            r\"not\\s+available\"\
          ,\n            r\"æœåŠ¡ä¸å¯ç”¨\",\n            r\"æœåŠ¡å™¨ä¸å¯ç”¨\",\n            r\"æš‚æ—¶ä¸å¯ç”¨\"\
          ,\n            r\"temporary\\s+unavailable\",\n            r\"temporarily\\\
          s+unavailable\",\n            r\"503\\s+service\\s+unavailable\",\n    \
          \        r\"backend\\s+unavailable\",\n            r\"upstream\\s+unavailable\"\
          ,\n        ]\n        \n        for pattern in unavailable_patterns:\n \
          \           patterns.append({\n                \"pattern\": pattern,\n \
          \               \"category\": \"unavailable_error\",\n                \"\
          source\": \"external\",\n                \"language\": \"general\",\n  \
          \              \"case_sensitive\": False,\n                \"description\"\
          : \"Service unavailable errors - external\"\n            })\n        \n\
          \        # Panicé”™è¯¯ (å†…éƒ¨é—®é¢˜)\n        panic_patterns = [\n            r\"panic:\"\
          ,\n            r\"panic\\s+error\",\n            r\"fatal\\s+error\",\n\
          \            r\"critical\\s+error\",\n            r\"ä¸¥é‡é”™è¯¯\",\n         \
          \   r\"è‡´å‘½é”™è¯¯\",\n            r\"å´©æºƒ\",\n            r\"crash\",\n        \
          \    r\"segmentation\\s+fault\",\n            r\"stack\\s+overflow\",\n\
          \            r\"out\\s+of\\s+memory\",\n            r\"å†…å­˜ä¸è¶³\",\n       \
          \     r\"æ ˆæº¢å‡º\",\n        ]\n        \n        for pattern in panic_patterns:\n\
          \            patterns.append({\n                \"pattern\": pattern,\n\
          \                \"category\": \"panic_error\",\n                \"source\"\
          : \"internal\",\n                \"language\": \"general\",\n          \
          \      \"case_sensitive\": False,\n                \"description\": \"Panic\
          \ and critical errors - internal\"\n            })\n        \n        #\
          \ HTTPé”™è¯¯ (æ··åˆé—®é¢˜)\n        http_patterns = [\n            r\"5\\d{2}\\s+\\\
          w+\",  # 5xx errors\n            r\"502\\s+bad\\s+gateway\",\n         \
          \   r\"503\\s+service\\s+unavailable\",\n            r\"504\\s+gateway\\\
          s+timeout\",\n            r\"500\\s+internal\\s+server\\s+error\",\n   \
          \         r\"bad\\s+gateway\",\n            r\"gateway\\s+timeout\",\n \
          \           r\"internal\\s+server\\s+error\",\n            r\"ç½‘å…³é”™è¯¯\",\n\
          \            r\"å†…éƒ¨æœåŠ¡å™¨é”™è¯¯\",\n        ]\n        \n        for pattern in\
          \ http_patterns:\n            # æ ¹æ®å…·ä½“é”™è¯¯ç åˆ¤æ–­æ¥æº\n            if any(code in\
          \ pattern for code in [\"500\", \"internal\"]):\n                source\
          \ = \"internal\"\n            elif any(code in pattern for code in [\"502\"\
          , \"503\", \"504\", \"gateway\"]):\n                source = \"external\"\
          \n            else:\n                source = \"mixed\"\n              \
          \  \n            patterns.append({\n                \"pattern\": pattern,\n\
          \                \"category\": \"http_error\",\n                \"source\"\
          : source,\n                \"language\": \"general\",\n                \"\
          case_sensitive\": False,\n                \"description\": \"HTTP error\
          \ codes and messages\"\n            })\n        \n        # ç½‘ç»œé”™è¯¯ (å¤–éƒ¨é—®é¢˜)\n\
          \        network_patterns = [\n            r\"network\\s+error\",\n    \
          \        r\"network\\s+is\\s+unreachable\",\n            r\"dns\\s+resolution\\\
          s+failed\",\n            r\"name\\s+resolution\\s+failed\",\n          \
          \  r\"ç½‘ç»œé”™è¯¯\",\n            r\"ç½‘ç»œä¸å¯è¾¾\",\n            r\"dnsè§£æå¤±è´¥\",\n    \
          \        r\"åŸŸåè§£æå¤±è´¥\",\n            r\"socket\\s+error\",\n            r\"\
          tcp\\s+error\",\n            r\"udp\\s+error\",\n        ]\n        \n \
          \       for pattern in network_patterns:\n            patterns.append({\n\
          \                \"pattern\": pattern,\n                \"category\": \"\
          network_error\",\n                \"source\": \"external\",\n          \
          \      \"language\": \"general\",\n                \"case_sensitive\": False,\n\
          \                \"description\": \"Network related errors - external\"\n\
          \            })\n        \n        # æ•°æ®åº“é”™è¯¯ (æ··åˆé—®é¢˜)\n        database_patterns\
          \ = [\n            r\"database\\s+connection\\s+failed\",\n            r\"\
          database\\s+unavailable\",\n            r\"database\\s+timeout\",\n    \
          \        r\"sql\\s+error\",\n            r\"database\\s+error\",\n     \
          \       r\"æ•°æ®åº“è¿æ¥å¤±è´¥\",\n            r\"æ•°æ®åº“ä¸å¯ç”¨\",\n            r\"æ•°æ®åº“è¶…æ—¶\"\
          ,\n            r\"sqlé”™è¯¯\",\n            r\"connection\\s+pool\\s+exhausted\"\
          ,\n            r\"too\\s+many\\s+connections\",\n            r\"max\\s+connections\\\
          s+reached\",\n        ]\n        \n        for pattern in database_patterns:\n\
          \            patterns.append({\n                \"pattern\": pattern,\n\
          \                \"category\": \"database_error\",\n                \"source\"\
          : \"mixed\",\n                \"language\": \"general\",\n             \
          \   \"case_sensitive\": False,\n                \"description\": \"Database\
          \ related errors - mixed source\"\n            })\n        \n        # èµ„æºé”™è¯¯\
          \ (å†…éƒ¨é—®é¢˜)\n        resource_patterns = [\n            r\"out\\s+of\\s+memory\"\
          ,\n            r\"memory\\s+exhausted\",\n            r\"disk\\s+full\"\
          ,\n            r\"no\\s+space\\s+left\",\n            r\"resource\\s+exhausted\"\
          ,\n            r\"å†…å­˜ä¸è¶³\",\n            r\"ç£ç›˜ç©ºé—´ä¸è¶³\",\n            r\"èµ„æºè€—å°½\"\
          ,\n            r\"cpu\\s+limit\\s+exceeded\",\n            r\"memory\\s+limit\\\
          s+exceeded\",\n        ]\n        \n        for pattern in resource_patterns:\n\
          \            patterns.append({\n                \"pattern\": pattern,\n\
          \                \"category\": \"resource_error\",\n                \"source\"\
          : \"internal\",\n                \"language\": \"general\",\n          \
          \      \"case_sensitive\": False,\n                \"description\": \"Resource\
          \ exhaustion errors - internal\"\n            })\n        \n        # è®¤è¯é”™è¯¯\
          \ (æ··åˆé—®é¢˜)\n        auth_patterns = [\n            r\"authentication\\s+failed\"\
          ,\n            r\"authorization\\s+failed\",\n            r\"access\\s+denied\"\
          ,\n            r\"permission\\s+denied\",\n            r\"unauthorized\"\
          ,\n            r\"forbidden\",\n            r\"è®¤è¯å¤±è´¥\",\n            r\"\
          æˆæƒå¤±è´¥\",\n            r\"è®¿é—®è¢«æ‹’ç»\",\n            r\"æƒé™ä¸è¶³\",\n            r\"\
          401\\s+unauthorized\",\n            r\"403\\s+forbidden\",\n        ]\n\
          \        \n        for pattern in auth_patterns:\n            patterns.append({\n\
          \                \"pattern\": pattern,\n                \"category\": \"\
          auth_error\",\n                \"source\": \"mixed\",\n                \"\
          language\": \"general\",\n                \"case_sensitive\": False,\n \
          \               \"description\": \"Authentication and authorization errors\
          \ - mixed source\"\n            })\n        \n        # é€šç”¨é”™è¯¯æ¨¡å¼ï¼ˆè‹±æ–‡/æ•°å­—ï¼‰\n\
          \        generic_error_patterns = [\n            r\"ERROR\",\n         \
          \   r\"ERR\",\n            r\"EXCEPTION\",\n            r\"PANIC\",\n  \
          \          r\"FAIL(?:ED)?\",\n            r\"WRONG\",\n            r\"FATAL\"\
          ,\n            r\"CRITICAL\",\n            r\"BUG\",\n            r\"CRASH(?:ED)?\"\
          ,\n            r\"INTERNAL\\s+ERROR\",\n            r\"NOT\\s+WORKING\"\
          ,\n            r\"BROKEN\",\n            r\"5\\d{2}\",  # HTTP 5xx é”™è¯¯ç \n\
          \            r\"4\\d{2}\",  # HTTP 4xx é”™è¯¯ç \n        ]\n\n        for pattern\
          \ in generic_error_patterns:\n            patterns.append({\n          \
          \      \"pattern\": pattern,\n                \"category\": \"generic_error\"\
          ,\n                \"source\": \"unknown\",\n                \"language\"\
          : \"english\",\n                \"case_sensitive\": False,\n           \
          \     \"description\": \"Generic catch-all English error patterns\"\n  \
          \          })\n\n        # é€šç”¨é”™è¯¯æ¨¡å¼ï¼ˆä¸­æ–‡ï¼‰\n        generic_error_patterns_cn\
          \ = [\n            r\"é”™è¯¯\",           # e.g., ç³»ç»Ÿé”™è¯¯\n            r\"å¤±è´¥\"\
          ,           # e.g., æ“ä½œå¤±è´¥\n            r\"å¼‚å¸¸\",           # e.g., ç¨‹åºå¼‚å¸¸\n\
          \            r\"å´©æºƒ\",           # e.g., ç³»ç»Ÿå´©æºƒ\n            r\"è‡´å‘½\",     \
          \      # e.g., è‡´å‘½é”™è¯¯\n            r\"æ‹’ç»\",           # e.g., æ‹’ç»è®¿é—®\n     \
          \       r\"æ— æ•ˆ\",           # e.g., æ— æ•ˆå‚æ•°\n            r\"æœªçŸ¥é”™è¯¯\",       #\
          \ e.g., æœªçŸ¥é”™è¯¯\n            r\"æœªå®šä¹‰\",         # e.g., è°ƒç”¨æœªå®šä¹‰\n        ]\n\n\
          \        for pattern in generic_error_patterns_cn:\n            patterns.append({\n\
          \                \"pattern\": pattern,\n                \"category\": \"\
          generic_error\",\n                \"source\": \"unknown\",\n           \
          \     \"language\": \"chinese\",\n                \"case_sensitive\": False,\n\
          \                \"description\": \"Generic catch-all Chinese error patterns\"\
          \n            })  \n\n        return patterns\n\n    \n    def _compile_patterns(self)\
          \ -> Dict[str, List[Tuple[re.Pattern, Dict]]]:\n        \"\"\"ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼\"\
          \"\"\n        compiled = {}\n        \n        for pattern_obj in self.patterns:\n\
          \            category = pattern_obj[\"category\"]\n            if category\
          \ not in compiled:\n                compiled[category] = []\n          \
          \  \n            flags = re.IGNORECASE if not pattern_obj[\"case_sensitive\"\
          ] else 0\n            regex = re.compile(pattern_obj[\"pattern\"], flags)\n\
          \            compiled[category].append((regex, pattern_obj))\n        \n\
          \        return compiled\n    \n    def detect_line(self, line: str, line_number:\
          \ int = 0) -> bool:\n        \"\"\"æ£€æµ‹å•è¡Œæ—¥å¿—\"\"\"        \n        for category,\
          \ pattern_list in self.compiled_patterns.items():\n            for regex,\
          \ pattern_obj in pattern_list:\n                if regex.search(line):\n\
          \                   return True\n        \n        return False\n    \n\
          \    def detect_logs(self, logs: List[str]) -> List[Dict]:\n        \"\"\
          \"æ£€æµ‹å¤šè¡Œæ—¥å¿—\"\"\"\n        all_matches = []\n        \n        for i, log in\
          \ enumerate(logs):\n            line = log[\"body\"]\n            if self.detect_line(line,\
          \ i + 1):\n                all_matches.append(log)\n        \n        return\
          \ all_matches\n    \n    def _calculate_confidence(self, line: str, pattern:\
          \ Dict) -> float:\n        \"\"\"è®¡ç®—åŒ¹é…ç½®ä¿¡åº¦\"\"\"\n        base_confidence\
          \ = 1.0\n        \n        # æ ¹æ®ä¸Šä¸‹æ–‡å…³é”®è¯è°ƒæ•´ç½®ä¿¡åº¦\n        context_keywords = {\n\
          \            \"error\": 0.1,\n            \"failed\": 0.1,\n           \
          \ \"exception\": 0.1,\n            \"é”™è¯¯\": 0.1,\n            \"å¤±è´¥\": 0.1,\n\
          \            \"å¼‚å¸¸\": 0.1,\n        }\n        \n        line_lower = line.lower()\n\
          \        for keyword, boost in context_keywords.items():\n            if\
          \ keyword in line_lower:\n                base_confidence += boost\n   \
          \     \n        return min(base_confidence, 2.0)  # æœ€å¤§ç½®ä¿¡åº¦2.0\n    \n   \
          \ def get_statistics(self, matches: List[Dict]) -> Dict:\n        \"\"\"\
          è·å–æ£€æµ‹ç»Ÿè®¡ä¿¡æ¯\"\"\"\n        if not matches:\n            return {\"total\":\
          \ 0, \"by_category\": {}, \"by_language\": {}, \"by_source\": {}}\n    \
          \    \n        stats = {\n            \"total\": len(matches),\n       \
          \     \"by_category\": {},\n            \"by_language\": {},\n         \
          \   \"by_source\": {}\n        }\n        \n        for match in matches:\n\
          \            # æŒ‰ç±»åˆ«ç»Ÿè®¡\n            category = match[\"category\"]\n     \
          \       stats[\"by_category\"][category] = stats[\"by_category\"].get(category,\
          \ 0) + 1\n            \n            # æŒ‰è¯­è¨€ç»Ÿè®¡\n            language = match[\"\
          language\"]\n            stats[\"by_language\"][language] = stats[\"by_language\"\
          ].get(language, 0) + 1\n            \n            # æŒ‰é”™è¯¯æ¥æºç»Ÿè®¡\n          \
          \  source = match[\"source\"]\n            stats[\"by_source\"][source]\
          \ = stats[\"by_source\"].get(source, 0) + 1\n        \n        return stats\n\
          \    \n    def format_results(self, matches: List[Dict], show_details: bool\
          \ = True, group_by: str = \"category\") -> str:\n        \"\"\"\n      \
          \  æ ¼å¼åŒ–æ£€æµ‹ç»“æœ\n        \n        Args:\n            matches: åŒ¹é…ç»“æœåˆ—è¡¨\n     \
          \       show_details: æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯\n            group_by: åˆ†ç»„æ–¹å¼ (\"category\"\
          , \"source\")\n        \"\"\"\n        if not matches:\n            return\
          \ \"æœªæ£€æµ‹åˆ°æœåŠ¡ä¸å¯ç”¨ç›¸å…³æ—¥å¿—\"\n        \n        result = f\"æ£€æµ‹åˆ° {len(matches)} æ¡æœåŠ¡ä¸å¯ç”¨ç›¸å…³æ—¥å¿—:\\\
          n\\n\"\n        \n        if group_by == \"source\":\n            # æŒ‰é”™è¯¯æ¥æºåˆ†ç»„æ˜¾ç¤º\n\
          \            by_source = {}\n            for match in matches:\n       \
          \         source = match[\"source\"]\n                if source not in by_source:\n\
          \                    by_source[source] = []\n                by_source[source].append(match)\n\
          \            \n            # å®šä¹‰æ¥æºæ˜¾ç¤ºåç§°\n            source_names = {\n  \
          \              \"internal\": \"å†…éƒ¨é—®é¢˜ (è‡ªèº«æœåŠ¡)\",\n                \"external\"\
          : \"å¤–éƒ¨é—®é¢˜ (ä¾èµ–æœåŠ¡)\",\n                \"mixed\": \"æ··åˆé—®é¢˜ (éœ€è¿›ä¸€æ­¥åˆ¤æ–­)\"\n     \
          \       }\n            \n            for source, source_matches in by_source.items():\n\
          \                source_name = source_names.get(source, source)\n      \
          \          result += f\"=== {source_name} ({len(source_matches)} æ¡) ===\\\
          n\"\n                \n                if show_details:\n              \
          \      for match in source_matches:\n                        result += f\"\
          \  æ—¥å¿—å†…å®¹: {match['content']}\\n\"\n                        result += f\"\
          \  é”™è¯¯ç±»å‹: {match['category']}\\n\"\n                else:\n             \
          \       result += f\"  åŒ…å« {len(source_matches)} æ¡ç›¸å…³æ—¥å¿—\\n\\n\"\n        \n\
          \        else:\n            # æŒ‰ç±»åˆ«åˆ†ç»„æ˜¾ç¤º\n            by_category = {}\n  \
          \          for match in matches:\n                category = match[\"category\"\
          ]\n                if category not in by_category:\n                   \
          \ by_category[category] = []\n                by_category[category].append(match)\n\
          \            \n            for category, category_matches in by_category.items():\n\
          \                result += f\"=== {category.upper()} ({len(category_matches)}\
          \ æ¡) ===\\n\"\n                \n                if show_details:\n    \
          \                for match in category_matches:\n                      \
          \  result += f\"  æ—¥å¿—å†…å®¹: {match['line_number']}: {match['content']}\\n\"\n\
          \                        result += f\"  é”™è¯¯æ¥æº: {match['source']}\\n\"\n \
          \               else:\n                    result += f\"  åŒ…å« {len(category_matches)}\
          \ æ¡ç›¸å…³æ—¥å¿—\\n\\n\"\n        return result\n\ndef main(log_json: str):\n   \
          \ logs = json.loads(log_json).get(\"data\", {}).get(\"logContents\", {}).get(\"\
          contents\", [])\n    detector = ServiceUnavailableDetector()\n    matches\
          \ = detector.detect_logs(logs)\n    matches = matches[:30]\n    return {\"\
          result\": json.dumps({\"logs\": matches})}"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æå–é”™è¯¯æ—¥å¿—
        type: code
        variables:
        - value_selector:
          - '1744878296971'
          - text
          variable: log_json
      height: 54
      id: '1744901266309'
      position:
        x: 6168
        y: 1076
      positionAbsolute:
        x: 6168
        y: 1076
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1745313576757'
          - output
          variable: output
        selected: false
        title: ç»“æŸ
        type: end
      height: 90
      id: '1745313574375'
      position:
        x: 2158
        y: 386
      positionAbsolute:
        x: 2158
        y: 386
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: æš‚ä¸æ”¯æŒçš„å‘Šè­¦ç±»å‹ï¼š{{ alertName }}
        title: ä¸æ”¯æŒçš„å‘Šè­¦ç±»å‹
        type: template-transform
        variables:
        - value_selector:
          - '1742807803325'
          - alertName
          variable: alertName
      height: 54
      id: '1745313576757'
      position:
        x: 1854
        y: 386
      positionAbsolute:
        x: 1854
        y: 386
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: reportType
            ja_JP: reportType
            pt_BR: reportType
            zh_Hans: æŠ¥å‘Šç±»å‹
          label:
            en_US: reportType
            ja_JP: reportType
            pt_BR: reportType
            zh_Hans: æŠ¥å‘Šç±»å‹
          llm_description: alert report type
          max: null
          min: null
          name: reportType
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: reportType
            ja_JP: reportType
            pt_BR: tags
            zh_Hans: æŠ¥å‘Šæ ‡ç­¾ï¼ˆç”¨äºæ£€ç´¢ï¼‰
          label:
            en_US: tags
            ja_JP: tags
            pt_BR: tags
            zh_Hans: æŠ¥å‘Šæ ‡ç­¾ï¼ˆç”¨äºæ£€ç´¢ï¼‰
          llm_description: alert report tags
          max: null
          min: null
          name: tags
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: overview
            ja_JP: overview
            pt_BR: overview
            zh_Hans: å‘Šè­¦äº‹ä»¶æ€»è§ˆ
          label:
            en_US: overview
            ja_JP: overview
            pt_BR: overview
            zh_Hans: å‘Šè­¦äº‹ä»¶æ€»è§ˆ
          llm_description: overview
          max: null
          min: null
          name: overview
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: topology
            ja_JP: topology
            pt_BR: topology
            zh_Hans: æŠ¥å‘Šç±»å‹
          label:
            en_US: topology
            ja_JP: topology
            pt_BR: topology
            zh_Hans: æ‹“æ‰‘æ•°æ®
          llm_description: topology data
          max: null
          min: null
          name: topology
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: rootCauseAnalysis
            ja_JP: rootCauseAnalysis
            pt_BR: rootCauseAnalysis
            zh_Hans: æ ¹å› åˆ†æç»“è®º
          label:
            en_US: rootCauseAnalysis
            ja_JP: rootCauseAnalysis
            pt_BR: rootCauseAnalysis
            zh_Hans: æ ¹å› åˆ†æç»“è®º
          llm_description: rootCauseAnalysis
          max: null
          min: null
          name: rootCauseAnalysis
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: suggest
            ja_JP: suggest
            pt_BR: suggest
            zh_Hans: å¯è¡ŒåŠ¨æ–¹å‘å»ºè®®
          label:
            en_US: suggest
            ja_JP: suggest
            pt_BR: suggest
            zh_Hans: å¯è¡ŒåŠ¨æ–¹å‘å»ºè®®
          llm_description: suggest
          max: null
          min: null
          name: suggest
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: evidence
            ja_JP: evidence
            pt_BR: evidence
            zh_Hans: æ ¹å› åˆ†æç»“è®º
          label:
            en_US: evidence
            ja_JP: evidence
            pt_BR: evidence
            zh_Hans: éªŒè¯æ•°æ®
          llm_description: evidence
          max: null
          min: null
          name: evidence
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        params:
          evidence: ''
          overview: ''
          reportType: ''
          rootCauseAnalysis: ''
          suggest: ''
          tags: ''
          topology: ''
        provider_id: apo_analysis
        provider_name: apo_analysis
        provider_type: builtin
        selected: false
        title: ç”Ÿæˆå‘Šè­¦åˆ†ææŠ¥å‘Š
        tool_configurations: {}
        tool_label: ç”Ÿæˆå‘Šè­¦åˆ†ææŠ¥å‘Š
        tool_name: Generate alert analysis report
        tool_parameters:
          evidence:
            type: mixed
            value: '{{#1750843294839.result#}}'
          overview:
            type: mixed
            value: '{{#1750840042580.result#}}'
          reportType:
            type: mixed
            value: error
          rootCauseAnalysis:
            type: mixed
            value: '{{#1750843945254.result#}}'
          suggest:
            type: mixed
            value: '{{#1750843922551.result#}}'
          tags:
            type: mixed
            value: '{{#1750839702220.result#}}'
          topology:
            type: mixed
            value: '{{#1750941439700.result#}}'
        type: tool
      height: 54
      id: '1750839691646'
      position:
        x: 9734
        y: 963
      positionAbsolute:
        x: 9734
        y: 963
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\n\ndef main(alertEventId: str) -> dict:\n    data = {\n        \"\
          alertEventId\": alertEventId\n    }\n    return {\n        \"result\": json.dumps(data),\n\
          \    }\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æŠ¥å‘Šæ ‡ç­¾
        type: code
        variables:
        - value_selector:
          - '1742807803325'
          - alertEventId
          variable: alertEventId
      height: 54
      id: '1750839702220'
      position:
        x: 9430
        y: 628
      positionAbsolute:
        x: 9430
        y: 628
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\n\ndef main(timestamp: int, reason: str, pod: str, node: str, pid:\
          \ str, containerId: str, service: str, detail: str) -> dict:\n    data =\
          \ {\n        \"timestamp\": timestamp,\n        \"detail\": detail,\n  \
          \      \"reason\": reason,\n        \"tags\": {\n            \"service\"\
          : service,\n            \"pod\": pod,\n            \"nodeName\": node,\n\
          \            \"pid\": pid,\n            \"containerId\": containerId\n \
          \       }\n    }\n    return {\n        \"result\": json.dumps(data),\n\
          \    }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æŠ¥å‘Šæ€»è§ˆ
        type: code
        variables:
        - value_selector:
          - '1741227526517'
          - endTime
          variable: timestamp
        - value_selector:
          - '1750840340832'
          - text
          variable: reason
        - value_selector:
          - '1742807803325'
          - pod
          variable: pod
        - value_selector:
          - '1741227526517'
          - nodeName
          variable: node
        - value_selector:
          - '1742807803325'
          - pid
          variable: pid
        - value_selector:
          - '1742807803325'
          - containerId
          variable: containerId
        - value_selector:
          - '1742807803325'
          - service
          variable: service
        - value_selector:
          - '1750987639392'
          - text
          variable: detail
      height: 54
      id: '1750840042580'
      position:
        x: 9430
        y: 833
      positionAbsolute:
        x: 9430
        y: 833
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: /models/qwen2.5-32B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: d21add02-97db-4fa3-a6e8-d4387617ce2a
          role: system
          text: ä½ æ˜¯ä¸€ä¸ªå¯è§‚æµ‹æ€§é¢†åŸŸçš„æ™ºèƒ½åŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·è§£å†³é—®é¢˜
        - id: 4ca361b5-08c7-461e-b239-648db7bd6815
          role: user
          text: '#ç›®çš„

            æ ¹æ®åº”ç”¨çš„ç»“è®ºç”Ÿæˆæ ¹å› æ–¹å‘çš„ç»“è®º

            #ç»“è®ºæ•°æ®

            {{#1744878466157.output#}}

            # å—å½±å“æœåŠ¡

            {{#1753760065732.output#}}ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®åˆ™å¿½ç•¥è¿™éƒ¨åˆ†ï¼Œæ— éœ€æç¤ºç”¨æˆ·æ•°æ®ä¸ºç©ºã€‚

            # æ—¶é—´

            {{#1741227526517.endTime#}}

            #æ ¼å¼æ¨¡ç‰ˆå‚è€ƒ

            å‘Šè­¦äº‹ä»¶ç»“è®º

            **äº‹ä»¶æ¦‚è¿°**ï¼š


            ğŸš¨ æ—¥å¿—é”™è¯¯ç‡å‡é«˜ï¼šå‘Šè­¦æ˜¾ç¤ºxxæœåŠ¡çš„æ—¥å¿—é”™è¯¯æ•°/è¯·æ±‚é”™è¯¯ç‡è¶…è¿‡20%ã€‚


            ğŸš¦å—å½±å“æœåŠ¡ï¼šç®€å•æè¿°å—å½±å“çš„æœåŠ¡ï¼Œå¦‚æœæ²¡æœ‰ç›¸å…³æ•°æ®æˆ–è€…æ²¡æœ‰å—å½±å“æœåŠ¡åˆ™ä¸éœ€è¦è¾“å‡ºè¿™éƒ¨åˆ†ã€‚xxæœåŠ¡æˆåŠŸç‡ä¸‹é™äº†xxï¼ŒxxæœåŠ¡è¯·æ±‚é‡ä¸‹é™äº†xxï¼Œé“¾è·¯ä¸­çš„xxå‡ºç°é”™è¯¯ã€‚


            ğŸ—‚ï¸ å¼‚å¸¸æ—¥å¿—ï¼šå…±128ä¸ªã€‚

            **é—®é¢˜åˆ†æ**


            ğŸ•’ æ—¥å¿—æ˜¾ç¤ºxxx

            ğŸŒ æ˜¾ç¤ºxxxå¯èƒ½å­˜åœ¨xxxx

            **è§£å†³æªæ–½**ï¼š


            ğŸ› ï¸ æ‰§è¡Œxxx

            ğŸ”§ æ£€æŸ¥xxx

            **æ—¥å¿—æ•°æ®**ï¼š


            â±ï¸ xxå¼‚å¸¸

            #è¾“å‡ºæ ¼å¼

            æ ¼å¼å‚è€ƒæ¨¡ç‰ˆï¼Œæ³¨æ„æ¢è¡Œå’Œç©ºæ ¼ï¼Œç¡®ä¿æ–‡æœ¬ç¾è§‚è¾“å‡ºï¼Œç®€å•æ˜“æ‡‚(ä½¿ç”¨MarkDownæ ¼å¼çš„æ–‡æœ¬)ï¼Œä¸”ä¸è¦æœ‰å…¶ä»–è¾“å‡º'
        selected: false
        title: æ ¼å¼åŒ–ç»“è®º
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1750840340832'
      position:
        x: 9126
        y: 833
      positionAbsolute:
        x: 9126
        y: 833
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\n\ndef main(logs: str, log_text: str) -> dict:\n    logs_raw = json.loads(logs)\n\
          \    logs_data = {\n        \"type\": \"log\",\n        \"name\": \"åº”ç”¨æ—¥å¿—\"\
          ,\n        \"description\": log_text,\n        \"data\": logs_raw.get(\"\
          logs\", [])\n    }\n\n    return {\n        \"result\": json.dumps({\n \
          \           \"evidence\": [logs_data]\n        }),\n    }\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æ±‡æ€»éªŒè¯æ•°æ®
        type: code
        variables:
        - value_selector:
          - '1750844540721'
          - output
          variable: logs
        - value_selector:
          - '1751251291730'
          - text
          variable: log_text
      height: 54
      id: '1750843294839'
      position:
        x: 9430
        y: 963
      positionAbsolute:
        x: 9430
        y: 963
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import re\ndef main(raw_data: str) -> dict:\n    pattern = r'```json\\\
          n(.*?)\\n```'\n    match = re.search(pattern, raw_data, re.DOTALL)\n\n \
          \   json_str = match.group(1)\n    rootcause = json.loads(json_str)\n  \
          \  return {\n        \"result\": json.dumps(rootcause),\n    }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: å¯è¡ŒåŠ¨æ–¹å‘å»ºè®®
        type: code
        variables:
        - value_selector:
          - '1750846397041'
          - text
          variable: raw_data
      height: 54
      id: '1750843922551'
      position:
        x: 9430
        y: 1093
      positionAbsolute:
        x: 9430
        y: 1093
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import re\ndef main(raw_data: str) -> dict:\n    pattern = r'```json\\\
          n(.*?)\\n```'\n    match = re.search(pattern, raw_data, re.DOTALL)\n\n \
          \   json_str = match.group(1)\n    rootcause = json.loads(json_str)\n  \
          \  return {\n        \"result\": json.dumps(rootcause),\n    }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æ ¹å› æ–¹å‘
        type: code
        variables:
        - value_selector:
          - '1750846407202'
          - text
          variable: raw_data
      height: 54
      id: '1750843945254'
      position:
        x: 9430
        y: 1223
      positionAbsolute:
        x: 9430
        y: 1223
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: string
        selected: false
        title: èšåˆæŸ¥è¯¢æ—¥å¿—
        type: variable-aggregator
        variables:
        - - '1744901266309'
          - result
        - - '1753687345334'
          - error_logs_str
      height: 131
      id: '1750844540721'
      position:
        x: 7606
        y: 628
      positionAbsolute:
        x: 7606
        y: 628
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: /models/qwen2.5-32B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 7694ae43-c744-4e62-9a51-fb4b8d8fe597
          role: system
          text: ä½ æ˜¯ä¸€ä¸ªå¯è§‚æµ‹æ€§é¢†åŸŸçš„æ™ºèƒ½åŠ©æ‰‹
        - id: eaa0bed8-46a2-4c25-aca9-83d0f1105263
          role: user
          text: "#ç›®çš„\nç”Ÿæˆå»ºè®®ç”¨æˆ·çš„è¡ŒåŠ¨å»ºè®®\nå¦‚æ‰§è¡Œå‘½ä»¤ï¼Œæˆ–è€…æ‰¾xxxæ’é™¤é—®é¢˜ï¼Œå¿…é¡»å’Œæ•…éšœæ–¹å‘æœ‰å…³ï¼Œé¿å…ç»™å‡ºå¦‚â€œå»ºè®®æ’æŸ¥å†…éƒ¨é”™è¯¯â€ç±»ä¼¼çš„è¿‡äºå®½æ³›çš„é”™è¯¯ã€‚\n\
            #ç»“è®ºæ•°æ®\n{{#1744878466157.output#}}\n\n#æ ¼å¼æ¨¡ç‰ˆ\n```json\n{\"suggest\": [\n\
            \        {\n            \"action\": \"Add index to payment transaction\
            \ table.\",\n            \"level\": \"high\"\n        },\n        {\n\
            \            \"action\": \"Scale up database node CPU resources.\",\n\
            \            \"level\": \"medium\"\n        }\n    ] }\n```\n#è¾“å‡ºæ ¼å¼\njsonæ ¼å¼æ•°æ®ï¼Œæ ¼å¼å‚æ•°æ¨¡ç‰ˆï¼Œä¸è¦æœ‰å…¶ä»–è¾“å‡º"
        selected: false
        title: å¯è¡ŒåŠ¨æ–¹å‘å»ºè®®
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1750846397041'
      position:
        x: 9126
        y: 1093
      positionAbsolute:
        x: 9126
        y: 1093
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: /models/qwen2.5-32B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 0e0b95f4-141c-413e-8a29-1b17b745495f
          role: system
          text: ä½ æ˜¯ä¸€ä¸ªå¯è§‚æµ‹æ€§é¢†åŸŸçš„æ™ºèƒ½åŠ©æ‰‹
        - id: 954478ee-4fa8-4750-9abf-14abf2e75271
          role: user
          text: "#ç›®çš„\næ ¹æ®åº”ç”¨çš„æ—¥å¿—ç»“è®ºç”Ÿæˆæ—¥å¿—æ ¹å› æ–¹å‘çš„ç»“è®º\n#ç»“è®ºæ•°æ®\n{{#1744878466157.output#}}\n# æ³¨æ„\n\
            typeä¸ºæ•…éšœæ–¹å‘\n1. ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œå¦‚è°ƒç”¨æ•°æ®ã€ç¬¬ä¸‰æ–¹APIå‡ºé”™ï¼ˆtype:thirdpartyï¼‰ï¼›é…ç½®é—®é¢˜ï¼Œå¦‚è·å–é…ç½®æ–‡ä»¶å¤±è´¥ã€é“¾æ¥æ•°æ®åº“å¤±è´¥(type:config)ï¼›ä»£ç å¼‚å¸¸ï¼Œå¦‚æœªæ•è·çš„å¼‚å¸¸ã€æ•°ç»„è¶Šç•Œ(type:code)ï¼›ä¸‹æ¸¸æœåŠ¡é”™è¯¯(type:downstream)ï¼Œå¦‚è°ƒç”¨ä¸‹æ¸¸æœåŠ¡å‡ºé”™ã€ä¸‹æ¸¸è¿”å›500é”™è¯¯ç ï¼›ç³»ç»Ÿèµ„æºå¼‚å¸¸ï¼Œå¦‚å†…å­˜æˆ–CPUä½¿ç”¨è¿‡å¤š(type:system)ï¼Œè‡ªèº«å‡ºç°é”™è¯¯ï¼ˆtype:selfï¼‰ï¼Œå¦‚æ³¨å…¥æ•…éšœã€å‡ºç°å¼‚å¸¸ï¼Œæ¯ä¸ªæ–¹å‘ç›´ç»™ä¸€ä¸ªç»“è®ºå³å¯ï¼Œä¸æ¶‰åŠåˆ°æ–¹å‘ä¸è¦ç»™å‡ºï¼Œä¸è¦é‡å¤ã€‚ä¸»è¦æ ¹å› æ–¹å‘å¿…é¡»å’Œmajorç»“è®ºä¿æŒä¸€è‡´ï¼Œä¸è¦ä¸ç»Ÿä¸€ã€‚\n\
            2. ä¸”å¿…é¡»ç»™ä¸€ä¸ªæœ‰é—®é¢˜çš„æ–¹å‘(levelä¸ºmajor)\n3. åˆ—è¡¨å¿…é¡»æŒ‰ç…§ç­‰çº§æ’åºlevelä»é«˜åˆ°ä½ç»´ï¼ˆmajor,minor,normalï¼‰\n\
            4. causeå†…å®¹åªèƒ½ä¸ºç¬¬ä¸‰æ–¹ä¾èµ–é”™è¯¯ï¼Œé…ç½®é—®é¢˜ï¼Œä»£ç å¼‚å¸¸ï¼Œä¸‹æ¸¸æœåŠ¡è°ƒç”¨é”™è¯¯ï¼Œç³»ç»Ÿèµ„æº\n#æ ¼å¼æ¨¡ç‰ˆ\n```json\n{\n    \
            \    \"cause\": \"ä¸»è¦åŸæ ¹å› æ–¹å‘\",\n        \"other\": [\n            {\n  \
            \              \"reason\": \"\",\n                \"type\": \"thirdparty\"\
            ,\n                \"level\": \"major/minor/normal\"\n            },\n\
            \            {\n                \"reason\": \"\",\n                \"\
            type\": \"code\",\n                \"level\": \"minor\"\n            },\n\
            \            {\n                \"reason\": \"\",\n                \"\
            type\": \"config\",\n                \"level\": \"normal\"\n         \
            \   },\n            {\n                \"reason\": \"\",\n           \
            \     \"type\": \"downstream\",\n                \"level\": \"normal\"\
            \n            },\n            {\n                \"reason\": \"\",\n \
            \               \"type\": \"system\",\n                \"level\": \"normal\"\
            \n            }\n        ]\n    }\n```\n#è¾“å‡ºæ ¼å¼\ntypeåªèƒ½ä¸ºç¬¬ä¸‰æ–¹ä¾èµ–ï¼ˆthirdpartyï¼‰ï¼Œé…ç½®é—®é¢˜(config)ï¼Œä»£ç å¼‚å¸¸(code)ï¼Œä¸‹æ¸¸æœåŠ¡é”™è¯¯(downstream)ï¼Œç³»ç»Ÿèµ„æºå¼‚å¸¸(system)è¿™å‡ ç§ï¼Œä¸è¦æœ‰å…¶ä»–å†…å®¹\n\
            jsonæ ¼å¼æ•°æ®ï¼Œæ ¼å¼å‚æ•°æ¨¡ç‰ˆï¼Œä¸è¦æœ‰å…¶ä»–è¾“å‡º"
        selected: false
        title: æ ¹å› æ–¹å‘ç»“è®º
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1750846407202'
      position:
        x: 9126
        y: 1223
      positionAbsolute:
        x: 9126
        y: 1223
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import requests\nimport json\n\n\ndef get_red(query_params):\n    response\
          \ = requests.get(\n        \"http://apo-backend-svc:8080\" + \"/api/dataplane/redcharts\"\
          , params=query_params\n    )\n    if response.status_code != 200 or len(response.json()[\"\
          results\"]) == 0:\n        return {}\n    metrics = {}\n    metrics[\"latency\"\
          ] = response.json()[\"results\"][0][\"timeseries\"][0][\"chart\"]\n    metrics[\"\
          errorRate\"] = response.json()[\"results\"][1][\"timeseries\"][0][\"chart\"\
          ]\n    metrics[\"tps\"] = response.json()[\"results\"][2][\"timeseries\"\
          ][0][\"chart\"]\n    return metrics\n\n\n\ndef get_topology(service, cluster,\
          \ start_time, end_time) -> str:\n    params = {\n        \"service\": service,\n\
          \        \"cluster\": cluster,\n        \"startTime\": start_time,\n   \
          \     \"endTime\": end_time,\n    }\n    resp = requests.get(\n        \"\
          http://apo-backend-svc:8080\" + \"/api/dataplane/topology\", params=params\n\
          \    )\n    res = {}\n\n    query_params = {\"startTime\": start_time, \"\
          endTime\": end_time, \"service\": service}\n    metrics = get_red(query_params)\n\
          \    res[\"current\"] = {\n        \"service\": service,\n        \"description\"\
          : \"\",\n        \"metrics\": metrics,\n    }\n\n    if resp.status_code\
          \ == 200 and resp.json()[\"msg\"] == \"\":\n        list = resp.json()\n\
          \        result = {}\n        for item in list[\"results\"] or []:\n   \
          \         if item[\"name\"] == service:\n                result = item\n\
          \n        parents = []\n        for p_svc in result[\"parents\"] or []:\n\
          \            query_params = {\n                \"startTime\": start_time,\n\
          \                \"endTime\": end_time,\n                \"service\": p_svc,\n\
          \            }\n            metrics = get_red(query_params)\n          \
          \  if len(metrics) == 0:\n                continue\n            parents.append(\n\
          \                {\n                    \"service\": p_svc,\n          \
          \          \"description\": \"\",\n                    \"metrics\": metrics,\n\
          \                }\n            )\n\n        children = []\n        for\
          \ c_svc in result[\"children\"] or []:\n            query_params = {\n \
          \               \"startTime\": start_time,\n                \"endTime\"\
          : end_time,\n                \"service\": c_svc,\n            }\n      \
          \      metrics = get_red(query_params)\n            if len(metrics) == 0:\n\
          \                continue\n            children.append(\n              \
          \  {\n                    \"service\": c_svc,\n                    \"description\"\
          : \"\",\n                    \"metrics\": metrics,\n                }\n\
          \            )\n\n        res[\"children\"] = children\n        res[\"parents\"\
          ] = parents\n        return json.dumps(res)\n\n\ndef main(service: str,\
          \ startTime: int, endTime: int) -> dict:\n    try:\n      rc = get_topology(service,\
          \ \"\", startTime, endTime)\n    except Exception:\n        rc = \"{}\"\n\
          \    if rc == None:\n        rc = \"{}\"\n    return {\n        \"result\"\
          : rc,\n    }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: è·å–æ‹“æ‰‘
        type: code
        variables:
        - value_selector:
          - '1742807803325'
          - service
          variable: service
        - value_selector:
          - '1741227526517'
          - startTime
          variable: startTime
        - value_selector:
          - '1741227526517'
          - endTime
          variable: endTime
      height: 54
      id: '1750941439700'
      position:
        x: 9430
        y: 1317
      positionAbsolute:
        x: 9430
        y: 1317
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: /models/qwen2.5-32B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 45ec55b5-ae91-45b8-989c-83f81cee1712
          role: system
          text: ä½ æ˜¯ä¸€ä¸ªå¯è§‚æµ‹æ€§é¢†åŸŸçš„æ™ºèƒ½åŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·è§£å†³é—®é¢˜
        - id: 2832e05f-6966-49d9-9697-77bde92736a9
          role: user
          text: "#ç›®çš„\næ ¹æ®åº”ç”¨çš„ç»“è®ºç”Ÿæˆå½“å‰æƒ…å†µçš„æè¿°\nä½¿ç”¨ç»“è®ºå†…çš„æ•°æ®ï¼Œå›ç­”ç®€æ´æ˜“æ‡‚\n#ç»“è®ºæ•°æ®\nå‘Šè­¦äº‹ä»¶{{#1742807803325.alertName#}}\n\
            å‘Šè­¦äº‹ä»¶åˆ†æç»“è®º{{#1744878466157.output#}}\nå—å½±å“æœåŠ¡æ€»ç»“{{#1753760065732.output#}}ï¼Œå¦‚æœå—å½±å“æœåŠ¡æ€»ç»“ä¸ºç©ºåˆ™å¿½ç•¥ï¼Œä¸éœ€è¦æè¿°å—å½±å“æœåŠ¡ç›¸å…³å†…å®¹ï¼Œä¹Ÿæ— éœ€æç¤ºç”¨æˆ·è¯¥æ•°æ®ä¸ºç©ºã€‚\n\
            # æ—¶é—´\n{{#1741227526517.endTime#}}\n#æ ¼å¼æ¨¡ç‰ˆå‚è€ƒ\nå‘Šè­¦æŠ¥äº‹ä»¶ç»“è®º \n**äº‹ä»¶æ¦‚è¿°**ï¼š\næœåŠ¡XXXåœ¨XXæ—¶é—´çŸ­å†…å‡ºç°XXXå‘Šè­¦\
            \ (ç®€æ´ï¼Œä¸è¦æœ‰å…¶ä»–å†…å®¹)\n**å—å½±å“æœåŠ¡**\nç®€å•æè¿°å—å½±å“çš„æœåŠ¡ï¼Œå¦‚æœæ²¡æœ‰ç›¸å…³æ•°æ®ä¸éœ€è¦è¾“å‡ºâ€œå—å½±å“æœåŠ¡â€è¿™éƒ¨åˆ†ã€‚xxæœåŠ¡æˆåŠŸç‡ä¸‹é™äº†xxï¼ŒxxæœåŠ¡è¯·æ±‚é‡ä¸‹é™äº†xxï¼Œé“¾è·¯ä¸­çš„xxå‡ºç°é”™è¯¯ã€‚\n\
            **é—®é¢˜åˆ†æ**\nåˆæ­¥åˆ†ææ˜¯XXXæ–¹å‘ï¼ˆå¦‚æœæœ‰å…·ä½“æ˜¯è‡ªèº«è¿˜æ˜¯ä¸‹æ¸¸æ–¹å‘ï¼Œè¯·ç»™å‡ºæ–¹å‘æè¿°ï¼‰ï¼Œä¸è¦æœ‰å…¶ä»–å†…å®¹ï¼Œç»™å‡ºæ–¹å‘å³å¯\n**è§£å†³æªæ–½**ï¼š\n\
            - æ‰§è¡ŒXXXXå‘½ä»¤ï¼ˆå¿…é¡»å’Œæ•…éšœæ–¹å‘æœ‰å…³ï¼Œé¿å…ç»™å‡ºè¿‡äºå®½æ³›çš„å»ºè®®ï¼Œå¦‚â€œå»ºè®®æ’æŸ¥å†…éƒ¨é”™è¯¯â€ï¼‰\n\n#è¾“å‡ºæ ¼å¼\næ ¼å¼å‚è€ƒæ¨¡ç‰ˆï¼Œæ³¨æ„æ¢è¡Œå’Œç©ºæ ¼ï¼Œç¡®ä¿æ–‡æœ¬ç¾è§‚è¾“å‡ºï¼Œç®€å•æ˜“æ‡‚(ä½¿ç”¨MarkDownæ ¼å¼çš„æ–‡æœ¬)ï¼Œä¸”ä¸è¦æœ‰å…¶ä»–è¾“å‡º"
        selected: false
        title: æ€»ç»“
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1750987639392'
      position:
        x: 8822
        y: 833
      positionAbsolute:
        x: 8822
        y: 833
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: /models/qwen2.5-32B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: d33542e3-ac5c-48f1-970b-fa7ab0ffd0ef
          role: system
          text: ''
        - id: a070588b-7b1e-453e-8994-1e1bb6b4593c
          role: user
          text: '#ç›®çš„

            ä»æ•…éšœç»“è®ºä¸­æå–æ•…éšœæ–¹å‘

            # æ³¨æ„

            æ ¹æ®ç»“è®ºçš„å†…å®¹åˆ’åˆ†æ•…éšœæ–¹å‘


            #ç»“è®ºæ•°æ®

            {{#1744878466157.output#}}

            #è¾“å‡ºå†…å®¹

            æ•…éšœæ–¹å‘ï¼Œåªéœ€è¾“å‡ºå‡ ä¸ªå­—çš„æ•…éšœæ–¹å‘æè¿° ï¼ˆå¦‚ç½‘ç»œæ–¹å‘ï¼Œä¸‹æ¸¸ä¾èµ–é—®é¢˜ï¼Œcpuæ–¹å‘ï¼Œ è‡ªèº«é—®é¢˜ï¼Œä¸‹æ¸¸å‡ºé”™å¯¼è‡´ç­‰ï¼‰'
        selected: false
        title: LLM 8
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1751004239868'
      position:
        x: 10342
        y: 963
      positionAbsolute:
        x: 10342
        y: 963
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: /models/qwen2.5-32B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: d3326874-756a-4db9-9634-3725cf97b6e7
          role: system
          text: ä½ æ˜¯ä¸€ä¸ªå¯è§‚æµ‹æ€§é¢†åŸŸæ™ºèƒ½åŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·è§£å†³é—®é¢˜
        - id: 0750954d-5470-459a-b0d2-06b381addbaa
          role: user
          text: '# ç›®çš„

            è¾“å‡ºå½“å‰æ—¥å¿—æ•°æ®çš„æƒ…å†µï¼Œè¾“å‡ºå­—æ•°100å·¦å³ï¼Œå°½é‡ç®€æ´æ˜äº†

            # æ—¥å¿—æ•°æ®

            {{#1750844540721.output#}}

            #è¾“å‡º

            æœåŠ¡xxåœ¨xxæ—¶é—´æ®µå†…å‡ºç°äº†xxxæ—¥å¿—é”™è¯¯'
        selected: false
        title: æ—¥å¿—æ€»ç»“
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1751251291730'
      position:
        x: 9126
        y: 963
      positionAbsolute:
        x: 9126
        y: 963
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: alertEventId
            ja_JP: alertEventId
            pt_BR: alertEventId
            zh_Hans: æŠ¥å‘Šç±»å‹
          label:
            en_US: alertEventId
            ja_JP: alertEventId
            pt_BR: alertEventId
            zh_Hans: å‘Šè­¦äº‹ä»¶ID
          llm_description: alertEventId
          max: null
          min: null
          name: alertEventId
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: reportText
            ja_JP: reportText
            pt_BR: reportText
            zh_Hans: æŠ¥å‘Šç®€è¦æ–‡æœ¬
          label:
            en_US: reportText
            ja_JP: reportText
            pt_BR: reportText
            zh_Hans: æŠ¥å‘Šç®€è¦æ–‡æœ¬
          llm_description: reportText
          max: null
          min: null
          name: reportText
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: frontPrefix
            ja_JP: frontPrefix
            pt_BR: frontPrefix
            zh_Hans: æŠ¥å‘Šè®¿é—®åœ°å€
          label:
            en_US: frontPrefix
            ja_JP: frontPrefix
            pt_BR: frontPrefix
            zh_Hans: æŠ¥å‘Šè®¿é—®åœ°å€
          llm_description: frontPrefix
          max: null
          min: null
          name: frontPrefix
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Start timestamp in microseconds
            ja_JP: Start timestamp in microseconds
            pt_BR: Start timestamp in microseconds
            zh_Hans: æŸ¥è¯¢å¼€å§‹æ—¶é—´ï¼ˆå¾®ç§’ï¼‰
          label:
            en_US: Start Time
            ja_JP: Start Time
            pt_BR: Start Time
            zh_Hans: å¼€å§‹æ—¶é—´
          llm_description: Microsecond timestamp for start time
          max: null
          min: null
          name: startTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: End timestamp in microseconds
            ja_JP: End timestamp in microseconds
            pt_BR: End timestamp in microseconds
            zh_Hans: æŸ¥è¯¢ç»“æŸæ—¶é—´ï¼ˆå¾®ç§’ï¼‰
          label:
            en_US: End Time
            ja_JP: End Time
            pt_BR: End Time
            zh_Hans: ç»“æŸæ—¶é—´
          llm_description: Microsecond timestamp for end time
          max: null
          min: null
          name: endTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        params:
          alertEventId: ''
          endTime: ''
          frontPrefix: ''
          reportText: ''
          startTime: ''
        provider_id: apo_analysis
        provider_name: apo_analysis
        provider_type: builtin
        selected: false
        title: è·å–å‘Šè­¦åˆ†ææŠ¥å‘Šé“¾æ¥
        tool_configurations: {}
        tool_label: è·å–å‘Šè­¦åˆ†ææŠ¥å‘Šé“¾æ¥
        tool_name: get alert report url
        tool_parameters:
          alertEventId:
            type: mixed
            value: '{{#1742807803325.alertEventId#}}'
          endTime:
            type: variable
            value:
            - '1741227526517'
            - endTime
          reportText:
            type: mixed
            value: å½“å‰åº”ç”¨æ—¥å¿—é”™è¯¯æ•°å‡é«˜\nè¯¦ç»†æŠ¥å‘Šå†…å®¹\n
          startTime:
            type: variable
            value:
            - '1741227526517'
            - startTime
        type: tool
      height: 54
      id: '1751602453263'
      position:
        x: 10038
        y: 963
      positionAbsolute:
        x: 10038
        y: 963
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: cbd77e4f-1f53-4d83-b9fe-413de4db0078
            value: ce
            varType: string
            variable_selector:
            - '1741227526517'
            - edition
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: æ¡ä»¶åˆ†æ”¯ 2
        type: if-else
      height: 126
      id: '1751602618703'
      position:
        x: 8518
        y: 628
      positionAbsolute:
        x: 8518
        y: 628
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1744878466157'
          - output
          variable: text
        selected: false
        title: ç»“æŸ 5
        type: end
      height: 90
      id: '1751602687916'
      position:
        x: 8822
        y: 703
      positionAbsolute:
        x: 8822
        y: 703
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import re\n\ndef main(alert_name: str) -> str:\n    alert_name = alert_name.lower()\n\
          \n    rules = [\n        (r\"log.*err|æ—¥å¿—.*é”™è¯¯\", \"æ—¥å¿—é”™è¯¯æ•°ç›¸å…³\"),\n        (r\"\
          è¯·æ±‚.*é”™è¯¯ç‡|request.*error\", \"è¯·æ±‚é”™è¯¯ç‡\"),\n        (r\"è¿›ç¨‹.*ä¸æ´»è·ƒ|process.*inactive\"\
          , \"è¿›ç¨‹ä¸æ´»è·ƒ\")\n    ]\n\n    result = \"å…¶ä»–\"\n    for pattern, category in\
          \ rules:\n        if re.search(pattern, alert_name):\n            result\
          \ = category\n            break\n\n    return {\n        \"result\": result\n\
          \    }\n\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: è¯†åˆ«å‘Šè­¦ç±»å‹
        type: code
        variables:
        - value_selector:
          - '1742807803325'
          - alertName
          variable: alert_name
      height: 54
      id: '1753411561314'
      position:
        x: 942
        y: 498
      positionAbsolute:
        x: 942
        y: 498
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: d8b5d22b-98af-43df-a72a-650c26e9f5b6
            value: æ—¥å¿—é”™è¯¯æ•°ç›¸å…³
            varType: string
            variable_selector:
            - '1753411561314'
            - result
          id: 'true'
          logical_operator: and
        - case_id: da617f11-ed6f-44ec-9477-73d6f81455fa
          conditions:
          - comparison_operator: contains
            id: 08d0b7e9-a06c-4d27-89c3-bed25a904eb5
            value: è¯·æ±‚é”™è¯¯ç‡
            varType: string
            variable_selector:
            - '1753411561314'
            - result
          id: da617f11-ed6f-44ec-9477-73d6f81455fa
          logical_operator: and
        - case_id: 91b6ca4c-4632-412a-89b1-cbd1539e374f
          conditions:
          - comparison_operator: contains
            id: a03eea46-b7ca-441d-94de-54de5190d1fb
            value: è¿›ç¨‹ä¸æ´»è·ƒ
            varType: string
            variable_selector:
            - '1753411561314'
            - result
          id: 91b6ca4c-4632-412a-89b1-cbd1539e374f
          logical_operator: and
        desc: ''
        selected: false
        title: æ¡ä»¶åˆ†æ”¯ 3
        type: if-else
      height: 222
      id: '1753412450611'
      position:
        x: 1246
        y: 432
      positionAbsolute:
        x: 1246
        y: 432
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(data):\n    if \"Error\" in data:\n       \
          \ return {\n            \"services\": []\n        }\n    parents = json.loads(data).get(\"\
          data\", {}).get(\"parents\", [])\n    services = [item[\"service\"] for\
          \ item in parents]\n    return{\n        \"services\": services\n    }\n"
        code_language: python3
        desc: ''
        outputs:
          services:
            children: null
            type: array[string]
        selected: false
        title: è·å–ä¸Šæ¸¸æœåŠ¡
        type: code
        variables:
        - value_selector:
          - '1753413225096'
          - text
          variable: data
      height: 54
      id: '1753412973821'
      position:
        x: 4730
        y: 917
      positionAbsolute:
        x: 4730
        y: 917
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Service name
            ja_JP: Service name
            pt_BR: Service name
            zh_Hans: æœåŠ¡å
          label:
            en_US: service
            ja_JP: service
            pt_BR: service
            zh_Hans: service
          llm_description: Service name
          max: null
          min: null
          name: service
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: cluster
            ja_JP: cluster
            pt_BR: cluster
            zh_Hans: é›†ç¾¤
          label:
            en_US: cluster
            ja_JP: cluster
            pt_BR: cluster
            zh_Hans: cluster
          llm_description: cluster
          max: null
          min: null
          name: cluster
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query start time(Microsecond)
            ja_JP: Data query start time(Microsecond)
            pt_BR: Data query start time(Microsecond)
            zh_Hans: å¼€å§‹æ—¶é—´ (å¾®ç§’)
          label:
            en_US: startTime
            ja_JP: startTime
            pt_BR: startTime
            zh_Hans: startTime
          llm_description: Data query start time(Microsecond)
          max: null
          min: null
          name: startTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query end time(Microsecond)
            ja_JP: Data query end time(Microsecond)
            pt_BR: Data query end time(Microsecond)
            zh_Hans: ç»“æŸæ—¶é—´ (å¾®ç§’)
          label:
            en_US: endTime
            ja_JP: endTime
            pt_BR: endTime
            zh_Hans: endTime
          llm_description: Data query end time(Microsecond)
          max: null
          min: null
          name: endTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        params:
          cluster: ''
          endTime: ''
          service: ''
          startTime: ''
        provider_id: apo_select
        provider_name: apo_select
        provider_type: builtin
        selected: false
        title: æŸ¥è¯¢æœåŠ¡æ‹“æ‰‘
        tool_configurations: {}
        tool_label: æŸ¥è¯¢æœåŠ¡æ‹“æ‰‘
        tool_name: dataplane_service_topology
        tool_parameters:
          cluster:
            type: mixed
            value: ''
          endTime:
            type: variable
            value:
            - '1741227526517'
            - endTime
          service:
            type: mixed
            value: '{{#1742807803325.service#}}'
          startTime:
            type: variable
            value:
            - '1741227526517'
            - startTime
        type: tool
      height: 54
      id: '1753413225096'
      position:
        x: 4426
        y: 917
      positionAbsolute:
        x: 4426
        y: 917
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Container id
            ja_JP: Container id
            pt_BR: Container id
            zh_Hans: å®¹å™¨id
          label:
            en_US: containerId
            ja_JP: containerId
            pt_BR: containerId
            zh_Hans: å®¹å™¨id
          llm_description: Container id
          max: null
          min: null
          name: containerId
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Node name
            ja_JP: Node name
            pt_BR: Node name
            zh_Hans: ä¸»æœºå
          label:
            en_US: Node name
            ja_JP: Node name
            pt_BR: Node name
            zh_Hans: ä¸»æœºå
          llm_description: Node name
          max: null
          min: null
          name: nodeName
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: pid
            ja_JP: pid
            pt_BR: pid
            zh_Hans: pid
          label:
            en_US: pid
            ja_JP: pid
            pt_BR: pid
            zh_Hans: pid
          llm_description: pid
          max: null
          min: null
          name: pid
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: pod
            ja_JP: pod
            pt_BR: pod
            zh_Hans: pod
          label:
            en_US: pod
            ja_JP: pod
            pt_BR: pod
            zh_Hans: pod
          llm_description: pod
          max: null
          min: null
          name: pod
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: cluster
            ja_JP: cluster
            pt_BR: cluster
            zh_Hans: é›†ç¾¤
          label:
            en_US: cluster
            ja_JP: cluster
            pt_BR: cluster
            zh_Hans: é›†ç¾¤
          llm_description: cluster
          max: null
          min: null
          name: cluster
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query start time(Microsecond)
            ja_JP: Data query start time(Microsecond)
            pt_BR: Data query start time(Microsecond)
            zh_Hans: å¼€å§‹æ—¶é—´ (å¾®ç§’)
          label:
            en_US: startTime
            ja_JP: startTime
            pt_BR: startTime
            zh_Hans: startTime
          llm_description: Data query start time(Microsecond)
          max: null
          min: null
          name: startTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query end time(Microsecond)
            ja_JP: Data query end time(Microsecond)
            pt_BR: Data query end time(Microsecond)
            zh_Hans: ç»“æŸæ—¶é—´ (å¾®ç§’)
          label:
            en_US: endTime
            ja_JP: endTime
            pt_BR: endTime
            zh_Hans: endTime
          llm_description: Data query end time(Microsecond)
          max: null
          min: null
          name: endTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        params:
          cluster: ''
          containerId: ''
          endTime: ''
          nodeName: ''
          pid: ''
          pod: ''
          startTime: ''
        provider_id: apo_select
        provider_name: apo_select
        provider_type: builtin
        selected: false
        title: æŸ¥è¯¢å®ä¾‹æ‰€å±æœåŠ¡
        tool_configurations: {}
        tool_label: æŸ¥è¯¢å®ä¾‹æ‰€å±æœåŠ¡
        tool_name: dataplane_instance_service
        tool_parameters:
          endTime:
            type: variable
            value:
            - '1741227526517'
            - endTime
          nodeName:
            type: mixed
            value: '{{#1742807803325.nodeName#}}'
          pid:
            type: mixed
            value: '{{#1742807803325.pid#}}'
          startTime:
            type: variable
            value:
            - '1741227526517'
            - startTime
        type: tool
      height: 54
      id: '1753414138349'
      position:
        x: 1854
        y: 498
      positionAbsolute:
        x: 1854
        y: 498
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main(data_json: str, service) -> dict:\n    if len(service) >\
          \ 0:\n        return {\n            \"result\": service\n        }\n   \
          \ data = json.loads(data_json).get('data', '')\n    return {\n        \"\
          result\": data,\n    }\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: è·å–æœåŠ¡å
        type: code
        variables:
        - value_selector:
          - '1753414138349'
          - text
          variable: data_json
        - value_selector:
          - '1742807803325'
          - service
          variable: service
      height: 54
      id: '1753414255071'
      position:
        x: 2158
        y: 516
      positionAbsolute:
        x: 2158
        y: 516
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        error_handle_mode: terminated
        is_parallel: false
        iterator_selector:
        - '1753412973821'
        - services
        output_selector:
        - '1753421605090'
        - result
        output_type: array[string]
        parallel_nums: 10
        selected: false
        start_node_id: 1753414276399start
        title: è¿­ä»£
        type: iteration
        width: 1296
      height: 148
      id: '1753414276399'
      position:
        x: 5642
        y: 888
      positionAbsolute:
        x: 5642
        y: 888
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 1296
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: 1753414276399start
      parentId: '1753414276399'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 5666
        y: 956
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        desc: ''
        isInIteration: true
        is_team_authorization: true
        iteration_id: '1753414276399'
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Specified service name
            ja_JP: Specified service name
            pt_BR: Specified service name
            zh_Hans: æŒ‡å®šçš„æœåŠ¡å
          label:
            en_US: service_name
            ja_JP: service_name
            pt_BR: service_name
            zh_Hans: service_name
          llm_description: æŒ‡å®šçš„æœåŠ¡å
          max: null
          min: null
          name: service_name
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Specified endpoint name
            ja_JP: Specified endpoint name
            pt_BR: Specified endpoint name
            zh_Hans: æŒ‡å®šçš„æœåŠ¡ç«¯ç‚¹å
          label:
            en_US: content_key
            ja_JP: content_key
            pt_BR: content_key
            zh_Hans: content_key
          llm_description: æŒ‡å®šçš„æœåŠ¡ç«¯ç‚¹å
          max: null
          min: null
          name: content_key
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query start time(Microsecond)
            ja_JP: Data query start time(Microsecond)
            pt_BR: Data query start time(Microsecond)
            zh_Hans: å¼€å§‹æ—¶é—´ (å¾®ç§’)
          label:
            en_US: startTime
            ja_JP: startTime
            pt_BR: startTime
            zh_Hans: startTime
          llm_description: Data query start time(Microsecond)
          max: null
          min: null
          name: startTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query end time(Microsecond)
            ja_JP: Data query end time(Microsecond)
            pt_BR: Data query end time(Microsecond)
            zh_Hans: ç»“æŸæ—¶é—´ (å¾®ç§’)
          label:
            en_US: endTime
            ja_JP: endTime
            pt_BR: endTime
            zh_Hans: endTime
          llm_description: Data query end time(Microsecond)
          max: null
          min: null
          name: endTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        params:
          content_key: ''
          endTime: ''
          service_name: ''
          startTime: ''
        provider_id: apo_select
        provider_name: apo_select
        provider_type: builtin
        selected: false
        title: æœåŠ¡è¯·æ±‚æˆåŠŸç‡(æŒ‰æœåŠ¡åå’Œå†…å®¹é”®ç»Ÿè®¡,æŒ‡å®šæ—¶é—´æ®µå†…)
        tool_configurations: {}
        tool_label: æœåŠ¡è¯·æ±‚æˆåŠŸç‡(æŒ‰æœåŠ¡åå’Œå†…å®¹é”®ç»Ÿè®¡,æŒ‡å®šæ—¶é—´æ®µå†…)
        tool_name: Originx åŒ—ææ˜ŸæŒ‡æ ‡ (æœåŠ¡å±‚çº§) - REDæŒ‡æ ‡ - è¯·æ±‚æˆåŠŸç‡
        tool_parameters:
          endTime:
            type: variable
            value:
            - '1741227526517'
            - endTime
          service_name:
            type: mixed
            value: '{{#1753414276399.item#}}'
          startTime:
            type: variable
            value:
            - '1741227526517'
            - startTime
        type: tool
      height: 54
      id: '1753414387530'
      parentId: '1753414276399'
      position:
        x: 128
        y: 68
      positionAbsolute:
        x: 5770
        y: 956
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        desc: ''
        isInIteration: true
        is_team_authorization: true
        iteration_id: '1753414276399'
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Service name
            ja_JP: Service name
            pt_BR: Service name
            zh_Hans: æœåŠ¡å
          label:
            en_US: service
            ja_JP: service
            pt_BR: service
            zh_Hans: service
          llm_description: Service name
          max: null
          min: null
          name: service
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: cluster
            ja_JP: cluster
            pt_BR: cluster
            zh_Hans: é›†ç¾¤
          label:
            en_US: cluster
            ja_JP: cluster
            pt_BR: cluster
            zh_Hans: cluster
          llm_description: cluster
          max: null
          min: null
          name: cluster
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: endpoint
            ja_JP: endpoint
            pt_BR: endpoint
            zh_Hans: endpoint
          label:
            en_US: endpoint
            ja_JP: endpoint
            pt_BR: endpoint
            zh_Hans: endpoint
          llm_description: endpoint
          max: null
          min: null
          name: endpoint
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query start time(Microsecond)
            ja_JP: Data query start time(Microsecond)
            pt_BR: Data query start time(Microsecond)
            zh_Hans: å¼€å§‹æ—¶é—´ (å¾®ç§’)
          label:
            en_US: startTime
            ja_JP: startTime
            pt_BR: startTime
            zh_Hans: startTime
          llm_description: Data query start time(Microsecond)
          max: null
          min: null
          name: startTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query end time(Microsecond)
            ja_JP: Data query end time(Microsecond)
            pt_BR: Data query end time(Microsecond)
            zh_Hans: ç»“æŸæ—¶é—´ (å¾®ç§’)
          label:
            en_US: endTime
            ja_JP: endTime
            pt_BR: endTime
            zh_Hans: endTime
          llm_description: Data query end time(Microsecond)
          max: null
          min: null
          name: endTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        params:
          cluster: ''
          endTime: ''
          endpoint: ''
          service: ''
          startTime: ''
        provider_id: apo_select
        provider_name: apo_select
        provider_type: builtin
        selected: false
        title: æŸ¥è¯¢æœåŠ¡REDæŒ‡æ ‡
        tool_configurations: {}
        tool_label: æŸ¥è¯¢æœåŠ¡REDæŒ‡æ ‡
        tool_name: dataplane_service_redcharts
        tool_parameters:
          endTime:
            type: variable
            value:
            - '1741227526517'
            - endTime
          service:
            type: mixed
            value: '{{#1753414276399.item#}}'
          startTime:
            type: variable
            value:
            - '1741227526517'
            - startTime
        type: tool
      height: 54
      id: '1753414403009'
      parentId: '1753414276399'
      position:
        x: 432
        y: 68
      positionAbsolute:
        x: 6074
        y: 956
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        desc: ''
        error_handle_mode: terminated
        is_parallel: false
        iterator_selector:
        - '1753414587601'
        - result
        output_selector:
        - '1753415013827'
        - result
        output_type: array[string]
        parallel_nums: 10
        selected: false
        start_node_id: 1753414518300start
        title: è·å–é”™è¯¯æ—¥å¿—
        type: iteration
        width: 992
      height: 148
      id: '1753414518300'
      position:
        x: 2766
        y: 498
      positionAbsolute:
        x: 2766
        y: 498
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 992
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: 1753414518300start
      parentId: '1753414518300'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 2790
        y: 566
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        desc: ''
        isInIteration: true
        is_team_authorization: true
        iteration_id: '1753414518300'
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Query condition(clickhouse where clause).
            ja_JP: Query condition(clickhouse where clause).
            pt_BR: Query condition(clickhouse where clause).
            zh_Hans: æŸ¥è¯¢æ¡ä»¶ï¼ˆclickhouse whereå­å¥ï¼‰
          label:
            en_US: Query condition(clickhouse where clause).
            ja_JP: Query condition(clickhouse where clause).
            pt_BR: Query condition(clickhouse where clause).
            zh_Hans: æŸ¥è¯¢æ¡ä»¶ï¼ˆclickhouse whereå­å¥ï¼‰
          llm_description: Query condition(clickhouse where clause).
          max: null
          min: null
          name: query
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Current page
            ja_JP: Current page
            pt_BR: Current page
            zh_Hans: å½“å‰é¡µ
          label:
            en_US: Current page
            ja_JP: Current page
            pt_BR: Current page
            zh_Hans: å½“å‰é¡µ
          llm_description: Current page
          max: null
          min: null
          name: pageNum
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Page size
            ja_JP: Page size
            pt_BR: Page size
            zh_Hans: é¡µå¤§å°
          label:
            en_US: Page size
            ja_JP: Page size
            pt_BR: Page size
            zh_Hans: é¡µå¤§å°
          llm_description: Page size
          max: null
          min: null
          name: pageSize
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Start timestamp in microseconds
            ja_JP: Start timestamp in microseconds
            pt_BR: Start timestamp in microseconds
            zh_Hans: æŸ¥è¯¢å¼€å§‹æ—¶é—´ï¼ˆå¾®ç§’ï¼‰
          label:
            en_US: Start Time
            ja_JP: Start Time
            pt_BR: Start Time
            zh_Hans: å¼€å§‹æ—¶é—´
          llm_description: Microsecond timestamp for start time
          max: null
          min: null
          name: startTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: End timestamp in microseconds
            ja_JP: End timestamp in microseconds
            pt_BR: End timestamp in microseconds
            zh_Hans: æŸ¥è¯¢ç»“æŸæ—¶é—´ï¼ˆå¾®ç§’ï¼‰
          label:
            en_US: End Time
            ja_JP: End Time
            pt_BR: End Time
            zh_Hans: ç»“æŸæ—¶é—´
          llm_description: Microsecond timestamp for end time
          max: null
          min: null
          name: endTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        params:
          endTime: ''
          pageNum: ''
          pageSize: ''
          query: ''
          startTime: ''
        provider_id: apo_select
        provider_name: apo_select
        provider_type: builtin
        selected: false
        title: æŸ¥è¯¢å…¨é‡æ—¥å¿—
        tool_configurations: {}
        tool_label: æŸ¥è¯¢å…¨é‡æ—¥å¿—
        tool_name: æŸ¥è¯¢å…¨é‡æ—¥å¿—
        tool_parameters:
          endTime:
            type: variable
            value:
            - '1753414924837'
            - endTime
          pageNum:
            type: constant
            value: 1
          pageSize:
            type: constant
            value: 999
          query:
            type: mixed
            value: '{{#1753414924837.query#}}'
          startTime:
            type: variable
            value:
            - '1753414924837'
            - startTime
        type: tool
      height: 54
      id: '1753414547927'
      parentId: '1753414518300'
      position:
        x: 428
        y: 65
      positionAbsolute:
        x: 3194
        y: 563
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "def split_time_range(start_time: int, end_time: int, max_interval:\
          \ int = 60 * 1000000) -> dict:\n    intervals = []\n    current_start =\
          \ start_time\n    while current_start < end_time:\n        current_end =\
          \ min(current_start + max_interval, end_time)\n        intervals.append({\n\
          \            \"startTime\": current_start,\n            \"endTime\": current_end\n\
          \        })\n        current_start = current_end\n    return {'result':\
          \ intervals}\n\ndef main(start_time: int, end_time: int, max_interval: int\
          \ = 60 * 1000000 * 2) -> dict:\n    return split_time_range(start_time,\
          \ end_time, max_interval)"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: array[object]
        selected: false
        title: åˆ’åˆ†æ—¶é—´åŒºé—´
        type: code
        variables:
        - value_selector:
          - '1741227526517'
          - startTime
          variable: start_time
        - value_selector:
          - '1741227526517'
          - endTime
          variable: end_time
      height: 54
      id: '1753414587601'
      position:
        x: 2462
        y: 498
      positionAbsolute:
        x: 2462
        y: 498
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main(pod: str, service: str, node: str, pid: str, containerId:\
          \ str, sourceFrom: str, item) -> dict:\n    query = ''\n    if len(containerId)\
          \ > 0 and len(node) > 0:\n        query = f\"\"\"container_id='{containerId}'\
          \ and host_name='{node}'\"\"\"\n    elif len(pod) > 0 and len(service) >\
          \ 0:\n        query = f\"\"\"k8s_pod_name='{pod}' and container_name='{service}'\"\
          \"\"\n    elif len(pod) > 0:\n        query = f\"\"\"k8s_pod_name='{pod}'\"\
          \"\"\n    elif len(node) > 0 and len(pid) > 0:\n        query = f\"\"\"\
          host_name='{node}' and pid='{pid}'\"\"\"\n    elif len(service) > 0:\n \
          \       query = f\"\"\"container_name='{service}'\"\"\"\n    elif len(containerId)\
          \ > 0:\n        query = f\"\"\"container_id='{containerId}'\"\"\"\n    elif\
          \ len(node) > 0:\n        query = f\"\"\"host_name='{node}'\"\"\"\n\n  \
          \  if len(sourceFrom) > 0:\n        if len(query) > 0:\n            query\
          \ += f\" and source='{sourceFrom}'\"\n        else:\n            query =\
          \ f\"\"\"source='{sourceFrom}'\"\"\"\n    \n    return {\n        \"query\"\
          : query,\n        \"startTime\": item[\"startTime\"],\n        \"endTime\"\
          : item[\"endTime\"]\n    }"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1753414518300'
        outputs:
          endTime:
            children: null
            type: number
          query:
            children: null
            type: string
          startTime:
            children: null
            type: number
        selected: false
        title: è·å–æŸ¥è¯¢æ¡ä»¶
        type: code
        variables:
        - value_selector:
          - '1742807803325'
          - pod
          variable: pod
        - value_selector:
          - '1742807803325'
          - service
          variable: service
        - value_selector:
          - '1742807803325'
          - nodeName
          variable: node
        - value_selector:
          - '1742807803325'
          - pid
          variable: pid
        - value_selector:
          - '1742807803325'
          - containerId
          variable: containerId
        - value_selector:
          - '1742807803325'
          - sourceFrom
          variable: sourceFrom
        - value_selector:
          - '1753414518300'
          - item
          variable: item
      height: 54
      id: '1753414924837'
      parentId: '1753414518300'
      position:
        x: 128
        y: 65
      positionAbsolute:
        x: 2894
        y: 563
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "import re\nimport json\nfrom typing import List, Dict, Tuple, Optional\n\
          \n\nclass OptimizedServiceUnavailableDetector:\n    \"\"\"ä¼˜åŒ–çš„æœåŠ¡ä¸å¯ç”¨æ—¥å¿—æ£€æµ‹å™¨\
          \ - ä»…ä½¿ç”¨åŸç”Ÿåº“\"\"\"\n    \n    def __init__(self):\n        # é¢„ç¼–è¯‘æ‰€æœ‰æ­£åˆ™è¡¨è¾¾å¼\n\
          \        self.compiled_patterns = self._compile_optimized_patterns()\n \
          \       # å¿«é€Ÿè¿‡æ»¤å™¨ - åŒ…å«å¸¸è§é”™è¯¯å…³é”®è¯\n        self.quick_filter = re.compile(\n \
          \           r'(?:error|fail|timeout|unavailable|panic|crash|connection|refused|reset|'\n\
          \            r'5\\d{2}|4\\d{2}|exception|critical|fatal|'\n            r'é”™è¯¯|å¤±è´¥|è¶…æ—¶|ä¸å¯ç”¨|å´©æºƒ|å¼‚å¸¸|è‡´å‘½|æ‹’ç»|è¿æ¥)',\n\
          \            re.IGNORECASE\n        )\n    \n    def _compile_optimized_patterns(self)\
          \ -> List[Tuple[re.Pattern, str, str]]:\n        \"\"\"ç¼–è¯‘ä¼˜åŒ–çš„æ¨¡å¼åˆ—è¡¨ - åˆå¹¶ç›¸ä¼¼æ¨¡å¼å‡å°‘æ­£åˆ™æ•°é‡\"\
          \"\"\n        patterns = []\n        \n        # 1. è¿æ¥é”™è¯¯ - å¤–éƒ¨é—®é¢˜ (åˆå¹¶å¤šä¸ªç›¸å…³æ¨¡å¼)\n\
          \        connection_pattern = (\n            r'(?:connection\\s+(?:refused|reset|closed|aborted|failed|timeout)|'\n\
          \            r'can[\\'\"\\s]*t\\s+connect|unable\\s+to\\s+connect|failed\\\
          s+to\\s+connect|'\n            r'connect\\s+error|network\\s+unreachable|host\\\
          s+unreachable|'\n            r'no\\s+route\\s+to\\s+host|connection\\s+timed\\\
          s+out|'\n            r'è¿æ¥(?:è¢«æ‹’ç»|å¤±è´¥|è¶…æ—¶|è¢«é‡ç½®|ä¸­æ–­)|æ— æ³•è¿æ¥|æ‹’ç»è¿æ¥|ç½‘ç»œä¸å¯è¾¾|ä¸»æœºä¸å¯è¾¾)'\n\
          \        )\n        patterns.append((re.compile(connection_pattern, re.IGNORECASE),\
          \ \"connection_error\", \"external\"))\n        \n        # 2. è¶…æ—¶é”™è¯¯ - æ··åˆé—®é¢˜\n\
          \        timeout_pattern = (\n            r'(?:timeout|timed\\s+out|time\\\
          s+out|è¶…æ—¶|è¯·æ±‚è¶…æ—¶|å“åº”è¶…æ—¶|'\n            r'(?:read|write|connect|socket|request|response|execution|operation)\\\
          s+timeout)'\n        )\n        patterns.append((re.compile(timeout_pattern,\
          \ re.IGNORECASE), \"timeout_error\", \"mixed\"))\n        \n        # 3.\
          \ æœåŠ¡ä¸å¯ç”¨ - å¤–éƒ¨é—®é¢˜\n        unavailable_pattern = (\n            r'(?:(?:service|server|backend|upstream)\\\
          s+unavailable|not\\s+available|'\n            r'æœåŠ¡(?:ä¸å¯ç”¨|å™¨ä¸å¯ç”¨)|æš‚æ—¶ä¸å¯ç”¨|temporar(?:y|ily)\\\
          s+unavailable|'\n            r'503\\s+service\\s+unavailable)'\n       \
          \ )\n        patterns.append((re.compile(unavailable_pattern, re.IGNORECASE),\
          \ \"unavailable_error\", \"external\"))\n        \n        # 4. Panic/å´©æºƒé”™è¯¯\
          \ - å†…éƒ¨é—®é¢˜\n        panic_pattern = (\n            r'(?:panic[:\\s]|(?:fatal|critical)\\\
          s+error|ä¸¥é‡é”™è¯¯|è‡´å‘½é”™è¯¯|å´©æºƒ|crash|'\n            r'segmentation\\s+fault|stack\\\
          s+overflow|out\\s+of\\s+memory|å†…å­˜ä¸è¶³|æ ˆæº¢å‡º)'\n        )\n        patterns.append((re.compile(panic_pattern,\
          \ re.IGNORECASE), \"panic_error\", \"internal\"))\n        \n        # 5.\
          \ HTTP 5xxé”™è¯¯ - å†…éƒ¨é—®é¢˜\n        http_5xx_pattern = r'(?:5\\d{2}(?:\\s+\\w+)?|500\\\
          s+internal\\s+server\\s+error|å†…éƒ¨æœåŠ¡å™¨é”™è¯¯)'\n        patterns.append((re.compile(http_5xx_pattern,\
          \ re.IGNORECASE), \"http_error\", \"internal\"))\n        \n        # 6.\
          \ HTTPç½‘å…³é”™è¯¯ - å¤–éƒ¨é—®é¢˜\n        http_gateway_pattern = (\n            r'(?:502\\\
          s+bad\\s+gateway|503\\s+service\\s+unavailable|504\\s+gateway\\s+timeout|'\n\
          \            r'bad\\s+gateway|gateway\\s+timeout|ç½‘å…³é”™è¯¯)'\n        )\n   \
          \     patterns.append((re.compile(http_gateway_pattern, re.IGNORECASE),\
          \ \"http_error\", \"external\"))\n        \n        # 7. ç½‘ç»œé”™è¯¯ - å¤–éƒ¨é—®é¢˜\n \
          \       network_pattern = (\n            r'(?:network\\s+(?:error|is\\s+unreachable)|dns\\\
          s+resolution\\s+failed|'\n            r'name\\s+resolution\\s+failed|ç½‘ç»œ(?:é”™è¯¯|ä¸å¯è¾¾)|dnsè§£æå¤±è´¥|åŸŸåè§£æå¤±è´¥|'\n\
          \            r'(?:socket|tcp|udp)\\s+error)'\n        )\n        patterns.append((re.compile(network_pattern,\
          \ re.IGNORECASE), \"network_error\", \"external\"))\n        \n        #\
          \ 8. æ•°æ®åº“é”™è¯¯ - æ··åˆé—®é¢˜\n        database_pattern = (\n            r'(?:database\\\
          s+(?:connection\\s+failed|unavailable|timeout|error)|sql\\s+error|'\n  \
          \          r'æ•°æ®åº“(?:è¿æ¥å¤±è´¥|ä¸å¯ç”¨|è¶…æ—¶)|sqlé”™è¯¯|connection\\s+pool\\s+exhausted|'\n\
          \            r'too\\s+many\\s+connections|max\\s+connections\\s+reached)'\n\
          \        )\n        patterns.append((re.compile(database_pattern, re.IGNORECASE),\
          \ \"database_error\", \"mixed\"))\n        \n        # 9. èµ„æºé”™è¯¯ - å†…éƒ¨é—®é¢˜\n\
          \        resource_pattern = (\n            r'(?:memory\\s+exhausted|disk\\\
          s+full|no\\s+space\\s+left|resource\\s+exhausted|'\n            r'å†…å­˜ä¸è¶³|ç£ç›˜ç©ºé—´ä¸è¶³|èµ„æºè€—å°½|(?:cpu|memory)\\\
          s+limit\\s+exceeded)'\n        )\n        patterns.append((re.compile(resource_pattern,\
          \ re.IGNORECASE), \"resource_error\", \"internal\"))\n        \n       \
          \ # 10. è®¤è¯é”™è¯¯ - æ··åˆé—®é¢˜\n        auth_pattern = (\n            r'(?:(?:authentication|authorization)\\\
          s+failed|access\\s+denied|'\n            r'permission\\s+denied|unauthorized|forbidden|è®¤è¯å¤±è´¥|æˆæƒå¤±è´¥|'\n\
          \            r'è®¿é—®è¢«æ‹’ç»|æƒé™ä¸è¶³|401\\s+unauthorized|403\\s+forbidden)'\n     \
          \   )\n        patterns.append((re.compile(auth_pattern, re.IGNORECASE),\
          \ \"auth_error\", \"mixed\"))\n        \n        # 11. é€šç”¨é”™è¯¯æ¨¡å¼ - æ”¾åœ¨æœ€åï¼Œé¿å…è¿‡åº¦åŒ¹é…\n\
          \        generic_pattern = (\n            r'(?:\\b(?:ERROR|ERR|EXCEPTION|FAIL(?:ED)?|FATAL|CRITICAL|CRASH(?:ED)?|BROKEN)\\\
          b|'\n            r'é”™è¯¯|å¤±è´¥|å¼‚å¸¸|å´©æºƒ|è‡´å‘½|æœªçŸ¥é”™è¯¯)'\n        )\n        patterns.append((re.compile(generic_pattern,\
          \ re.IGNORECASE), \"generic_error\", \"unknown\"))\n        \n        return\
          \ patterns\n    \n    def detect_line(self, line: str, line_number: int\
          \ = 0) -> Optional[Dict]:\n        \"\"\"æ£€æµ‹å•è¡Œæ—¥å¿— - ä¼˜åŒ–ç‰ˆæœ¬\"\"\"\n        #\
          \ å¿«é€Ÿé¢„è¿‡æ»¤ï¼Œé¿å…ä¸å¿…è¦çš„è¯¦ç»†åŒ¹é…\n        if not self.quick_filter.search(line):\n   \
          \         return None\n        \n        # æŒ‰ä¼˜å…ˆçº§é¡ºåºåŒ¹é…ï¼ˆå…·ä½“é”™è¯¯ä¼˜å…ˆäºé€šç”¨é”™è¯¯ï¼‰\n     \
          \   for regex, category, source in self.compiled_patterns:\n           \
          \ if regex.search(line):\n                return {\n                   \
          \ \"line_number\": line_number,\n                    \"content\": line,\n\
          \                    \"category\": category,\n                    \"source\"\
          : source\n                }\n        \n        return None\n    \n    def\
          \ detect_logs(self, logs: List[Dict], max_results: int = 30) -> List[Dict]:\n\
          \        \"\"\"æ£€æµ‹å¤šè¡Œæ—¥å¿— - ä¼˜åŒ–ç‰ˆæœ¬\"\"\"\n        if not logs:\n            return\
          \ []\n        \n        matches = []\n        \n        # ç›´æ¥éå†ï¼Œé¿å…é¢å¤–çš„æ•°æ®ç»“æ„å¼€é”€\n\
          \        for i, log in enumerate(logs):\n            if len(matches) >=\
          \ max_results:\n                break\n                \n            line\
          \ = log.get(\"body\", \"\")\n            if not line:  # è·³è¿‡ç©ºè¡Œ\n        \
          \        continue\n                \n            match_info = self.detect_line(line,\
          \ i)\n            if match_info:\n                # å¤åˆ¶åŸå§‹æ—¥å¿—å¹¶æ·»åŠ åŒ¹é…ä¿¡æ¯\n    \
          \            result_log = log.copy()\n                result_log.update({\n\
          \                    \"category\": match_info[\"category\"],\n         \
          \           \"source\": match_info[\"source\"]\n                })\n   \
          \             matches.append(result_log)\n        \n        return matches\n\
          \    \n    def get_statistics(self, matches: List[Dict]) -> Dict:\n    \
          \    \"\"\"è·å–æ£€æµ‹ç»Ÿè®¡ä¿¡æ¯ - ä½¿ç”¨åŸç”Ÿæ–¹æ³•\"\"\"\n        if not matches:\n          \
          \  return {\"total\": 0, \"by_category\": {}, \"by_source\": {}}\n     \
          \   \n        # ä½¿ç”¨åŸç”Ÿå­—å…¸ç»Ÿè®¡\n        by_category = {}\n        by_source =\
          \ {}\n        \n        for match in matches:\n            # ç»Ÿè®¡ç±»åˆ«\n    \
          \        category = match.get(\"category\", \"unknown\")\n            by_category[category]\
          \ = by_category.get(category, 0) + 1\n            \n            # ç»Ÿè®¡æ¥æº\n\
          \            source = match.get(\"source\", \"unknown\") \n            by_source[source]\
          \ = by_source.get(source, 0) + 1\n        \n        return {\n         \
          \   \"total\": len(matches),\n            \"by_category\": by_category,\n\
          \            \"by_source\": by_source\n        }\n    \n    def format_results(self,\
          \ matches: List[Dict], show_details: bool = True, group_by: str = \"source\"\
          ) -> str:\n        \"\"\"æ ¼å¼åŒ–æ£€æµ‹ç»“æœ\"\"\"\n        if not matches:\n      \
          \      return \"æœªæ£€æµ‹åˆ°æœåŠ¡ä¸å¯ç”¨ç›¸å…³æ—¥å¿—\"\n        \n        result = f\"æ£€æµ‹åˆ° {len(matches)}\
          \ æ¡æœåŠ¡ä¸å¯ç”¨ç›¸å…³æ—¥å¿—:\\n\\n\"\n        \n        # æ‰‹åŠ¨åˆ†ç»„\n        groups = {}\n \
          \       for match in matches:\n            key = match.get(group_by, \"\
          unknown\")\n            if key not in groups:\n                groups[key]\
          \ = []\n            groups[key].append(match)\n        \n        if group_by\
          \ == \"source\":\n            source_names = {\n                \"internal\"\
          : \"å†…éƒ¨é—®é¢˜ (è‡ªèº«æœåŠ¡)\",\n                \"external\": \"å¤–éƒ¨é—®é¢˜ (ä¾èµ–æœåŠ¡)\", \n  \
          \              \"mixed\": \"æ··åˆé—®é¢˜ (éœ€è¿›ä¸€æ­¥åˆ¤æ–­)\",\n                \"unknown\"\
          : \"æœªçŸ¥æ¥æº\"\n            }\n            \n            # æŒ‰ä¼˜å…ˆçº§æ’åºæ˜¾ç¤º\n      \
          \      priority_order = [\"internal\", \"external\", \"mixed\", \"unknown\"\
          ]\n            for source in priority_order:\n                if source\
          \ in groups:\n                    source_matches = groups[source]\n    \
          \                source_name = source_names[source]\n                  \
          \  result += f\"=== {source_name} ({len(source_matches)} æ¡) ===\\n\"\n \
          \                   \n                    if show_details:\n           \
          \             # åªæ˜¾ç¤ºå‰3æ¡è¯¦ç»†ä¿¡æ¯ï¼Œé¿å…è¾“å‡ºè¿‡é•¿\n                        for match in\
          \ source_matches[:3]:\n                            content = match.get(\"\
          body\", \"\")\n                            # æˆªæ–­è¿‡é•¿çš„å†…å®¹\n                 \
          \           if len(content) > 100:\n                                content\
          \ = content[:100] + \"...\"\n                            result += f\" \
          \ æ—¥å¿—å†…å®¹: {content}\\n\"\n                            result += f\"  é”™è¯¯ç±»å‹:\
          \ {match.get('category', 'unknown')}\\n\\n\"\n                        \n\
          \                        if len(source_matches) > 3:\n                 \
          \           result += f\"  ... è¿˜æœ‰ {len(source_matches) - 3} æ¡åŒç±»æ—¥å¿—\\n\\n\"\
          \n                    else:\n                        result += f\"  åŒ…å« {len(source_matches)}\
          \ æ¡ç›¸å…³æ—¥å¿—\\n\\n\"\n        else:\n            # æŒ‰ç±»åˆ«åˆ†ç»„\n            for category,\
          \ category_matches in groups.items():\n                result += f\"===\
          \ {category.upper()} ({len(category_matches)} æ¡) ===\\n\"\n            \
          \    \n                if show_details:\n                    for match in\
          \ category_matches[:3]:\n                        content = match.get(\"\
          body\", \"\")\n                        if len(content) > 100:\n        \
          \                    content = content[:100] + \"...\"\n               \
          \         result += f\"  æ—¥å¿—å†…å®¹: {content}\\n\"\n                        result\
          \ += f\"  é”™è¯¯æ¥æº: {match.get('source', 'unknown')}\\n\\n\"\n             \
          \       \n                    if len(category_matches) > 3:\n          \
          \              result += f\"  ... è¿˜æœ‰ {len(category_matches) - 3} æ¡åŒç±»æ—¥å¿—\\\
          n\\n\"\n                else:\n                    result += f\"  åŒ…å« {len(category_matches)}\
          \ æ¡ç›¸å…³æ—¥å¿—\\n\\n\"\n        \n        return result\n\n\ndef main(log_json:\
          \ str):\n    \"\"\"ä¸»å‡½æ•° - ä¼˜åŒ–ç‰ˆæœ¬\"\"\"\n    try:\n        # è§£æJSON\n      \
          \  data = json.loads(log_json)\n        logs = data.get(\"data\", {}).get(\"\
          logContents\", {}).get(\"contents\", [])\n        \n        # åˆ›å»ºæ£€æµ‹å™¨å¹¶å¤„ç†\n\
          \        detector = OptimizedServiceUnavailableDetector()\n        matches\
          \ = detector.detect_logs(logs, max_results=30)\n        \n        return\
          \ {\"result\": matches}\n        \n    except json.JSONDecodeError as e:\n\
          \        return {\"error\": f\"JSONè§£æé”™è¯¯: {str(e)}\"}\n    except Exception\
          \ as e:\n        return {\"error\": f\"å¤„ç†é”™è¯¯: {str(e)}\"}"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1753414518300'
        outputs:
          result:
            children: null
            type: array[object]
        selected: false
        title: æå–é”™è¯¯æ—¥å¿—
        type: code
        variables:
        - value_selector:
          - '1753414547927'
          - text
          variable: log_json
      height: 54
      id: '1753415013827'
      parentId: '1753414518300'
      position:
        x: 732
        y: 65
      positionAbsolute:
        x: 3498
        y: 563
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "import json\n\ndef main(success_rate_data_json: str, tps_data_json:\
          \ str):\n    \"\"\"\n    é€šè¿‡åˆ†ææœ€è¿‘æ•°æ®çª—å£çš„çº¿æ€§å›å½’æ–œç‡æ¥è¯†åˆ«ä¸‹é™è¶‹åŠ¿ã€‚\n    \"\"\"\n    try:\n\
          \        success_rate_data = json.loads(success_rate_data_json)\n      \
          \  success_metric_data = success_rate_data.get(\"data\", {})\n        tps_data\
          \ = json.loads(tps_data_json)\n        tps_metric_data = tps_data.get(\"\
          data\", {})\n    except json.JSONDecodeError as e:\n        print(f\"JSONæ ¼å¼é”™è¯¯:\
          \ {e}\")\n        return []\n\n    success_rate_slop_threshold = -0.001\n\
          \    tps_slop_threshold = -0.001\n    success_rate_trend = analyze_trend(success_metric_data,\
          \ 0, success_rate_slop_threshold)\n    tps_trend = analyze_trend(tps_metric_data,\
          \ 0, tps_slop_threshold)\n    return {\n        \"result\": json.dumps({\n\
          \            \"success_rate_trend\": success_rate_trend,\n            \"\
          tps_trend\": tps_trend\n        })\n    }\n\ndef _calculate_slope(values:\
          \ list) -> float:\n    n = len(values)\n    if n < 2:\n        return 0.0\n\
          \n    x_coords = list(range(n))\n    y_coords = values\n\n    sum_x = sum(x_coords)\n\
          \    sum_y = sum(y_coords)\n    sum_xy = sum(x * y for x, y in zip(x_coords,\
          \ y_coords))\n    sum_x_squared = sum(x**2 for x in x_coords)\n\n    numerator\
          \ = n * sum_xy - sum_x * sum_y\n    denominator = n * sum_x_squared - sum_x**2\n\
          \n    if denominator == 0:\n        return 0.0\n\n    return numerator /\
          \ denominator\n\n\ndef analyze_trend(metric_data: dict, window_size: int\
          \ = 10, slope_threshold: float = -0.05):\n    if slope_threshold > 0:\n\
          \        slope_threshold = -slope_threshold\n\n    result = {}\n    try:\n\
          \        timeseries_list = metric_data.get('timeseries', [])\n        \n\
          \        for i, series in enumerate(timeseries_list):\n            legend\
          \ = series.get('legend', f'æœªå‘½ååºåˆ— {i+1}')\n            chart_data = series.get('chart',\
          \ {}).get('chartData', {})\n            \n            num_points = len(chart_data)\n\
          \            \n            if num_points < 2:\n                continue\n\
          \n            current_window_size = window_size\n            if current_window_size\
          \ == 0 or current_window_size > num_points:\n                current_window_size\
          \ = num_points\n\n            sorted_items = sorted(chart_data.items(),\
          \ key=lambda item: int(item[0]))\n            \n            if current_window_size\
          \ > 0:\n                recent_values = [item[1] for item in sorted_items[-current_window_size:]]\n\
          \            else:\n                continue\n\n            slope = _calculate_slope(recent_values)\n\
          \n            if slope < slope_threshold:\n                result = {\n\
          \                    \"legend\": legend,\n                    \"reason\"\
          : f\"æœ€è¿‘ {current_window_size} ä¸ªç‚¹çš„è¶‹åŠ¿æ–œç‡ {slope:.4f} ä½äºé˜ˆå€¼ {slope_threshold}\"\
          ,\n                    \"slope\": slope,\n                    \"raw_data\"\
          : chart_data\n                }\n\n    except (KeyError, IndexError, TypeError)\
          \ as e:\n        print(f\"å¤„ç†æ•°æ®æ—¶å‡ºé”™ï¼Œè¯·æ£€æŸ¥æ•°æ®ç»“æ„: {e}\")\n        return {}\n\n\
          \    return result"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1753414276399'
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: åˆ†æå—å½±å“æœåŠ¡
        type: code
        variables:
        - value_selector:
          - '1753414387530'
          - text
          variable: success_rate_data_json
        - value_selector:
          - '1753681278579'
          - result
          variable: tps_data_json
      height: 54
      id: '1753421605090'
      parentId: '1753414276399'
      position:
        x: 1036
        y: 68
      positionAbsolute:
        x: 6678
        y: 956
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Specified service name
            ja_JP: Specified service name
            pt_BR: Specified service name
            zh_Hans: æŒ‡å®šçš„æœåŠ¡å
          label:
            en_US: service_name
            ja_JP: service_name
            pt_BR: service_name
            zh_Hans: service_name
          llm_description: æŒ‡å®šçš„æœåŠ¡å
          max: null
          min: null
          name: service_name
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Specified endpoint name
            ja_JP: Specified endpoint name
            pt_BR: Specified endpoint name
            zh_Hans: æŒ‡å®šçš„æœåŠ¡ç«¯ç‚¹å
          label:
            en_US: content_key
            ja_JP: content_key
            pt_BR: content_key
            zh_Hans: content_key
          llm_description: æŒ‡å®šçš„æœåŠ¡ç«¯ç‚¹å
          max: null
          min: null
          name: content_key
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query start time(Microsecond)
            ja_JP: Data query start time(Microsecond)
            pt_BR: Data query start time(Microsecond)
            zh_Hans: å¼€å§‹æ—¶é—´ (å¾®ç§’)
          label:
            en_US: startTime
            ja_JP: startTime
            pt_BR: startTime
            zh_Hans: startTime
          llm_description: Data query start time(Microsecond)
          max: null
          min: null
          name: startTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query end time(Microsecond)
            ja_JP: Data query end time(Microsecond)
            pt_BR: Data query end time(Microsecond)
            zh_Hans: ç»“æŸæ—¶é—´ (å¾®ç§’)
          label:
            en_US: endTime
            ja_JP: endTime
            pt_BR: endTime
            zh_Hans: endTime
          llm_description: Data query end time(Microsecond)
          max: null
          min: null
          name: endTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        params:
          content_key: ''
          endTime: ''
          service_name: ''
          startTime: ''
        provider_id: apo_select
        provider_name: apo_select
        provider_type: builtin
        selected: false
        title: æœåŠ¡è¯·æ±‚æˆåŠŸç‡(æŒ‰æœåŠ¡åå’Œå†…å®¹é”®ç»Ÿè®¡,æŒ‡å®šæ—¶é—´æ®µå†…)
        tool_configurations: {}
        tool_label: æœåŠ¡è¯·æ±‚æˆåŠŸç‡(æŒ‰æœåŠ¡åå’Œå†…å®¹é”®ç»Ÿè®¡,æŒ‡å®šæ—¶é—´æ®µå†…)
        tool_name: Originx åŒ—ææ˜ŸæŒ‡æ ‡ (æœåŠ¡å±‚çº§) - REDæŒ‡æ ‡ - è¯·æ±‚æˆåŠŸç‡
        tool_parameters:
          endTime:
            type: variable
            value:
            - '1741227526517'
            - endTime
          service_name:
            type: mixed
            value: '{{#1753414255071.result#}}'
          startTime:
            type: variable
            value:
            - '1741227526517'
            - startTime
        type: tool
      height: 54
      id: '1753426534118'
      position:
        x: 5338
        y: 758
      positionAbsolute:
        x: 5338
        y: 758
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Service name
            ja_JP: Service name
            pt_BR: Service name
            zh_Hans: æœåŠ¡å
          label:
            en_US: service
            ja_JP: service
            pt_BR: service
            zh_Hans: service
          llm_description: Service name
          max: null
          min: null
          name: service
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: cluster
            ja_JP: cluster
            pt_BR: cluster
            zh_Hans: é›†ç¾¤
          label:
            en_US: cluster
            ja_JP: cluster
            pt_BR: cluster
            zh_Hans: cluster
          llm_description: cluster
          max: null
          min: null
          name: cluster
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: endpoint
            ja_JP: endpoint
            pt_BR: endpoint
            zh_Hans: endpoint
          label:
            en_US: endpoint
            ja_JP: endpoint
            pt_BR: endpoint
            zh_Hans: endpoint
          llm_description: endpoint
          max: null
          min: null
          name: endpoint
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query start time(Microsecond)
            ja_JP: Data query start time(Microsecond)
            pt_BR: Data query start time(Microsecond)
            zh_Hans: å¼€å§‹æ—¶é—´ (å¾®ç§’)
          label:
            en_US: startTime
            ja_JP: startTime
            pt_BR: startTime
            zh_Hans: startTime
          llm_description: Data query start time(Microsecond)
          max: null
          min: null
          name: startTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query end time(Microsecond)
            ja_JP: Data query end time(Microsecond)
            pt_BR: Data query end time(Microsecond)
            zh_Hans: ç»“æŸæ—¶é—´ (å¾®ç§’)
          label:
            en_US: endTime
            ja_JP: endTime
            pt_BR: endTime
            zh_Hans: endTime
          llm_description: Data query end time(Microsecond)
          max: null
          min: null
          name: endTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        params:
          cluster: ''
          endTime: ''
          endpoint: ''
          service: ''
          startTime: ''
        provider_id: apo_select
        provider_name: apo_select
        provider_type: builtin
        selected: false
        title: æŸ¥è¯¢æœåŠ¡REDæŒ‡æ ‡
        tool_configurations: {}
        tool_label: æŸ¥è¯¢æœåŠ¡REDæŒ‡æ ‡
        tool_name: dataplane_service_redcharts
        tool_parameters:
          endTime:
            type: variable
            value:
            - '1741227526517'
            - endTime
          service:
            type: mixed
            value: '{{#1753414255071.result#}}'
          startTime:
            type: variable
            value:
            - '1741227526517'
            - startTime
        type: tool
      height: 54
      id: '1753426546760'
      position:
        x: 4730
        y: 758
      positionAbsolute:
        x: 4730
        y: 758
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: /models/qwen2.5-32B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 1a251b76-1e32-4905-b8d1-859a76bf6237
          role: system
          text: ä½ æ˜¯ä¸€ä½å¯è§‚æµ‹æ€§é¢†åŸŸæ™ºèƒ½åŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†æè§£å†³é—®é¢˜ã€‚
        - id: 77620c0c-48c7-4bf4-b0ea-2d673be4b5e3
          role: user
          text: '# ä»»åŠ¡

            æ ¹æ®æ—¥å¿—å†…å®¹åˆ†ææœåŠ¡ä¸å¯ç”¨åŸå› å’Œæ¨æµ‹æ˜¯å†…éƒ¨é—®é¢˜è¿˜æ˜¯å¤–éƒ¨é—®é¢˜ã€‚

            # æ•°æ®

            å‘Šè­¦äº‹ä»¶ï¼š{{#1742807803325.alertName#}}

            æ—¶é—´æ®µå†…è‡ªèº«é”™è¯¯ç›¸å…³æ—¥å¿—ï¼š{{#1753687345334.error_logs_str#}}

            æœåŠ¡ï¼š{{#1753414255071.result#}}

            # åˆ†ææ€è·¯

            èšç„¦äºå‘Šè­¦å’Œç›¸å…³çš„é”™è¯¯æ—¥å¿—ï¼ŒæŒ‰æ—¶é—´ç‚¹æ€»ç»“é”™è¯¯åŸå› ï¼Œæ ¹æ®æ—¥å¿—ä¸Šä¸‹æ–‡åˆ¤æ–­æ˜¯åº”ç”¨è‡ªèº«åŸå› è¿˜æ˜¯å¤–éƒ¨ä¾èµ–åŸå› ã€‚

            # è¾“å‡º

            1. ç»™å‡ºé—®é¢˜äº§ç”Ÿçš„åŸå› æ˜¯å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨ï¼Œå¦‚æœæ˜¯å¤–éƒ¨åŸå› å°è¯•æ€»ç»“å‡ºå‡ºé”™çš„å¤–éƒ¨æœåŠ¡ã€‚

            2. æŒ‰æ—¶é—´å’Œå†…å®¹æ€»ç»“é”™è¯¯æ—¥å¿—ã€‚

            3. è¾“å‡ºè¦åŒ…å«å®Œæ•´å‘Šè­¦ä¸Šä¸‹æ–‡ï¼ŒæœåŠ¡åœ¨xxæ—¶é—´äº§ç”Ÿäº†xxå‘Šè­¦ï¼Œæ¨æ–­ä¸ºå†…éƒ¨/å¤–éƒ¨åŸå› ï¼Œç›¸å…³æ—¥å¿—ä¸ºxxï¼Œå¯èƒ½åŸå› æ˜¯xxã€‚'
        selected: false
        title: åˆ†æé—®é¢˜æ˜¯å†…éƒ¨/å¤–éƒ¨äº§ç”Ÿ
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1753433531861'
      position:
        x: 6998
        y: 498
      positionAbsolute:
        x: 6998
        y: 498
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: /models/qwen2.5-32B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 33d6ac62-5c51-4b4a-a568-15502d859538
          role: system
          text: ä½ æ˜¯ä¸€ä½å¯è§‚æµ‹æ€§é¢†åŸŸæ™ºèƒ½åŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†æè§£å†³é—®é¢˜ã€‚
        - id: 9447a640-941c-4ddc-a0fb-904e21b8d782
          role: user
          text: '# ä»»åŠ¡

            æœåŠ¡çš„è¿›ç¨‹{{#1742807803325.pid#}}æŒç»­ä¸€æ®µæ—¶é—´ä¸æ´»è·ƒï¼Œå·²çŸ¥æ ¹æ®æ—¥å¿—æ²¡æœ‰åˆ†æå‡ºå…·ä½“åŸå› ç°åœ¨åˆ†ææœåŠ¡è¿›ç¨‹æ¶ˆäº¡ä¸èµ„æºä½¿ç”¨é‡æ˜¯å¦æœ‰å…³å¹¶ç»™å‡ºä¸€ä¸ªç®€å•æ€»ç»“ã€‚

            æ ¹æ®æœåŠ¡æ‰€åœ¨ä¸»æœºèµ„æºä½¿ç”¨æ•°æ®å’ŒæœåŠ¡è¿›ç¨‹ä¸Šä¸€æ¬¡è¢«æ¢æµ‹åˆ°çš„æ—¶é—´ï¼Œåˆ†æè¿›ç¨‹æœåŠ¡ä¸å¯ç”¨æ˜¯å¦ä¸èµ„æºä½¿ç”¨ç›¸å…³ï¼Œå¹¶ç»™å‡ºä¸€å¥ç®€å•æ€»ç»“ã€‚

            # æ•°æ®

            æ—¶é—´æ®µå†…çš„ä¸»æœºcpuä½¿ç”¨é‡{{#1753691763954.text#}}ï¼ˆå…¶ä¸­æ—¶é—´æˆ³å•ä½ä¸ºå¾®ç§’ï¼‰ï¼Œæ—¶é—´æ®µå†…çš„ä¸»æœºå†…å­˜ä½¿ç”¨é‡{{#1753691720044.text#}}ï¼ˆå…¶ä¸­æ—¶é—´æˆ³å•ä½ä¸ºå¾®ç§’ï¼‰ï¼Œè¿›ç¨‹ä¸Šä¸€æ¬¡è¢«æ¢æµ‹åˆ°çš„æ—¶é—´{{#1753436915396.text#}}(ç§’)ï¼Œå‘Šè­¦{{#1742807803325.alertName#}}ï¼Œè¿›ç¨‹å{{#1742807803325.comm#}}ã€‚

            # åˆ†ææ€è·¯

            1. å¦‚æœèµ„æºä½¿ç”¨é‡ä¸€ç›´å¤„äºå¹³ç¨³çŠ¶æ€ï¼Œæˆ–è€…æ²¡æœ‰ç›¸å…³æ•°æ®åˆ™è®¤ä¸ºè¿›ç¨‹æ¶ˆå¤±ä¸èµ„æºä½¿ç”¨æ— å…³ï¼Œæé†’ç”¨æˆ·å¯èƒ½ä¸ºå¼‚æ­¥å·¥ä½œè¿›ç¨‹ï¼Œå±äºæ­£å¸¸ç°è±¡ã€‚

            2. å¦‚æœè¿›ç¨‹å·²ç»æ¶ˆå¤±ä¸€æ®µæ—¶é—´ï¼Œåˆ¤æ–­èµ„æºä½¿ç”¨é‡æ˜¯å¦ç¬¦åˆåœ¨è¿›ç¨‹æ¢æµ‹æ—¶é—´ä¹‹å‰å¤„äºä¸Šå‡ä¸”è¾¾åˆ°å¾ˆé«˜çš„æ°´å¹³ï¼Œåœ¨è¿›ç¨‹æ¢æµ‹æ—¶é—´ä¹‹åè¿…é€Ÿä¸‹é™å¹¶è¶‹äºå¹³ç¨³ï¼Œå¦‚æœç¬¦åˆè¿™ä¸ªè§„åˆ™åˆ™è®¤ä¸ºè¿›ç¨‹æ¶ˆå¤±ç”±äºèµ„æºä½¿ç”¨å¼•èµ·ã€‚

            # è¾“å‡º

            1. æŒ‰æ—¶é—´åŒºé—´æ€»ç»“ä¸»æœºcpuå’Œå†…å­˜çš„ä½¿ç”¨è¶‹åŠ¿ï¼Œå¹¶åˆ¤æ–­æœåŠ¡ä¸å¯ç”¨æ˜¯å¦ä¸èµ„æºä½¿ç”¨è¿‡å¤šæœ‰å…³ï¼Œæ— éœ€ç»™å‡ºä¸å¯ç”¨çš„é¢å¤–æ¨æµ‹åŸå› ã€‚

            2. è¾“å‡ºè¦åŒ…å«å®Œæ•´çš„å‘Šè­¦ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒæœåŠ¡xxåœ¨xxæ—¶é—´æ®µå‘ç”Ÿäº†xxå‘Šè­¦+ä½ ç»™å‡ºçš„å‘Šè­¦æ€»ç»“ã€‚

            '
        selected: false
        title: åˆ†ææ˜¯å¦ä¸èµ„æºä½¿ç”¨é‡ç›¸å…³
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1753436673318'
      position:
        x: 6168
        y: 628
      positionAbsolute:
        x: 6168
        y: 628
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: /models/qwen2.5-32B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 46ff962f-3331-441e-8d37-f179e08c916d
          role: system
          text: ä½ æ˜¯ä¸€ä½å¯è§‚æµ‹æ€§é¢†åŸŸæ™ºèƒ½åŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†æè§£å†³é—®é¢˜ã€‚
        - id: ffc64099-5503-4da5-902e-25740ddf2b3a
          role: user
          text: '# ä»»åŠ¡

            å¸®åŠ©åˆ†ææœåŠ¡è¿›ç¨‹æ¶ˆäº¡æ˜¯å¦ä¸æ¶æ„è¯·æ±‚æœ‰å…³å¹¶ç»™å‡ºä¸€ä¸ªæ€»ç»“æŠ¥å‘Šã€‚

            æ ¹æ®æœåŠ¡è¯·æ±‚é‡å’ŒæˆåŠŸç‡æ•°æ®ä»¥åŠæœåŠ¡è¿›ç¨‹ä¸Šä¸€æ¬¡è¢«æ¢æµ‹åˆ°çš„æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œåˆ†ææœåŠ¡ä¸å¯ç”¨æ˜¯å¦æ˜¯ç”±äºé­å—æ¶æ„æ”»å‡»é€ æˆã€‚

            # æ•°æ®

            æœåŠ¡è¯·æ±‚æˆåŠŸç‡{{#1753426534118.text#}}ï¼ˆå…¶ä¸­æ—¶é—´æˆ³å•ä½ä¸ºå¾®ç§’ï¼‰ï¼ŒæœåŠ¡è¯·æ±‚é‡{{#1753437328850.tps#}}ï¼ˆå…¶ä¸­æ—¶é—´æˆ³å•ä½ä¸ºå¾®ç§’ï¼‰ï¼Œè¿›ç¨‹ä¸Šä¸€æ¬¡è¢«æ¢æµ‹åˆ°çš„æ—¶é—´{{#1753436915396.text#}}ï¼Œå‘Šè­¦{{#1742807803325.alertName#}}ï¼Œè¿›ç¨‹å{{#1742807803325.comm#}}ã€‚

            # åˆ†ææ€è·¯

            1. å¦‚æœè¯·æ±‚æˆåŠŸç‡ä¸€ç›´ä¸º0ï¼Œåˆ™ä»£è¡¨æ²¡æœ‰è¯·æ±‚æˆåŠŸç‡æ•°æ®ï¼ˆè¿™æ®µæ—¶é—´å†…æ²¡æœ‰è¯·æ±‚ï¼Œæ‰€ä»¥æˆåŠŸç‡ä¸º0ï¼‰ï¼Œå¦‚æœè¯·æ±‚é‡ä¹Ÿä¸º0ï¼Œä»£è¡¨ä¸å­˜åœ¨æ¶æ„è¯·æ±‚ã€‚

            2. å¦‚æœæœåŠ¡è¯·æ±‚é‡å’Œè¯·æ±‚æˆåŠŸç‡ä¸€ç›´å¤„äºå¹³ç¨³çŠ¶æ€ï¼Œæˆ–è€…æ²¡æœ‰ç›¸å…³æ•°æ®ï¼Œåˆ™è®¤ä¸ºè¿›ç¨‹æ¶ˆå¤±ä¸å…¶æ— å…³ï¼Œæç¤ºå¯èƒ½ä¸ºçŸ­å‘½çš„å¼‚æ­¥å·¥ä½œè¿›ç¨‹ï¼Œå±äºæ­£å¸¸ç°è±¡ã€‚

            3. å¦‚æœæœ‰ç›¸å…³æ•°æ®ï¼Œåˆ¤æ–­æœåŠ¡è¯·æ±‚é‡æ˜¯å¦ç¬¦åˆä¸‹é¢è§„åˆ™ï¼šåœ¨è¿›ç¨‹æ¢æµ‹æ—¶é—´ä¹‹å‰å¤„äºä¸Šå‡ä¸”è¾¾åˆ°å¾ˆé«˜çš„æ°´å¹³ï¼Œè¯·æ±‚æˆåŠŸç‡åœ¨è¿›ç¨‹æ¢æµ‹æ—¶é—´ä¹‹é—´å¤„äºä¸‹é™ä¸”è¾¾åˆ°è¾ƒä½æ°´å¹³ï¼›åœ¨è¿›ç¨‹æ¢æµ‹æ—¶é—´ä¹‹åè¯·æ±‚é‡è¿…é€Ÿä¸‹é™å¹¶è¶‹äºå¹³ç¨³ï¼ŒæˆåŠŸç‡ç¨³å®šåœ¨ä¸€ä¸ªåˆç†æ°´å¹³ï¼ˆæ³¨æ„æ­¤æ—¶ç”±äºè¿›ç¨‹å¯èƒ½æ¶ˆå¤±ï¼Œä¸¤ä¸ªæ•°æ®å¯èƒ½å‡ä¸ºè¾ƒä½æ°´å¹³ï¼‰ï¼Œå¦‚æœç¬¦åˆè¿™ä¸ªè§„åˆ™åˆ™è®¤ä¸ºè¿›ç¨‹æ¶ˆå¤±ç”±äºèµ„æºä½¿ç”¨å¼•èµ·ã€‚

            # è¾“å‡º

            1. æŒ‰æ—¶é—´åŒºé—´æ€»ç»“æœåŠ¡è¯·æ±‚é‡å’ŒæˆåŠŸç‡çš„è¶‹åŠ¿ï¼Œå¹¶åˆ¤æ–­æœåŠ¡ä¸å¯ç”¨æ˜¯å¦å¯èƒ½å­˜åœ¨æ¶æ„è¯·æ±‚ï¼Œå¦‚æœæ— å…³æ— éœ€ç»™å‡ºä¸å¯ç”¨çš„é¢å¤–æ¨æµ‹åŸå› ã€‚

            2. è¾“å‡ºè¦åŒ…å«å®Œæ•´çš„å‘Šè­¦ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒæœåŠ¡xxåœ¨xxæ—¶é—´æ®µå‘ç”Ÿäº†xxå‘Šè­¦+ä½ ç»™å‡ºçš„å‘Šè­¦æ€»ç»“ã€‚

            '
        selected: false
        title: åˆ†ææ˜¯å¦å­˜åœ¨æ¶æ„è¯·æ±‚
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1753436803036'
      position:
        x: 6168
        y: 758
      positionAbsolute:
        x: 6168
        y: 758
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Name of process, metirc's comm label.
            ja_JP: Name of process, metirc's comm label.
            pt_BR: Name of process, metirc's comm label.
            zh_Hans: è¿›ç¨‹åï¼ŒæŒ‡æ ‡commæ ‡ç­¾
          label:
            en_US: Name of process.
            ja_JP: Name of process.
            pt_BR: Name of process.
            zh_Hans: è¿›ç¨‹å
          llm_description: Name of process, metric's comm label.
          max: null
          min: null
          name: comm
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Name of workload.
            ja_JP: Name of workload.
            pt_BR: Name of workload.
            zh_Hans: å·¥ä½œè´Ÿè½½å
          label:
            en_US: Name of workload.
            ja_JP: Name of workload.
            pt_BR: Name of workload.
            zh_Hans: å·¥ä½œè´Ÿè½½å
          llm_description: Name of workload.
          max: null
          min: null
          name: workloadName
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Id of process
            ja_JP: Id of process
            pt_BR: Id of process
            zh_Hans: è¿›ç¨‹id
          label:
            en_US: Id of process.
            ja_JP: Id of process.
            pt_BR: Id of process.
            zh_Hans: è¿›ç¨‹id
          llm_description: Id of process.
          max: null
          min: null
          name: pid
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Name of node.
            ja_JP: Name of node.
            pt_BR: Name of node.
            zh_Hans: ä¸»æœºå
          label:
            en_US: Name of node.
            ja_JP: Name of node.
            pt_BR: Name of node.
            zh_Hans: ä¸»æœºå
          llm_description: Name of node.
          max: null
          min: null
          name: nodeName
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query start time(Microsecond)
            ja_JP: Data query start time(Microsecond)
            pt_BR: Data query start time(Microsecond)
            zh_Hans: å¼€å§‹æ—¶é—´ (å¾®ç§’)
          label:
            en_US: startTime
            ja_JP: startTime
            pt_BR: startTime
            zh_Hans: startTime
          llm_description: Data query start time(Microsecond)
          max: null
          min: null
          name: startTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query end time(Microsecond)
            ja_JP: Data query end time(Microsecond)
            pt_BR: Data query end time(Microsecond)
            zh_Hans: ç»“æŸæ—¶é—´ (å¾®ç§’)
          label:
            en_US: endTime
            ja_JP: endTime
            pt_BR: endTime
            zh_Hans: endTime
          llm_description: Data query end time(Microsecond)
          max: null
          min: null
          name: endTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        params:
          comm: ''
          endTime: ''
          nodeName: ''
          pid: ''
          startTime: ''
          workloadName: ''
        provider_id: apo_select
        provider_name: apo_select
        provider_type: builtin
        selected: false
        title: æœåŠ¡/è¿›ç¨‹ä¸Šæ¬¡è¢«æ¢æµ‹åˆ°çš„Unixæ—¶é—´æˆ³
        tool_configurations: {}
        tool_label: æœåŠ¡/è¿›ç¨‹ä¸Šæ¬¡è¢«æ¢æµ‹åˆ°çš„Unixæ—¶é—´æˆ³
        tool_name: service_last_seen
        tool_parameters:
          comm:
            type: mixed
            value: '{{#1742807803325.comm#}}'
          endTime:
            type: variable
            value:
            - '1741227526517'
            - endTime
          nodeName:
            type: mixed
            value: '{{#1742807803325.nodeName#}}'
          pid:
            type: mixed
            value: '{{#1742807803325.pid#}}'
          startTime:
            type: variable
            value:
            - '1741227526517'
            - startTime
          workloadName:
            type: mixed
            value: '{{#1742807803325.workloadName#}}'
        type: tool
      height: 54
      id: '1753436915396'
      position:
        x: 4426
        y: 628
      positionAbsolute:
        x: 4426
        y: 628
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(red: str) -> dict:\n\n    try:\n        data\
          \ = json.loads(red)\n    except json.JSONDecodeError:\n        print(\"\
          Error: Invalid JSON string provided.\")\n        return {}\n\n    for item\
          \ in data.get(\"data\", []):\n        if item.get(\"title\") == \"ååé‡\"\
          :\n            return {\n                \"tps\": json.dumps(item)\n   \
          \         }\n            \n    return {\n        \"tps\": \"\"\n    }"
        code_language: python3
        desc: ''
        outputs:
          tps:
            children: null
            type: string
        selected: false
        title: è·å–æœåŠ¡è¯·æ±‚é‡
        type: code
        variables:
        - value_selector:
          - '1753426546760'
          - text
          variable: red
      height: 54
      id: '1753437328850'
      position:
        x: 5034
        y: 758
      positionAbsolute:
        x: 5034
        y: 758
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: /models/qwen2.5-32B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: bc74b5ac-8d4a-4145-9724-a48a089545fc
          role: system
          text: ä½ æ˜¯ä¸€ä½å¯è§‚æµ‹æ€§é¢†åŸŸæ™ºèƒ½åŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†æè§£å†³é—®é¢˜ã€‚
        - id: 4edabede-96e5-4013-8c41-ebf7d4de7c52
          role: user
          text: '# ä»»åŠ¡

            æœåŠ¡å‡ºç°äº†ä¸å¯ç”¨çš„å‘Šè­¦ï¼Œé€šè¿‡å‰é¢çš„åˆ†ææ²¡æœ‰æ¢æµ‹åˆ°ç›¸å…³çš„é”™è¯¯æ—¥å¿—ï¼Œæ‰€ä»¥è¯·æ ¹æ®æœåŠ¡åœ¨æŸæ—¶é—´æ®µå†…çš„èµ„æºä½¿ç”¨é‡å’ŒæœåŠ¡è¯·æ±‚é‡ã€æˆåŠŸç‡ä½¿ç”¨è¶‹åŠ¿ä»¥åŠä¸Šè¿°æŒ‡æ ‡ä¸æœåŠ¡å­˜æ´»æ—¶é—´çš„å…³ç³»ï¼Œåˆ¤æ–­æœåŠ¡ä¸å¯ç”¨çš„åŸå› æ˜¯ä»€ä¹ˆã€‚

            # æ•°æ®

            èµ„æºä½¿ç”¨é‡è¶‹åŠ¿å’Œä¸æœåŠ¡å­˜æ´»æ—¶é—´å…³ç³»

            {{#1753436673318.text#}}

            æˆåŠŸç‡å’Œè¯·æ±‚é‡è¶‹åŠ¿å’Œä¸æœåŠ¡å­˜æ´»æ—¶é—´å…³ç³»

            {{#1753436803036.text#}}


            å‘Šè­¦{{#1742807803325.alertName#}}

            å¦‚æœè¯·æ±‚æˆåŠŸç‡ä¸€ç›´ä¸º0ï¼ˆç›¸å…³æ—¶é—´æ®µå†…æ²¡æœ‰è¯·æ±‚æ‰€ä»¥æˆåŠŸç‡ä¸€ç›´ä¸º0ï¼‰ï¼Œåˆ™ä»£è¡¨æ²¡æœ‰ç›¸å…³æ•°æ®ï¼Œä¸ºæ­£å¸¸ç°è±¡ã€‚

            # åˆ†ææ€è·¯

            1. å¦‚æœç›¸å…³æ•°æ®å‡å¤„äºæ­£å¸¸æ°´å¹³åˆ™ä»£è¡¨ä¸è¿™äº›æ•°æ®æ— å…³ï¼Œå‘Šè­¦äº§ç”Ÿçš„åŸå› å¯èƒ½æ˜¯è¯¯å‘Šã€‚

            2. å¦‚æœæ•°æ®è¡¨æ˜å¯èƒ½ä¸èµ„æºä½¿ç”¨æœ‰å…³ä¸”ä¹Ÿå¯èƒ½å­˜åœ¨æ¶æ„è¯·æ±‚ï¼Œåˆ™æ•°æ®å¢å¹…åˆ¤æ–­ä¸€ä¸ªæœ€å¯èƒ½åŸå› ã€‚

            # è¾“å‡º

            åªéœ€è¦ç»™å‡ºèµ„æºä½¿ç”¨æƒ…å†µæè¿°ï¼Œå‘Šè­¦çš„æœ€å¯èƒ½åŸå› ã€‚'
        selected: false
        title: æ€»ç»“å…¶ä»–åŸå› 
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1753437974705'
      position:
        x: 6998
        y: 628
      positionAbsolute:
        x: 6998
        y: 628
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main(arg1: str):\n    red = json.loads(arg1).get(\"data\", [])\n\
          \    result = {}\n    result[\"data\"] = {\"timeseries\": []} \n\n    for\
          \ ts in red:\n        if ts[\"title\"] == \"ååé‡\":\n            result[\"\
          data\"][\"timeseries\"] = ts[\"timeseries\"]\n\n    return {\n        \"\
          result\": json.dumps(result)\n    }"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1753414276399'
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: è·å–è¯·æ±‚é‡
        type: code
        variables:
        - value_selector:
          - '1753414403009'
          - text
          variable: arg1
      height: 54
      id: '1753681278579'
      parentId: '1753414276399'
      position:
        x: 736
        y: 68
      positionAbsolute:
        x: 6378
        y: 956
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: /models/qwen2.5-32B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: ac73b7b4-a4f3-4363-bf5f-b5a9299f8b87
          role: system
          text: ä½ æ˜¯ä¸€ä½å¯è§‚æµ‹æ€§é¢†åŸŸæ™ºèƒ½åŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†æè§£å†³é—®é¢˜ã€‚
        - id: 6528755f-fe11-47bc-992e-026e11c523ae
          role: user
          text: '# ä»»åŠ¡

            æœåŠ¡å‡ºç°ä¸å¯ç”¨é—®é¢˜ï¼Œæ ¹æ®å—å½±å“ä¸Šæ¸¸æœåŠ¡çš„æ±‚æˆåŠŸç‡ä¸‹é™æƒ…å†µå’Œè¯·æ±‚é‡ä¸‹é™æƒ…å†µå’Œé“¾è·¯ä¸­é”™è¯¯ç«¯ç‚¹æ€»ç»“å—å½±å“æœåŠ¡çš„çŠ¶å†µã€‚

            # æ•°æ®

            å—å½±å“æœåŠ¡{{#1753414276399.output#}}ï¼Œæ²¡æœ‰æ•°æ®åˆ™å¿½ç•¥ï¼Œæç¤ºä¸Šæ¸¸æœåŠ¡å‡æ­£å¸¸ï¼Œæ— å—å½±å“æœåŠ¡ã€‚

            å¯¹åº”æ—¶é—´æ®µå†…ç›¸å…³é“¾è·¯çš„é”™è¯¯ç«¯ç‚¹{{#17537573455001.errorInstances#}}ï¼Œæ²¡æœ‰æ•°æ®åˆ™å¿½ç•¥ã€‚

            # åˆ†ææ€è·¯

            æ ¹æ®å—å½±å“æœåŠ¡çš„è¯·æ±‚æˆåŠŸç‡å’Œè¯·æ±‚é‡çš„ä¸‹é™æƒ…å†µï¼Œæ€»ç»“æœåŠ¡å—å½±å“æƒ…å†µï¼ˆä¸‹é™ç¨‹åº¦ï¼Œå¹³å‡æ°´å¹³ç­‰ç­‰ï¼‰æŒ‰ç…§å—å½±å“ç¨‹åº¦æ’åºã€‚å¦‚æœæœåŠ¡çš„æ•°æ®å¤„äºæ³¢åŠ¨çŠ¶æ€ï¼Œæ— æ˜æ˜¾ä¸‹é™è¶‹åŠ¿ä½ å¯ä»¥å¿½ç•¥ã€‚

            å¦‚æœæ²¡æœ‰ç›¸å…³æ•°æ®åˆ™æç¤ºæœåŠ¡å¯èƒ½æ²¡æœ‰ç›¸å…³ä¸Šæ¸¸æ‹“æ‰‘æˆ–è€…å—å½±å“æœåŠ¡ç›¸å…³æ•°æ®å‡å¤„äºæ­£å¸¸èŒƒå›´ã€‚

            å¦‚æœæœ‰é“¾è·¯ä¸­é”™è¯¯çš„service-instanceId-endpointç»„åˆï¼Œåˆ™æç¤ºé“¾è·¯ä¸­è¯¥ç«¯ç‚¹å‡ºé”™ã€‚

            # è¾“å‡º

            åªéœ€æŒ‰ç…§å—å½±å“ç¨‹åº¦ä¾æ¬¡æ€»ç»“æœåŠ¡çš„å—å½±å“æƒ…å†µã€‚è¯­æ„æ˜ç¡®ï¼Œç®€æ´æ˜äº†ã€‚'
        selected: false
        title: æ€»ç»“å—å½±å“æœåŠ¡
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1753684009639'
      position:
        x: 6998
        y: 917
      positionAbsolute:
        x: 6998
        y: 917
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: string
        selected: false
        title: å¯ç”¨æ€§åˆ†æç»“æœ
        type: variable-aggregator
        variables:
        - - '1753433531861'
          - text
        - - '1753437974705'
          - text
      height: 131
      id: '1753686431084'
      position:
        x: 7302
        y: 628
      positionAbsolute:
        x: 7302
        y: 628
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(all_logs):\n    detected = \"false\"\n    error_logs\
          \ = []\n    for logs in all_logs:\n        error_logs.append(logs)\n   \
          \     if len(logs) > 0:\n            detected = \"true\"\n    error_logs\
          \ = error_logs[:20]\n    res = json.dumps({\"logs\": error_logs})\n    MAX_LENGTH\
          \ = 5000\n    while len(res) > MAX_LENGTH and len(error_logs) > 0:\n   \
          \     remove_count = max(1, len(error_logs) // 10)\n        error_logs =\
          \ error_logs[:-remove_count]\n        res = json.dumps({\"logs\": error_logs})\n\
          \    return {\n        \"result\": detected,\n        \"error_logs_str\"\
          : res\n    }"
        code_language: python3
        desc: ''
        outputs:
          error_logs_str:
            children: null
            type: string
          result:
            children: null
            type: string
        selected: false
        title: æ˜¯å¦æ£€æµ‹åˆ°é”™è¯¯æ—¥å¿—
        type: code
        variables:
        - value_selector:
          - '1753414518300'
          - output
          variable: all_logs
      height: 54
      id: '1753687345334'
      position:
        x: 3818
        y: 498
      positionAbsolute:
        x: 3818
        y: 498
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Prometheus job name for host metrics
            ja_JP: Prometheus job name for host metrics
            pt_BR: Prometheus job name for host metrics
            zh_Hans: Prometheusä»»åŠ¡åç§°ï¼ˆå®¿ä¸»æœºæŒ‡æ ‡ï¼‰
          label:
            en_US: Prometheus Job
            ja_JP: Prometheus Job
            pt_BR: Tarefa Prometheus
            zh_Hans: Prometheusä»»åŠ¡
          llm_description: Unique identifier for metrics scrape job
          max: null
          min: null
          name: job
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Host node identifier
            ja_JP: Host node identifier
            pt_BR: Host node identifier
            zh_Hans: å®¿ä¸»æœºèŠ‚ç‚¹æ ‡è¯†
          label:
            en_US: Host Node
            ja_JP: Host Node
            pt_BR: Host Node
            zh_Hans: å®¿ä¸»æœºèŠ‚ç‚¹
          llm_description: Unique identifier for host node
          max: null
          min: null
          name: node
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query start time(Microsecond)
            ja_JP: Data query start time(Microsecond)
            pt_BR: Data query start time(Microsecond)
            zh_Hans: å¼€å§‹æ—¶é—´ (å¾®ç§’)
          label:
            en_US: startTime
            ja_JP: startTime
            pt_BR: startTime
            zh_Hans: startTime
          llm_description: Data query start time(Microsecond)
          max: null
          min: null
          name: startTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query end time(Microsecond)
            ja_JP: Data query end time(Microsecond)
            pt_BR: Data query end time(Microsecond)
            zh_Hans: ç»“æŸæ—¶é—´ (å¾®ç§’)
          label:
            en_US: endTime
            ja_JP: endTime
            pt_BR: endTime
            zh_Hans: endTime
          llm_description: Data query end time(Microsecond)
          max: null
          min: null
          name: endTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        params:
          endTime: ''
          job: ''
          node: ''
          startTime: ''
        provider_id: apo_select
        provider_name: apo_select
        provider_type: builtin
        selected: false
        title: æŸ¥è¯¢å®¿ä¸»æœºRAMä½¿ç”¨ç‡
        tool_configurations: {}
        tool_label: æŸ¥è¯¢å®¿ä¸»æœºRAMä½¿ç”¨ç‡
        tool_name: æŸ¥è¯¢å®¿ä¸»æœºRAMä½¿ç”¨ç‡
        tool_parameters:
          endTime:
            type: variable
            value:
            - '1741227526517'
            - endTime
          node:
            type: mixed
            value: '{{#1742807803325.nodeName#}}'
          startTime:
            type: variable
            value:
            - '1741227526517'
            - startTime
        type: tool
      height: 54
      id: '1753691720044'
      position:
        x: 5034
        y: 628
      positionAbsolute:
        x: 5034
        y: 628
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Host node identifier
            ja_JP: Host node identifier
            pt_BR: Host node identifier
            zh_Hans: å®¿ä¸»æœºèŠ‚ç‚¹æ ‡è¯†
          label:
            en_US: Host Node
            ja_JP: Host Node
            pt_BR: Host Node
            zh_Hans: å®¿ä¸»æœºèŠ‚ç‚¹
          llm_description: Unique identifier for host node
          max: null
          min: null
          name: node
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query start time(Microsecond)
            ja_JP: Data query start time(Microsecond)
            pt_BR: Data query start time(Microsecond)
            zh_Hans: å¼€å§‹æ—¶é—´ (å¾®ç§’)
          label:
            en_US: startTime
            ja_JP: startTime
            pt_BR: startTime
            zh_Hans: startTime
          llm_description: Data query start time(Microsecond)
          max: null
          min: null
          name: startTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query end time(Microsecond)
            ja_JP: Data query end time(Microsecond)
            pt_BR: Data query end time(Microsecond)
            zh_Hans: ç»“æŸæ—¶é—´ (å¾®ç§’)
          label:
            en_US: endTime
            ja_JP: endTime
            pt_BR: endTime
            zh_Hans: endTime
          llm_description: Data query end time(Microsecond)
          max: null
          min: null
          name: endTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        params:
          endTime: ''
          node: ''
          startTime: ''
        provider_id: apo_select
        provider_name: apo_select
        provider_type: builtin
        selected: false
        title: æŸ¥è¯¢å®¿ä¸»æœºCPUç¹å¿™ç‡
        tool_configurations: {}
        tool_label: æŸ¥è¯¢å®¿ä¸»æœºCPUç¹å¿™ç‡
        tool_name: æŸ¥è¯¢å®¿ä¸»æœºCPUç¹å¿™ç‡
        tool_parameters:
          endTime:
            type: variable
            value:
            - '1741227526517'
            - endTime
          node:
            type: mixed
            value: '{{#1742807803325.nodeName#}}'
          startTime:
            type: variable
            value:
            - '1741227526517'
            - startTime
        type: tool
      height: 54
      id: '1753691763954'
      position:
        x: 5338
        y: 628
      positionAbsolute:
        x: 5338
        y: 628
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: f0d1bc13-a0c5-4876-b5d4-08254f5001ab
            value: 'true'
            varType: string
            variable_selector:
            - '1753687345334'
            - result
          - comparison_operator: contains
            id: 6f1e0274-f4d4-49c2-bb2f-a26993076088
            value: è¯·æ±‚é”™è¯¯ç‡
            varType: string
            variable_selector:
            - '1753411561314'
            - result
          id: 'true'
          logical_operator: or
        desc: ''
        selected: false
        title: æ˜¯å¦é€šè¿‡æ—¥å¿—åˆ¤æ–­æ ¹å› 
        type: if-else
      height: 152
      id: '1753755983769'
      position:
        x: 4122
        y: 498
      positionAbsolute:
        x: 4122
        y: 498
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: service name
            ja_JP: service name
            pt_BR: service name
            zh_Hans: æœåŠ¡å
          label:
            en_US: service
            ja_JP: service
            pt_BR: service
            zh_Hans: service
          llm_description: service name
          max: null
          min: null
          name: service
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: namespace
            ja_JP: namespace
            pt_BR: namespace
            zh_Hans: å‘½åç©ºé—´
          label:
            en_US: namespace
            ja_JP: namespace
            pt_BR: namespace
            zh_Hans: namespace
          llm_description: namespace
          max: null
          min: null
          name: namespace
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: endpoint name
            ja_JP: endpoint name
            pt_BR: endpoint name
            zh_Hans: æœåŠ¡ç«¯ç‚¹
          label:
            en_US: endpoint
            ja_JP: endpoint
            pt_BR: endpoint
            zh_Hans: endpoint
          llm_description: endpoint name
          max: null
          min: null
          name: endpoint
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: instance name
            ja_JP: instance name
            pt_BR: instance name
            zh_Hans: å®ä¾‹å
          label:
            en_US: instance
            ja_JP: instance
            pt_BR: instance
            zh_Hans: instance
          llm_description: instance name
          max: null
          min: null
          name: instance
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: node name
            ja_JP: node name
            pt_BR: node name
            zh_Hans: æœåŠ¡ç«¯ç‚¹
          label:
            en_US: nodeName
            ja_JP: nodeName
            pt_BR: nodeName
            zh_Hans: ä¸»æœºå
          llm_description: node name
          max: null
          min: null
          name: nodeName
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: containerId
            ja_JP: containerId
            pt_BR: containerId
            zh_Hans: æœåŠ¡ç«¯ç‚¹
          label:
            en_US: containerId
            ja_JP: containerId
            pt_BR: containerId
            zh_Hans: å®¹å™¨id
          llm_description: node name
          max: null
          min: null
          name: containerId
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: process id
            ja_JP: process id
            pt_BR: process id
            zh_Hans: è¿›ç¨‹id
          label:
            en_US: pid
            ja_JP: pid
            pt_BR: pid
            zh_Hans: è¿›ç¨‹id
          llm_description: process id
          max: null
          min: null
          name: pid
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: trace id
            ja_JP: trace id
            pt_BR: trace id
            zh_Hans: trace id
          label:
            en_US: traceId
            ja_JP: traceId
            pt_BR: traceId
            zh_Hans: traceId
          llm_description: trace id
          max: null
          min: null
          name: traceId
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: page number
            ja_JP: page number
            pt_BR: page number
            zh_Hans: é¡µç 
          label:
            en_US: pageNum
            ja_JP: pageNum
            pt_BR: pageNum
            zh_Hans: é¡µç 
          llm_description: page number
          max: null
          min: null
          name: pageNum
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: page size
            ja_JP: page size
            pt_BR: page size
            zh_Hans: æ¯é¡µæ¡æ•°
          label:
            en_US: pageSize
            ja_JP: pageSize
            pt_BR: pageSize
            zh_Hans: æ¯é¡µæ¡æ•°
          llm_description: page size
          max: null
          min: null
          name: pageSize
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query start time(Microsecond)
            ja_JP: Data query start time(Microsecond)
            pt_BR: Data query start time(Microsecond)
            zh_Hans: å¼€å§‹æ—¶é—´ (å¾®ç§’)
          label:
            en_US: startTime
            ja_JP: startTime
            pt_BR: startTime
            zh_Hans: startTime
          llm_description: Data query start time(Microsecond)
          max: null
          min: null
          name: startTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Data query end time(Microsecond)
            ja_JP: Data query end time(Microsecond)
            pt_BR: Data query end time(Microsecond)
            zh_Hans: ç»“æŸæ—¶é—´ (å¾®ç§’)
          label:
            en_US: endTime
            ja_JP: endTime
            pt_BR: endTime
            zh_Hans: endTime
          llm_description: Data query end time(Microsecond)
          max: null
          min: null
          name: endTime
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: number
        params:
          containerId: ''
          endTime: ''
          endpoint: ''
          instance: ''
          namespace: ''
          nodeName: ''
          pageNum: ''
          pageSize: ''
          pid: ''
          service: ''
          startTime: ''
          traceId: ''
        provider_id: apo_select
        provider_name: apo_select
        provider_type: builtin
        selected: false
        title: æŸ¥è¯¢é“¾è·¯æ•°æ®
        tool_configurations: {}
        tool_label: æŸ¥è¯¢é“¾è·¯æ•°æ®
        tool_name: æŸ¥è¯¢é“¾è·¯æ•°æ®
        tool_parameters:
          endTime:
            type: variable
            value:
            - '1741227526517'
            - endTime
          instance:
            type: mixed
            value: '{{#1742807803325.pod#}}'
          namespace:
            type: mixed
            value: ''
          nodeName:
            type: mixed
            value: '{{#1741227526517.nodeName#}}'
          pageNum:
            type: constant
            value: 1
          pageSize:
            type: constant
            value: 100
          service:
            type: mixed
            value: '{{#1753414255071.result#}}'
          startTime:
            type: variable
            value:
            - '1741227526517'
            - startTime
        type: tool
      height: 54
      id: '17537573455000'
      position:
        x: 5034
        y: 917
      positionAbsolute:
        x: 5034
        y: 917
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(data_json: str):\n    data = json.loads(data_json).get('data',\
          \ {}).get('list', [])\n\n    error_instances = []\n    seen_keys = set()\n\
          \n    for trace in data:\n        if not trace.get(\"flags\", {}).get('is_error',\
          \ False):\n            continue\n\n        service = trace.get('service')\n\
          \        instance = trace.get('instanceId')\n        endpoint = trace.get('endpoint')\n\
          \n        unique_key = f\"{service}-{instance}-{endpoint}\"\n        if\
          \ unique_key in seen_keys:\n            continue\n        seen_keys.add(unique_key)\n\
          \n        error_instances.append({\n            'endpoint': endpoint,\n\
          \            'instance': instance,\n            'tid_key': trace.get('tid_key'),\n\
          \            'service': service\n        })\n\n        if len(error_instances)\
          \ >= 30:\n            break\n\n    return {\n        'errorInstances': json.dumps(error_instances),\n\
          \    }\n"
        code_language: python3
        desc: ''
        outputs:
          errorInstances:
            children: null
            type: string
        selected: false
        title: æå–æ•…éšœé“¾è·¯ç›¸å…³ç«¯ç‚¹
        type: code
        variables:
        - value_selector:
          - '17537573455000'
          - text
          variable: data_json
      height: 54
      id: '17537573455001'
      position:
        x: 5338
        y: 917
      positionAbsolute:
        x: 5338
        y: 917
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\ndef main() -> dict:\n    return {\n        \"result\": \"{}\",\n\
          \    }\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: ç©ºå½±å“æœåŠ¡
        type: code
        variables: []
      height: 54
      id: '1753760026114'
      position:
        x: 7302
        y: 1096.5
      positionAbsolute:
        x: 7302
        y: 1096.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: string
        selected: false
        title: èšåˆå—å½±å“æœåŠ¡
        type: variable-aggregator
        variables:
        - - '1753760026114'
          - result
        - - '1753684009639'
          - text
      height: 131
      id: '1753760065732'
      position:
        x: 8214
        y: 628
      positionAbsolute:
        x: 8214
        y: 628
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -2780.0992543752186
      y: -360.52073427742823
      zoom: 0.5366858134987545
