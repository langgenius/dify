<!DOCTYPE html>
<html lang="en">

<head>
  <style>
    body {
      font-family: 'Inter', 'Arial', sans-serif;
      background-color: #e9ebf0;
      margin: 0;
      padding: 0;
      color: #000000;
    }

    *, *::before, *::after {
      box-sizing: border-box;
    }

    .card {
      width: 600px;
      min-height: 454px;
      margin: 40px auto 0;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      background: #fcfcfd;
      border: 1px solid #ffffff;
      box-shadow: 0px 3px 10px -2px rgba(9, 9, 11, 0.08), 0px 2px 4px -2px rgba(9, 9, 11, 0.06);
      border-radius: 16px;
    }

    .card-header {
      display: flex;
      padding: 36px 48px 24px 48px;
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
      align-self: stretch;
    }

    .card-header img {
      width: 68px;
      height: auto;
    }

    .card-content {
      display: flex;
      padding: 8px 48px 48px 48px;
      flex-direction: column;
      align-items: flex-start;
      gap: 16px;
      align-self: stretch;
      width: 100%;
    }

    .title {
      margin: 0;
      font-size: 24px;
      font-weight: 600;
      line-height: 120%;
      color: #000000;
    }

    .body-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
      padding: 16px 0 0;
    }

    .body-text {
      margin: 0;
      font-size: 14px;
      line-height: 20px;
      letter-spacing: -0.005em;
      color: #354052;
    }

    .body-text strong {
      font-weight: 600;
      color: #101828;
    }

    .cta {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      max-width: 504px;
      height: 32px;
      padding: 0 16px;
      gap: 8px;
      background: #1677ff;
      border-radius: 6px;
      text-decoration: none;
      color: #ffffff !important;
      font-size: 14px;
      line-height: 22px;
      font-weight: 400;
    }

    .note {
      margin: 0;
      font-size: 14px;
      line-height: 20px;
      letter-spacing: -0.005em;
      color: #354052;
    }

    .signature {
      margin-top: 28px;
      margin-bottom: 16px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 12px;
      width: 100%;
    }

    .signature-text {
      margin: 0;
      font-size: 14px;
      line-height: 20px;
      letter-spacing: -0.005em;
      color: #354052;
    }

    .email-footer {
      margin: 20px auto 40px;
      max-width: 600px;
      color: #676f83;
      text-align: center;
      font-family: 'Inter', 'Arial', sans-serif;
      font-size: 12px;
      font-style: normal;
      font-weight: 400;
      line-height: 16px;
      letter-spacing: -0.06px;
      flex: 1 0 0;
    }
  </style>
</head>

<body>
  {% set is_sandbox = (planName == 'Sandbox') %}
  {% set computed_usageScope = 'Trigger Events' if is_sandbox else 'Monthly Trigger Events' %}
  {% set computed_triggerSources = 'Plugin, Schedule, or Webhook' %}
  {% set computed_ctaLabel = 'Upgrade now' %}
  {% set computed_upgradeUrl = 'https://cloud.dify.ai/apps?pricing=open' %}
  {% if is_sandbox %}
    {% set computed_resetLine = 'Trigger Events for the Sandbox Plan do not reset monthly.' %}
  {% else %}
    {% set computed_resetLine = 'Monthly Trigger Events for the Professional Plan will reset on ' ~ resetDate ~ '.' %}
  {% endif %}

  <div class="card">
    <div class="card-header">
      <img src="https://assets.dify.ai/images/logo.png" alt="Dify Logo" />
    </div>
    <div class="card-content">
      <h1 class="title">You've reached your trigger events limit</h1>
      <div class="body-group">
        <p class="body-text">
          <strong>Dear {{ recipientName | default(workspaceName ~ ' team', true) }},</strong>
        </p>
        <p class="body-text">
          Your workspace <strong>{{workspaceName}}</strong> has used all available <strong>{{computed_usageScope}}</strong> for the
          <strong>{{planName}} Plan (limit: {{planLimit}})</strong>.
        </p>
        <p class="body-text">
          Workflows triggered by <strong>{{computed_triggerSources}}</strong> events have been temporarily paused.
        </p>
        <p class="body-text">
          To keep your workflows running without interruption, please upgrade your plan to unlock more Trigger Events.
        </p>
        <a class="cta" href="{{computed_upgradeUrl}}" target="_blank" rel="noopener noreferrer">{{computed_ctaLabel}}</a>
        <p class="note">
          <strong>{{computed_resetLine}}</strong>
        </p>
      </div>
      <div class="signature">
        <p class="signature-text">Best regards,</p>
        <p class="signature-text">The Dify Team</p>
      </div>
    </div>
  </div>
  <p class="email-footer">Please do not reply directly to this email, it is automatically sent by the system.</p>
</body>

</html>
