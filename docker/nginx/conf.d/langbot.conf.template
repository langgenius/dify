# Configuration for langbot.lefeng.school subdomain

server {
    listen ${NGINX_PORT};
    server_name langbot.${NGINX_SERVER_NAME};

    location = /WW_verify_KiDk4c0uzgf4zc8l.txt {
        default_type text/plain;
        return 200 'KiDk4c0uzgf4zc8l';
    }

    location = /WW_verify_mswCnge1eFy5BhIJ.txt {
        default_type text/plain;
        return 200 'mswCnge1eFy5BhIJ';
    }

    # Main langbot service
    location / {
        proxy_pass http://host.docker.internal:5300;
        include proxy.conf;
    }

    # Callback endpoint
    location /callback {
        proxy_pass http://host.docker.internal:2290;
        include proxy.conf;
    }

    # placeholder for acme challenge location
    ${ACME_CHALLENGE_LOCATION}

    # placeholder for https config defined in https.conf.template
    ${HTTPS_CONFIG}
} 